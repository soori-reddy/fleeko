"use strict";(self.webpackChunksolidapp=self.webpackChunksolidapp||[]).push([[4556],{4556:(nt,S,o)=>{o.r(S),o.d(S,{AccountsModule:()=>at,createTranslateLoader:()=>E});var p=o(9808),I=o(520),u=o(3075),g=o(1062),O=o(40),R=o(7006),U=o(3583),L=o(900),y=o(9291),G=o(449),M=o(4971),t=o(5e3),h=o(2340);let J=(()=>{class a{constructor(e){this.http=e}getAccounts(){return this.http.get(`${h.N.apiEndpoint}/metadata/accounttype`)}getOrderTypes(){return this.http.get(`${h.N.apiEndpoint}/metadata/ordertype`)}getOrderStatus(){return this.http.get(`${h.N.apiEndpoint}/metadata/orderstatus`)}getOrderStatusById(e){return this.http.get(`${h.N.apiEndpoint}/accounts/metadata/orderStatus/orderType/${e}`)}}return a.\u0275fac=function(e){return new(e||a)(t.LFG(I.eN))},a.\u0275prov=t.Yz7({token:a,factory:a.\u0275fac,providedIn:"root"}),a})();var F=o(5094),b=o(291),Q=o(722),P=o(4763),A=o(7093),T=o(7322),V=o(7531),B=o(3874),Y=o(7423),Z=o(9832),v=o(2181),D=o(9224),$=o(3322),H=o(5899),j=o(7142);const x=function(a,l,e){return{"warn-color":a,"accent-color":l,"primary-color":e}};function _(a,l){if(1&a&&(t.TgZ(0,"mat-card",25),t.TgZ(1,"div",26),t.TgZ(2,"div",27),t.TgZ(3,"mat-label"),t._uU(4),t.qZA(),t.qZA(),t.TgZ(5,"mat-card-content",28),t.TgZ(6,"mat-label",29),t.TgZ(7,"span",30),t._uU(8,"$"),t.qZA(),t._uU(9),t.qZA(),t.qZA(),t.qZA(),t.TgZ(10,"div",31),t.TgZ(11,"mat-label"),t._uU(12),t.qZA(),t._UZ(13,"mat-progress-bar",32),t.qZA(),t.qZA()),2&a){const e=l.$implicit;t.xp6(4),t.Oqu(e.label),t.xp6(1),t.Q6J("ngClass",t.kEZ(8,x,e.percent<=30,e.percent>31,e.percent>51)),t.xp6(4),t.Oqu(e.amount),t.xp6(1),t.Q6J("ngClass",t.kEZ(12,x,e.percent<=30,e.percent>31,e.percent>51)),t.xp6(1),t.Udp("margin-left",e.percent-11,"%"),t.xp6(1),t.hij("",e.percent,"% "),t.xp6(1),t.Q6J("value",e.percent)}}const z=function(a){return{"mat-h3 selected-tab":a}};function W(a,l){if(1&a){const e=t.EpF();t.TgZ(0,"mat-label",33),t.NdJ("click",function(){const d=t.CHM(e).index;return t.oxw().selectedAcntType(d)}),t._uU(1),t.ALo(2,"translate"),t.qZA()}if(2&a){const e=l.$implicit,n=l.index,i=t.oxw();t.Q6J("ngClass",t.VKq(4,z,i.selectedAcntTypeValue===n+1)),t.xp6(1),t.hij(" ",t.lcZ(2,2,e.display_name),"")}}function X(a,l){if(1&a&&(t.TgZ(0,"mat-button-toggle",17),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&a){const e=t.oxw().$implicit;t.Q6J("value",e),t.xp6(1),t.hij("",t.lcZ(2,2,e.display_name)," ")}}function q(a,l){if(1&a&&(t.ynx(0),t.YNc(1,X,3,4,"mat-button-toggle",34),t.BQk()),2&a){const e=l.$implicit;t.xp6(1),t.Q6J("ngIf",e.showOnUi)}}function K(a,l){if(1&a){const e=t.EpF();t.TgZ(0,"app-shared-grid",37),t.NdJ("selectedRow",function(i){return t.CHM(e),t.oxw(3).selectedRowItem(i)})("selectedSelection",function(i){return t.CHM(e),t.oxw(3).selectedSelection(i)}),t.qZA()}if(2&a){const e=t.oxw(2).$implicit,n=t.oxw();t.Q6J("data",n.gridData)("displayColumns",e.displayedColumns)("useCustomHeader",!0)("headers",e.headers)}}function w(a,l){if(1&a&&(t.TgZ(0,"div"),t.YNc(1,K,1,4,"app-shared-grid",36),t.qZA()),2&a){const e=t.oxw(2);t.xp6(1),t.Q6J("ngIf",e.dataLoaded)}}function k(a,l){if(1&a&&(t.TgZ(0,"div"),t.YNc(1,w,2,1,"div",35),t.qZA()),2&a){const e=l.$implicit,n=t.oxw();t.xp6(1),t.Q6J("ngIf",e.id===n.selectedAcntTypeValue)}}const tt=[{path:"",component:(()=>{class a{constructor(e,n,i,d,c,r){this.activatedRoute=e,this.router=n,this.cdr=i,this._accountService=d,this.translate=c,this.store=r,this.invoiceCards=[{id:1,label:"Paid",amount:"30,144,000",percent:"70"},{id:2,label:"Pending",amount:"75,000,000",percent:"30"},{id:3,label:"Total",amount:"30,219,000",percent:"100"}],this.accountTypes=[{id:3,label:"Invoices",displayedColumns:["select","num","ref","to","date","dueDate","amount","status"],headers:[{columnName:"select",display_name:"GRID.SELECT"},{columnName:"num",display_name:"GRID.INVOICE-NO"},{columnName:"ref",display_name:"GRID.REFERENCE"},{columnName:"to",display_name:"GRID.COMPANY"},{columnName:"date",display_name:"GRID.DATE",isCustom:!0,datatype:"date"},{columnName:"dueDate",display_name:"GRID.DUE-DATE",isCustom:!0,datatype:"date"},{columnName:"amount",display_name:"GRID.AMOUNT"},{columnName:"status",display_name:"GRID.STATUS"}]},{id:1,label:"Quotes",displayedColumns:["select","num","ref","to","date","dueDate","amount","status"],headers:[{columnName:"select",display_name:"GRID.SELECT"},{columnName:"num",display_name:"GRID.QUOTE-NO"},{columnName:"ref",display_name:"GRID.REFERENCE"},{columnName:"to",display_name:"GRID.COMPANY"},{columnName:"date",display_name:"GRID.DATE",isCustom:!0,datatype:"date"},{columnName:"dueDate",display_name:"GRID.DUE-DATE",isCustom:!0,datatype:"date"},{columnName:"amount",display_name:"GRID.AMOUNT"},{columnName:"status",display_name:"GRID.STATUS"}]},{id:2,label:"Sales orders",displayedColumns:["select","num","ref","to","date","dueDate","amount","status"],headers:[{columnName:"select",display_name:"GRID.SELECT"},{columnName:"num",display_name:"GRID.SALE-ORDER-NO"},{columnName:"ref",display_name:"GRID.REFERENCE"},{columnName:"to",display_name:"GRID.COMPANY"},{columnName:"date",display_name:"GRID.DATE",isCustom:!0,datatype:"date"},{columnName:"dueDate",display_name:"GRID.DUE-DATE",isCustom:!0,datatype:"date"},{columnName:"amount",display_name:"GRID.AMOUNT"},{columnName:"status",display_name:"GRID.STATUS"}]},{id:4,label:"Credit Memos",displayedColumns:["select","num","ref","to","date","dueDate","amount","status"],headers:[{columnName:"select",display_name:"GRID.SELECT"},{columnName:"num",display_name:"GRID.CREDIT-MEMO-NO"},{columnName:"ref",display_name:"GRID.REFERENCE"},{columnName:"to",display_name:"GRID.COMPANY"},{columnName:"date",display_name:"GRID.DATE",isCustom:!0,datatype:"date"},{columnName:"dueDate",display_name:"GRID.DUE-DATE",isCustom:!0,datatype:"date"},{columnName:"amount",display_name:"GRID.AMOUNT"},{columnName:"status",display_name:"GRID.STATUS"}]},{id:5,label:"Bills",displayedColumns:["select","num","ref","to","date","dueDate","amount","status"],headers:[{columnName:"select",display_name:"GRID.SELECT"},{columnName:"num",display_name:"GRID.BILL-NO"},{columnName:"ref",display_name:"GRID.REFERENCE"},{columnName:"to",display_name:"GRID.COMPANY"},{columnName:"date",display_name:"GRID.DATE",isCustom:!0,datatype:"date"},{columnName:"dueDate",display_name:"GRID.DUE-DATE",isCustom:!0,datatype:"date"},{columnName:"amount",display_name:"GRID.AMOUNT"},{columnName:"status",display_name:"GRID.STATUS"}]}],this.gridData=[],this.dataLoaded=!1,this.selectedAcntTypeValue=3,this.CheckListSelection=new G.Ov(!1,[]),this.routerPath="invoice",this.menuPosition="after",this.savedInvoice={},this.allValue={id:0},this.invoiceCreateStatus={isAdd:!1,isEdit:!1,isCopy:!1},this.orderStatusControl=new u.NI(this.allValue),this.store.select(M.D6).subscribe(m=>{this.translate.use(m.userPreference.language)})}ngOnInit(){this.gridData=[],this.getOrderTypes(),this.getOrderStatus(),this.getOrderStatusById(3),this.selectedActnType={id:0};const e=JSON.parse(localStorage.getItem("selectedAccountType"));this.selectedAcntType(e?e.id-1:1)}addInvoice(){localStorage.setItem("selectedAccountType",JSON.stringify({id:this.selectedAcntTypeValue})),localStorage.removeItem("accountTypeStatus"),this.accountTypeStatus={isAdd:!0,isEdit:!1,isCopy:!1},localStorage.setItem("accountTypeStatus",JSON.stringify(this.accountTypeStatus)),this.router.navigate(["./"+this.routerPath+"/add"],{relativeTo:this.activatedRoute})}edit(){this.router.navigate(["./"+this.routerPath+"/edit",1],{relativeTo:this.activatedRoute})}selectedAcntType(e){var n,i,d,c,r,m,f,C,N;this.gridData=[],this.orderStatusById=[];let s={};this.orderStatusControl.setValue(this.allValue),this.selectedAcntTypeValue=e+1,this.getOrderStatusById(this.selectedAcntTypeValue),1===this.selectedAcntTypeValue?(s=JSON.parse(localStorage.getItem("createdQuote")),this.routerPath="quote"):2===this.selectedAcntTypeValue?(this.routerPath="saleorder",s=JSON.parse(localStorage.getItem("createdSaleOrder"))):3===this.selectedAcntTypeValue?(s=JSON.parse(localStorage.getItem("selectedItem")),this.routerPath="invoice"):4===this.selectedAcntTypeValue?(this.routerPath="creditmemo",s=JSON.parse(localStorage.getItem("createdCreditMemo"))):5===this.selectedAcntTypeValue&&(this.routerPath="bills",s=JSON.parse(localStorage.getItem("createdBill")));const ot={position:this.selectedAcntTypeValue,num:null===(n=null==s?void 0:s.details)||void 0===n?void 0:n.num,ref:null===(i=null==s?void 0:s.details)||void 0===i?void 0:i.ref,to:null===(c=null===(d=null==s?void 0:s.details)||void 0===d?void 0:d.to)||void 0===c?void 0:c.name,date:null===(r=null==s?void 0:s.details)||void 0===r?void 0:r.date,dueDate:null===(m=null==s?void 0:s.details)||void 0===m?void 0:m.dueDate,amount:null===(f=null==s?void 0:s.tallyValue)||void 0===f?void 0:f.total,status:null===(N=null===(C=null==s?void 0:s.tallyValue)||void 0===C?void 0:C.status)||void 0===N?void 0:N.value};this.gridData.push(ot),this.dataLoaded=!0}selectedRowItem(e){localStorage.setItem("selectedAccountType",JSON.stringify({id:this.selectedAcntTypeValue})),"Draft"===e.status||"Waiting for approval"===e.status?(localStorage.removeItem("accountTypeStatus"),this.accountTypeStatus={isAdd:!1,isEdit:!0,isCopy:!1},localStorage.setItem("accountTypeStatus",JSON.stringify(this.accountTypeStatus)),this.router.navigate(["./"+this.routerPath+"/add"],{relativeTo:this.activatedRoute})):this.router.navigate(["./"+this.routerPath+"/edit/"+e.position],{relativeTo:this.activatedRoute})}selectedAcntStatus(e){this.selectedActnType=e}selectedSelection(e){this.CheckListSelection=e}getOrderTypes(){this._accountService.getOrderTypes().subscribe(e=>{this.orderTypes=e})}getOrderStatus(){this._accountService.getOrderStatus().subscribe(e=>{this.orderStatus=e})}getOrderStatusById(e){this._accountService.getOrderStatusById(e).subscribe(n=>{this.orderStatusById=n})}applyFilter(e){}}return a.\u0275fac=function(e){return new(e||a)(t.Y36(y.gz),t.Y36(y.F0),t.Y36(t.sBO),t.Y36(J),t.Y36(g.sK),t.Y36(F.yh))},a.\u0275cmp=t.Xpm({type:a,selectors:[["app-accounts"]],decls:47,vars:24,consts:[[3,"title"],["fxLayout","column","fxLayoutGap","16px",1,"p-2"],["fxLayout","column","fxLayoutAlign","start start","fxLayoutGap","10px"],["fxLayout","row","fxLayoutAlign","stretch","fxLayoutGap","2.5em",1,"p-8"],["fxFlex","60",4,"ngFor","ngForOf"],["fxLayout","row"],["fxLayout","row","fxLayoutGap","16px","fxLayoutAlign","start center"],["class","cursor-pointer mb-0",3,"ngClass","click",4,"ngFor","ngForOf"],["fxFlex","1 1 auto"],["fxLayout","row","fxLayoutGap","5px","fxLayoutAlign","end center",1,"field-appeance-outline"],["appearance","outline",1,"mr-1"],["matInput","",3,"placeholder","keyup"],["matPrefix","",1,"mat-icon-rtl-mirror"],["mat-raised-button","","color","primary",3,"click"],[1,"mat-icon-rtl-mirror"],["fxLayout","row","fxLayoutAlign","start start"],["name","fontStyle","aria-label","Font Style","value","1",1,"accounts-btn-toggle-grp",3,"formControl","value","change"],[3,"value"],[4,"ngFor","ngForOf"],["fxLayout","row","fxLayoutGap","4px"],["mat-stroked-button","",3,"disabled"],["mat-stroked-button","",3,"matMenuTriggerFor","disabled"],[3,"xPosition"],["menu","matMenu"],["mat-menu-item",""],["fxFlex","60"],[1,"pt-4","pr-4","pb-1","pl-4"],["fxLayoutAlign","start start",1,"mb-2"],["fxLayoutAlign","center center",3,"ngClass"],[2,"font-size","20px"],[1,"mr-1"],[3,"ngClass"],["mode","determinate",3,"value"],[1,"cursor-pointer","mb-0",3,"ngClass","click"],[3,"value",4,"ngIf"],[4,"ngIf"],[3,"data","displayColumns","useCustomHeader","headers","selectedRow","selectedSelection",4,"ngIf"],[3,"data","displayColumns","useCustomHeader","headers","selectedRow","selectedSelection"]],template:function(e,n){if(1&e&&(t.TgZ(0,"app-page"),t._UZ(1,"app-page-header",0),t.TgZ(2,"app-page-body"),t.TgZ(3,"div",1),t.TgZ(4,"div",2),t.TgZ(5,"div",3),t.YNc(6,_,14,16,"mat-card",4),t.qZA(),t.qZA(),t.TgZ(7,"div",5),t.TgZ(8,"div",6),t.YNc(9,W,3,6,"mat-label",7),t.qZA(),t._UZ(10,"span",8),t.TgZ(11,"div",9),t.TgZ(12,"mat-form-field",10),t.TgZ(13,"input",11),t.NdJ("keyup",function(d){return n.applyFilter(d)}),t.ALo(14,"translate"),t.qZA(),t.TgZ(15,"mat-icon",12),t._uU(16,"search"),t.qZA(),t.qZA(),t.TgZ(17,"button",13),t.NdJ("click",function(){return n.addInvoice()}),t.TgZ(18,"mat-icon",14),t._uU(19,"add"),t.qZA(),t._uU(20),t.ALo(21,"translate"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(22,"div",15),t.TgZ(23,"mat-button-toggle-group",16),t.NdJ("change",function(d){return n.selectedAcntStatus(d.value)}),t.TgZ(24,"mat-button-toggle",17),t._uU(25),t.ALo(26,"translate"),t.qZA(),t.YNc(27,q,2,1,"ng-container",18),t.qZA(),t._UZ(28,"span",8),t.TgZ(29,"div",19),t.TgZ(30,"button",20),t.TgZ(31,"mat-icon",14),t._uU(32,"print"),t.qZA(),t.qZA(),t.TgZ(33,"button",21),t.TgZ(34,"mat-icon",14),t._uU(35,"get_app"),t.qZA(),t._uU(36),t.ALo(37,"translate"),t.TgZ(38,"mat-icon",14),t._uU(39,"keyboard_arrow_down"),t.qZA(),t.qZA(),t.TgZ(40,"mat-menu",22,23),t.TgZ(42,"button",24),t._uU(43,"Pdf"),t.qZA(),t.TgZ(44,"button",24),t._uU(45,"Xlsx"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.YNc(46,k,2,1,"div",18),t.qZA(),t.qZA(),t.qZA()),2&e){const i=t.MAs(41);t.xp6(1),t.Q6J("title","Accounts"),t.xp6(5),t.Q6J("ngForOf",n.invoiceCards),t.xp6(3),t.Q6J("ngForOf",n.orderTypes),t.xp6(4),t.s9C("placeholder",t.lcZ(14,16,"GRID.SEARCH")),t.xp6(7),t.hij(" ",t.lcZ(21,18,"BUTTON.ADD")," "),t.xp6(3),t.Q6J("formControl",n.orderStatusControl)("value",n.selectedActnType),t.xp6(1),t.Q6J("value",n.allValue),t.xp6(1),t.Oqu(t.lcZ(26,20,"ACCOUNTS.METADATA.ORDERSTATUS.ALL")),t.xp6(2),t.Q6J("ngForOf",n.orderStatusById),t.xp6(3),t.Q6J("disabled",0===n.CheckListSelection.selected.length),t.xp6(3),t.Q6J("matMenuTriggerFor",i)("disabled",0===n.CheckListSelection.selected.length),t.xp6(3),t.hij(" ",t.lcZ(37,22,"BUTTON.DOWNLOAD")," "),t.xp6(4),t.Q6J("xPosition",n.menuPosition),t.xp6(6),t.Q6J("ngForOf",n.accountTypes)}},directives:[b.I,Q.q,P.H,A.xw,A.SQ,A.Wh,p.sg,A.yH,T.KE,V.Nt,B.Hw,T.qo,Y.lW,Z.A9,u.JJ,u.oH,Z.Yi,v.p6,v.VK,v.OP,D.a8,T.hX,D.dn,p.mk,$.oO,H.pW,p.O5,j.M],pipes:[g.X$],styles:[""]}),a})()},{data:{breadcrumb:"FINANCE.MENU.ACCOUNTS.INVOICE"},path:"invoice",loadChildren:()=>o.e(1237).then(o.bind(o,1237)).then(a=>a.InvoiceModule)},{data:{breadcrumb:"FINANCE.MENU.ACCOUNTS.QUOTE"},path:"quote",loadChildren:()=>o.e(1653).then(o.bind(o,1653)).then(a=>a.QuotesModule)},{data:{breadcrumb:"FINANCE.MENU.ACCOUNTS.CREDITMEMO"},path:"creditmemo",loadChildren:()=>o.e(9248).then(o.bind(o,9248)).then(a=>a.CreditmemoModule)},{data:{breadcrumb:"FINANCE.MENU.ACCOUNTS.SALEORDER"},path:"saleorder",loadChildren:()=>o.e(9954).then(o.bind(o,9954)).then(a=>a.SalesorderModule)},{data:{breadcrumb:"FINANCE.MENU.ACCOUNTS.BILL"},path:"bills",loadChildren:()=>o.e(2618).then(o.bind(o,2618)).then(a=>a.BillsModule)}];let et=(()=>{class a{}return a.\u0275fac=function(e){return new(e||a)},a.\u0275mod=t.oAB({type:a}),a.\u0275inj=t.cJS({imports:[[y.Bz.forChild(tt)],y.Bz]}),a})();function E(a){return new O.w(a,"assets/i18n/",".json")}let at=(()=>{class a{}return a.\u0275fac=function(e){return new(e||a)},a.\u0275mod=t.oAB({type:a}),a.\u0275inj=t.cJS({imports:[[p.ez,R.q,et,u.u5,u.UX,L.m,g.aw.forChild({loader:{provide:g.Zw,useFactory:E,deps:[I.eN]},isolate:!0}),U._]]}),a})()}}]);