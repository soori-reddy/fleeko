"use strict";(self.webpackChunksolidapp=self.webpackChunksolidapp||[]).push([[7052],{7052:(q,I,n)=>{n.r(I),n.d(I,{DepartmentModule:()=>ne,createTranslateLoader:()=>w});var o=n(9808),v=n(520),r=n(3075),m=n(1062),S=n(40),_=n(7006),C=n(3583),h=n(900),d=n(9291),u=n(7618),A=n(9759),T=n(4971),e=n(5e3),b=n(7071),x=n(2329),N=n(2340);let y=(()=>{class i{constructor(t){this.http=t}getDivision(){return this.http.get(`${N.N.apiEndpoint}/org/config/division`)}save(t){return this.http.post(`${N.N.apiEndpoint}/org/config/division`,t)}update(t,a){return this.http.put(`${N.N.apiEndpoint}/org/config/division/${t}`,a)}delete(t){return this.http.delete(`${N.N.apiEndpoint}/org/config/division/${t}`)}}return i.\u0275fac=function(t){return new(t||i)(e.LFG(v.eN))},i.\u0275prov=e.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();var Q=n(8966),O=n(5094),L=n(291),R=n(722),F=n(4763),c=n(7093),g=n(7322),M=n(7531),U=n(4107),J=n(508);function Y(i,s){1&i&&(e.TgZ(0,"div"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"DIVISION.ERROR.TITLE-REQUIRED")," "))}function V(i,s){if(1&i&&(e.TgZ(0,"mat-error"),e.YNc(1,Y,3,3,"div",4),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",!(null==t.divisionEditForm.controls.name.errors||!t.divisionEditForm.controls.name.errors.required))}}function B(i,s){1&i&&(e.TgZ(0,"div"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"DIVISION.ERROR.TITLE-DISPLAYNAME-REQUIRED")," "))}function j(i,s){if(1&i&&(e.TgZ(0,"mat-error"),e.YNc(1,B,3,3,"div",4),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",!(null==t.divisionEditForm.controls.display_name.errors||!t.divisionEditForm.controls.display_name.errors.required))}}function $(i,s){if(1&i&&(e.TgZ(0,"mat-option",8),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i){const t=s.$implicit;e.Q6J("value",t.id),e.xp6(1),e.hij(" ",e.lcZ(2,2,t.display_name)," ")}}let K=(()=>{class i{constructor(t,a,l,p,f,E,D,Z){this.activatedRoute=t,this.snackbarService=a,this.permService=l,this.departmentService=p,this.translate=f,this.router=E,this.dialog=D,this.store=Z,this.filteredDivisions=[],this.appearanceType="fill",this.store.select(T.D6).subscribe(P=>{this.translate.use(P.userPreference.language),this.appearanceType=P.userPreference.appearanceType,this.direction=P.userPreference.direction})}ngOnInit(){var t,a;this.selectedNode=JSON.parse(localStorage.getItem("selectedItem")),this.divisionEditForm=new r.cw({name:new r.NI("",r.kI.required),display_name:new r.NI("",r.kI.required),has_sub_divisions:new r.NI({value:"",disabled:(null===(a=null===(t=this.selectedNode)||void 0===t?void 0:t.children)||void 0===a?void 0:a.length)>0},r.kI.required),parent_id:new r.NI("")}),this.getDivision(),this.divisionEditForm.patchValue({name:this.selectedNode.name,display_name:this.translate.instant(this.selectedNode.display_name),has_sub_divisions:this.selectedNode.has_sub_divisions,parent_id:this.selectedNode.parent_id}),this.divisionEditForm.disable()}updateDivision(){this.departmentService.update(this.selectedNode.id,this.divisionEditForm.value).subscribe({next:a=>{this.snackbarService.info(this.translate.instant("DIVISION.SUCCESS.UPDATE")),this.router.navigate(["../../"],{relativeTo:this.activatedRoute})},error:a=>this.snackbarService.warn(this.translate.instant("DIVISION.ERROR.UPDATE"))})}getDivision(){this.departmentService.getDivision().subscribe(t=>{this.divisions=t,this.divisions.forEach(a=>{a.has_sub_divisions&&this.filteredDivisions.push(a)}),this.divisionEditForm.patchValue({parent_id:this.selectedNode.parent_id})})}compareFn(t,a){return t===a}deleteDivision(){this.dialog.open(A.p,{disableClose:!0,direction:this.direction}).afterClosed().subscribe(a=>{"OK"===a&&this.departmentService.delete(this.selectedNode.id).subscribe({next:l=>{this.snackbarService.info(this.translate.instant("DIVISION.SUCCESS.DELETE")),this.router.navigate(["./../../"],{relativeTo:this.activatedRoute})},error:l=>this.snackbarService.warn(this.translate.instant("DIVISION.ERROR.DELETE"))})})}getPageAction(t){const a=t.toString();"delete"===a?this.deleteDivision():"update"===a?this.updateDivision():"modify"===a&&this.divisionEditForm.enable()}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(d.gz),e.Y36(b.o),e.Y36(x.$),e.Y36(y),e.Y36(m.sK),e.Y36(d.F0),e.Y36(Q.uw),e.Y36(O.yh))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-department-edit"]],decls:35,vars:37,consts:[[3,"title","showEditBack","showIcon","selectedId","showDelete","pageAction"],["fxLayout","row wrap","fxLayoutAlign","start start","fxLayoutGap","10px grid","fxFlexFill","",1,"pt-2","pb-2",3,"formGroup"],["fxLayout","column","fxFlex.xs","100","fxFlex","50","fxFlex.lg","33.33","fxFlex.gt-lg","25",3,"appearance"],["formControlName","name","matInput","","required",""],[4,"ngIf"],["fxFlex.xs","100","fxFlex","50","fxFlex.lg","33.33","fxFlex.gt-lg","25",3,"appearance"],["formControlName","display_name","matInput","","required",""],["formControlName","parent_id",3,"compareWith"],[3,"value"],[3,"value",4,"ngFor","ngForOf"],["formControlName","has_sub_divisions"]],template:function(t,a){1&t&&(e.TgZ(0,"app-page"),e.TgZ(1,"app-page-header",0),e.NdJ("pageAction",function(p){return a.getPageAction(p)}),e.ALo(2,"translate"),e.qZA(),e.TgZ(3,"app-page-body"),e.TgZ(4,"form",1),e.TgZ(5,"mat-form-field",2),e.TgZ(6,"mat-label"),e._uU(7),e.ALo(8,"translate"),e.qZA(),e._UZ(9,"input",3),e.YNc(10,V,2,1,"mat-error",4),e.qZA(),e.TgZ(11,"mat-form-field",5),e.TgZ(12,"mat-label"),e._uU(13),e.ALo(14,"translate"),e.qZA(),e._UZ(15,"input",6),e.YNc(16,j,2,1,"mat-error",4),e.qZA(),e.TgZ(17,"mat-form-field",5),e.TgZ(18,"mat-label"),e._uU(19),e.ALo(20,"translate"),e.qZA(),e.TgZ(21,"mat-select",7),e._UZ(22,"mat-option",8),e.YNc(23,$,3,4,"mat-option",9),e.qZA(),e.qZA(),e.TgZ(24,"mat-form-field",5),e.TgZ(25,"mat-label"),e._uU(26),e.ALo(27,"translate"),e.qZA(),e.TgZ(28,"mat-select",10),e.TgZ(29,"mat-option",8),e._uU(30),e.ALo(31,"translate"),e.qZA(),e.TgZ(32,"mat-option",8),e._uU(33),e.ALo(34,"translate"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&t&&(e.xp6(1),e.Q6J("title",e.lcZ(2,23,"DIVISION.EDIT"))("showEditBack",!0)("showIcon",!0)("selectedId",a.permService.hasPermission("DEPARTMENT-UPDATE")?null==a.selectedNode?null:a.selectedNode.id:null)("showDelete",a.permService.hasPermission("DEPARTMENT-DELETE")),e.xp6(3),e.Q6J("formGroup",a.divisionEditForm),e.xp6(1),e.Q6J("appearance",a.appearanceType),e.xp6(2),e.Oqu(e.lcZ(8,25,"DIVISION.TITLE-NAME")),e.xp6(3),e.Q6J("ngIf",!!a.divisionEditForm.controls.name.invalid&&!!a.divisionEditForm.controls.name.touched),e.xp6(1),e.Q6J("appearance",a.appearanceType),e.xp6(2),e.Oqu(e.lcZ(14,27,"DIVISION.TITLE-DISPLAYNAME")),e.xp6(3),e.Q6J("ngIf",!!a.divisionEditForm.controls.display_name.invalid&&!!a.divisionEditForm.controls.display_name.touched),e.xp6(1),e.Q6J("appearance",a.appearanceType),e.xp6(2),e.Oqu(e.lcZ(20,29,"DIVISION.PARENT")),e.xp6(2),e.Q6J("compareWith",a.compareFn),e.xp6(1),e.Q6J("value",null),e.xp6(1),e.Q6J("ngForOf",a.filteredDivisions),e.xp6(1),e.Q6J("appearance",a.appearanceType),e.xp6(2),e.Oqu(e.lcZ(27,31,"DIVISION.HASCHILDREN")),e.xp6(3),e.Q6J("value",!0),e.xp6(1),e.hij(" ",e.lcZ(31,33,"COMMON.YES"),""),e.xp6(2),e.Q6J("value",!1),e.xp6(1),e.hij(" ",e.lcZ(34,35,"COMMON.NO")," "))},directives:[L.I,R.q,F.H,r._Y,r.JL,c.xw,c.Wh,c.SQ,c.s9,r.sg,g.KE,c.yH,g.hX,r.Fj,M.Nt,r.JJ,r.u,r.Q7,o.O5,U.gD,J.ey,o.sg,g.TO],pipes:[m.X$],styles:[""]}),i})();function W(i,s){1&i&&(e.TgZ(0,"div"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"DIVISION.ERROR.TITLE-REQUIRED")," "))}function H(i,s){if(1&i&&(e.TgZ(0,"mat-error"),e.YNc(1,W,3,3,"div",4),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",!(null==t.DivisionCreateForm.controls.name.errors||!t.DivisionCreateForm.controls.name.errors.required))}}function X(i,s){1&i&&(e.TgZ(0,"div"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"DIVISION.ERROR.TITLE-DISPLAYNAME-REQUIRED")," "))}function G(i,s){if(1&i&&(e.TgZ(0,"mat-error"),e.YNc(1,X,3,3,"div",4),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",!(null==t.DivisionCreateForm.controls.display_name.errors||!t.DivisionCreateForm.controls.display_name.errors.required))}}function z(i,s){if(1&i&&(e.TgZ(0,"mat-option",7),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i){const t=s.$implicit;e.Q6J("value",t.id),e.xp6(1),e.hij(" ",e.lcZ(2,2,t.display_name)," ")}}let k=(()=>{class i{constructor(t,a,l,p,f,E,D){this.departmentService=t,this.activatedRoute=a,this.router=l,this.snackbarService=p,this.translate=f,this.permService=E,this.store=D,this.filteredDivisions=[],this.appearanceType="outline",this.store.select(T.D6).subscribe(Z=>{this.translate.use(Z.userPreference.language),this.appearanceType=Z.userPreference.appearanceType})}ngOnInit(){this.DivisionCreateForm=new r.cw({parent_id:new r.NI(""),has_sub_divisions:new r.NI(!0),name:new r.NI("",r.kI.required),display_name:new r.NI("",r.kI.required)}),this.getDivision()}getDivision(){this.departmentService.getDivision().subscribe(t=>{this.divisions=t,this.divisions.forEach(a=>{a.has_sub_divisions&&this.filteredDivisions.push(a)})})}saveDivision(){JSON.stringify(this.DivisionCreateForm.value),this.departmentService.save(this.DivisionCreateForm.value).subscribe({next:l=>{this.snackbarService.info(this.translate.instant("DIVISION.SUCCESS.CREATE")),this.router.navigate(["./../"],{relativeTo:this.activatedRoute})},error:l=>this.snackbarService.warn(this.translate.instant("DIVISION.ERROR.CREATE"))})}getPageAction(t){"save"===t.toString()&&this.saveDivision()}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(y),e.Y36(d.gz),e.Y36(d.F0),e.Y36(b.o),e.Y36(m.sK),e.Y36(x.$),e.Y36(O.yh))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-department-new"]],decls:35,vars:36,consts:[[3,"title","showBack","showIcon","showSave","isDisabled","pageAction"],["fxLayout","row wrap","fxLayoutAlign","start start","fxLayoutGap","10px grid","fxFlexFill","",1,"pt-2","pb-2",3,"formGroup"],["fxFlex.xs","100","fxFlex","50","fxFlex.lg","33.33","fxFlex.gt-lg","25",3,"appearance"],["formControlName","name","matInput","","required",""],[4,"ngIf"],["formControlName","display_name","matInput","","required",""],["formControlName","parent_id"],[3,"value"],[3,"value",4,"ngFor","ngForOf"],["formControlName","has_sub_divisions"]],template:function(t,a){1&t&&(e.TgZ(0,"app-page"),e.TgZ(1,"app-page-header",0),e.NdJ("pageAction",function(p){return a.getPageAction(p)}),e.ALo(2,"translate"),e.qZA(),e.TgZ(3,"app-page-body"),e.TgZ(4,"form",1),e.TgZ(5,"mat-form-field",2),e.TgZ(6,"mat-label"),e._uU(7),e.ALo(8,"translate"),e.qZA(),e._UZ(9,"input",3),e.YNc(10,H,2,1,"mat-error",4),e.qZA(),e.TgZ(11,"mat-form-field",2),e.TgZ(12,"mat-label"),e._uU(13),e.ALo(14,"translate"),e.qZA(),e._UZ(15,"input",5),e.YNc(16,G,2,1,"mat-error",4),e.qZA(),e.TgZ(17,"mat-form-field",2),e.TgZ(18,"mat-label"),e._uU(19),e.ALo(20,"translate"),e.qZA(),e.TgZ(21,"mat-select",6),e._UZ(22,"mat-option",7),e.YNc(23,z,3,4,"mat-option",8),e.qZA(),e.qZA(),e.TgZ(24,"mat-form-field",2),e.TgZ(25,"mat-label"),e._uU(26),e.ALo(27,"translate"),e.qZA(),e.TgZ(28,"mat-select",9),e.TgZ(29,"mat-option",7),e._uU(30),e.ALo(31,"translate"),e.qZA(),e.TgZ(32,"mat-option",7),e._uU(33),e.ALo(34,"translate"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&t&&(e.xp6(1),e.Q6J("title",e.lcZ(2,22,"DIVISION.CREATE"))("showBack",!0)("showIcon",!0)("showSave",!0)("isDisabled",!!a.DivisionCreateForm.invalid),e.xp6(3),e.Q6J("formGroup",a.DivisionCreateForm),e.xp6(1),e.Q6J("appearance",a.appearanceType),e.xp6(2),e.Oqu(e.lcZ(8,24,"DIVISION.TITLE-NAME")),e.xp6(3),e.Q6J("ngIf",!!a.DivisionCreateForm.controls.name.invalid&&!!a.DivisionCreateForm.controls.name.touched),e.xp6(1),e.Q6J("appearance",a.appearanceType),e.xp6(2),e.Oqu(e.lcZ(14,26,"DIVISION.TITLE-DISPLAYNAME")),e.xp6(3),e.Q6J("ngIf",!!a.DivisionCreateForm.controls.display_name.invalid&&!!a.DivisionCreateForm.controls.display_name.touched),e.xp6(1),e.Q6J("appearance",a.appearanceType),e.xp6(2),e.Oqu(e.lcZ(20,28,"DIVISION.PARENT")),e.xp6(3),e.Q6J("value",null),e.xp6(1),e.Q6J("ngForOf",a.filteredDivisions),e.xp6(1),e.Q6J("appearance",a.appearanceType),e.xp6(2),e.Oqu(e.lcZ(27,30,"DIVISION.HASCHILDREN")),e.xp6(3),e.Q6J("value",1),e.xp6(1),e.hij(" ",e.lcZ(31,32,"COMMON.YES"),""),e.xp6(2),e.Q6J("value",0),e.xp6(1),e.hij(" ",e.lcZ(34,34,"COMMON.NO")," "))},directives:[L.I,R.q,F.H,r._Y,r.JL,c.xw,c.Wh,c.SQ,c.s9,r.sg,g.KE,c.yH,g.hX,r.Fj,M.Nt,r.JJ,r.u,r.Q7,o.O5,U.gD,J.ey,o.sg,g.TO],pipes:[m.X$],styles:[""]}),i})();var ee=n(4833);const ae=[{canActivate:[u.a],path:"",component:(()=>{class i{constructor(t,a,l,p,f,E){this.departmentService=t,this.activatedRoute=a,this.router=l,this.translate=p,this.permService=f,this.store=E,this.data=[],this.parentProp="id",this.childProp="parent_id",this.displayLabel="display_name",this.isEditable=!1,this.hasMenuIcon=!0,this.hasMultipleSelection=!1,this.savedMenuItem={},this.dataLoaded=!1,this.isItemSelected=!1,this.showNew=!1,this.showEdit=!1,this.isItemSelectable=!0,this.isItemSelectable=f.hasPermission("DEPARTMENT-UPDATE"),this.store.select(T.D6).subscribe(D=>{this.translate.use(D.userPreference.language)})}ngOnInit(){this.departmentService.getDivision().subscribe(t=>{this.data=t,this.dataLoaded=!0},t=>this.dataLoaded=!0)}edit(){this.selectedNode&&this.permService.hasPermission("DEPARTMENT-UPDATE||DEPARTMENT-READ||DEPARTMENT-DELETE")&&(localStorage.setItem("selectedItem",JSON.stringify(this.selectedNode[0])),this.router.navigate(["./edit/"+this.selectedNode[0].id],{relativeTo:this.activatedRoute}))}getSelection(t){this.selectedNode=t.selectedNodes,this.isEditable=t.selectedNodes.length>0,localStorage.setItem("selectedItem",JSON.stringify(this.selectedNode[0]))}getSearchString(t){this.searchString=t}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(y),e.Y36(d.gz),e.Y36(d.F0),e.Y36(m.sK),e.Y36(x.$),e.Y36(O.yh))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-department"]],decls:6,vars:19,consts:[[3,"title","showNew","showIcon","showEdit","showSearch","ItemSelectedId","searchPlaceholder","emitSearchString"],["fxFlexFill","",3,"dataLoaded","parentProperty","childProperty","displayLabel","treedata","isItemSelectable","hasIcon","hasMultipleSelection","selection"]],template:function(t,a){1&t&&(e.TgZ(0,"app-page"),e.TgZ(1,"app-page-header",0),e.NdJ("emitSearchString",function(p){return a.getSearchString(p)}),e.ALo(2,"translate"),e.ALo(3,"translate"),e.qZA(),e.TgZ(4,"app-page-body"),e.TgZ(5,"app-shared-tree",1),e.NdJ("selection",function(p){return a.getSelection(p)}),e.qZA(),e.qZA(),e.qZA()),2&t&&(e.xp6(1),e.Q6J("title",e.lcZ(2,15,"DIVISION.PAGE-TITLE"))("showNew",a.permService.hasPermission("DEPARTMENT-CREATE"))("showIcon",!0)("showEdit",a.permService.hasPermission("DEPARTMENT-UPDATE"))("showSearch",!0)("ItemSelectedId",a.selectedNode&&a.selectedNode[0]?a.selectedNode[0].id:null)("searchPlaceholder",e.lcZ(3,17,"DIVISION.SEARCH-PLACEHOLDER")),e.xp6(4),e.Q6J("dataLoaded",a.dataLoaded)("parentProperty",a.parentProp)("childProperty",a.childProp)("displayLabel",a.displayLabel)("treedata",a.data)("isItemSelectable",a.isItemSelectable)("hasIcon",a.hasMenuIcon)("hasMultipleSelection",a.hasMultipleSelection))},directives:[L.I,R.q,F.H,ee.q,c.s9],pipes:[m.X$],styles:[""]}),i})(),data:{breadcrumb:"",permission_code:"DEPARTMENT-READ"}},{canActivate:[u.a],path:"new",component:k,data:{breadcrumb:"BUTTON.NEW",permission_code:"DEPARTMENT-CREATE"}},{canActivate:[u.a],path:"edit/:id",component:K,data:{breadcrumb:"BUTTON.EDIT",permission_code:"DEPARTMENT-UPDATE||DEPARTMENT-READ||DEPARTMENT-DELETE"}}];let ie=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[[d.Bz.forChild(ae)],d.Bz]}),i})();function w(i){return new S.w(i,"assets/i18n/",".json")}let ne=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[[o.ez,ie,m.aw.forChild({loader:{provide:m.Zw,useFactory:w,deps:[v.eN]},isolate:!0}),_.q,r.UX,r.u5,h.m,C._]]}),i})()},9759:(q,I,n)=>{n.d(I,{p:()=>C});var o=n(5e3),v=n(8966),r=n(7093),m=n(7322),S=n(7423),_=n(1062);let C=(()=>{class h{constructor(u){this.dialogRef=u}onNoClick(){this.dialogRef.close()}delete(){this.dialogRef.close("OK")}}return h.\u0275fac=function(u){return new(u||h)(o.Y36(v.so))},h.\u0275cmp=o.Xpm({type:h,selectors:[["app-delete-confirmation"]],decls:12,vars:9,consts:[["fxLayout","column"],["mat-dialog-content","",2,"overflow","hidden"],[1,"mat-h2"],["mat-dialog-actions","","fxLayout","row","fxLayoutAlign","space-between center","fxLayoutGap","5px",1,"mt-1"],["mat-stroked-button","","color","primary",3,"click"],["mat-stroked-button","","color","warn","cdkFocusInitial","",3,"click"]],template:function(u,A){1&u&&(o.TgZ(0,"div",0),o.TgZ(1,"div",1),o.TgZ(2,"mat-label",2),o._uU(3),o.ALo(4,"translate"),o.qZA(),o.qZA(),o.TgZ(5,"div",3),o.TgZ(6,"button",4),o.NdJ("click",function(){return A.onNoClick()}),o._uU(7),o.ALo(8,"translate"),o.qZA(),o.TgZ(9,"button",5),o.NdJ("click",function(){return A.delete()}),o._uU(10),o.ALo(11,"translate"),o.qZA(),o.qZA(),o.qZA()),2&u&&(o.xp6(3),o.Oqu(o.lcZ(4,3,"BUTTON.DELETE-CONFIRMATION")),o.xp6(4),o.Oqu(o.lcZ(8,5,"BUTTON.CANCEL")),o.xp6(3),o.Oqu(o.lcZ(11,7,"BUTTON.DELETE")))},directives:[r.xw,v.xY,m.hX,v.H8,r.Wh,r.SQ,S.lW],pipes:[_.X$],styles:[""]}),h})()}}]);