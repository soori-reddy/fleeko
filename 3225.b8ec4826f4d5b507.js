"use strict";(self.webpackChunksolidapp=self.webpackChunksolidapp||[]).push([[3225],{3225:(be,k,c)=>{c.r(k),c.d(k,{CostrateModule:()=>Wi,createTranslateLoader:()=>Ce});var m=c(9808),y=c(520),u=c(3075),L=c(1062),Q=c(40),J=c(7006),Y=c(3583),A=c(900),e=c(5e3);let _=(()=>{class s{}return s.\u0275fac=function(i){return new(i||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({imports:[[m.ez]]}),s})();var T=c(9291),M=c(7618),Oe=c(9759),O=(()=>{return(s=O||(O={}))[s.Low=0]="Low",s[s.High=1]="High",s[s.Floor=2]="Floor",s[s.Ceil=3]="Ceil",s[s.TickValue=4]="TickValue",O;var s})();class I{constructor(){this.floor=0,this.ceil=null,this.step=1,this.minRange=null,this.maxRange=null,this.pushRange=!1,this.minLimit=null,this.maxLimit=null,this.translate=null,this.combineLabels=null,this.getLegend=null,this.stepsArray=null,this.bindIndexForStepsArray=!1,this.draggableRange=!1,this.draggableRangeOnly=!1,this.showSelectionBar=!1,this.showSelectionBarEnd=!1,this.showSelectionBarFromValue=null,this.showOuterSelectionBars=!1,this.hidePointerLabels=!1,this.hideLimitLabels=!1,this.autoHideLimitLabels=!0,this.readOnly=!1,this.disabled=!1,this.mouseEventsInterval=50,this.touchEventsInterval=50,this.inputEventsInterval=100,this.outputEventsInterval=100,this.showTicks=!1,this.showTicksValues=!1,this.tickStep=null,this.tickValueStep=1,this.ticksArray=null,this.ticksTooltip=null,this.ticksValuesTooltip=null,this.vertical=!1,this.getSelectionBarColor=null,this.getTickColor=null,this.getPointerColor=null,this.keyboardSupport=!0,this.scale=1,this.enforceStep=!0,this.enforceRange=!0,this.noSwitching=!1,this.onlyBindHandles=!1,this.rightToLeft=!1,this.reversedControls=!1,this.boundPointerLabels=!0,this.logScale=!1,this.customValueToPosition=null,this.customPositionToValue=null,this.precisionLimit=12,this.selectionBarGradient=null,this.ariaLabel=null,this.ariaLabelledBy=null,this.ariaLabelHigh=null,this.ariaLabelledByHigh=null,this.handleDimension=null,this.barDimension=null,this.animate=!0}}var D=c(4971),ee=c(2329),H=c(2340);let j=(()=>{class s{constructor(i){this.http=i}getAll(){return this.http.get(`${H.N.apiEndpoint}/org/config/costrate`)}save(i){return this.http.post(`${H.N.apiEndpoint}/org/config/costrate`,i)}getCareelLevel(){return this.http.get(`${H.N.apiEndpoint}/org/config/careerlevel`)}getDivision(){return this.http.get(`${H.N.apiEndpoint}/org/config/division`)}update(i,t){return this.http.put(`${H.N.apiEndpoint}/org/config/costrate/${i}`,t)}delete(i){return this.http.delete(`${H.N.apiEndpoint}/org/config/costrate/${i}`)}}return s.\u0275fac=function(i){return new(i||s)(e.LFG(y.eN))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();var Ee=c(8966),ie=c(7071),P=c(5094),G=c(291),z=c(722),$=c(4763),S=c(7093),V=c(7322),te=c(4107),se=c(7531),ne=c(508),E="undefined"!=typeof window?window:{screen:{},navigator:{}},N=(E.matchMedia||function(){return{matches:!1}}).bind(E),ae=!1,oe=function(){};E.addEventListener&&E.addEventListener("p",oe,{get passive(){return ae=!0}}),E.removeEventListener&&E.removeEventListener("p",oe,!1);var le=ae,W="ontouchstart"in E,he=(W||"TouchEvent"in E&&N("(any-pointer: coarse)"),E.navigator.userAgent||""),F=(N("(pointer: coarse)").matches&&/iPad|Macintosh/.test(he)&&Math.min(E.screen.width||0,E.screen.height||0),(N("(pointer: coarse)").matches||!N("(pointer: fine)").matches&&W)&&/Windows.*Firefox/.test(he),N("(any-pointer: fine)").matches||N("(any-hover: hover)"),c(7579)),ue=c(1884),xe=c(9300),Ae=c(4986),ye=c(4482),ce=c(5403),He=c(8421);const me={leading:!0,trailing:!1};var Ne=c(2805);function U(s,o=Ae.z,i=me){const t=(0,Ne.H)(s,o);return function(s,{leading:o,trailing:i}=me){return(0,ye.e)((t,n)=>{let a=!1,r=null,p=null,d=!1;const f=()=>{null==p||p.unsubscribe(),p=null,i&&(C(),d&&n.complete())},g=()=>{p=null,d&&n.complete()},w=b=>p=(0,He.Xf)(s(b)).subscribe(new ce.Q(n,f,g)),C=()=>{if(a){a=!1;const b=r;r=null,n.next(b),!d&&w(b)}};t.subscribe(new ce.Q(n,b=>{a=!0,r=b,(!p||p.closed)&&(o?C():w(b))},()=>{d=!0,(!(i&&a&&p)||p.closed)&&n.complete()}))})}(()=>t,i)}var B=c(8505);class ge{constructor(){this.eventName=null,this.events=null,this.eventsSubscription=null,this.teardownCallback=null}}class l{static isNullOrUndefined(o){return null==o}static linearValueToPosition(o,i,t){return(o-i)/(t-i)}static logValueToPosition(o,i,t){return((o=Math.log(o))-(i=Math.log(i)))/((t=Math.log(t))-i)}static linearPositionToValue(o,i,t){return o*(t-i)+i}static logPositionToValue(o,i,t){return i=Math.log(i),t=Math.log(t),Math.exp(o*(t-i)+i)}static findStepIndex(o,i){const t=i.map(a=>Math.abs(o-a.value));let n=0;for(let a=0;a<i.length;a++)t[a]!==t[n]&&t[a]<t[n]&&(n=a);return n}}class fe{constructor(o){this.renderer=o}attachPassiveEventListener(o,i,t,n){if(!le)return this.attachEventListener(o,i,t,n);const a=new ge;a.eventName=i,a.events=new F.x;const r=p=>{var d;null===(d=a.events)||void 0===d||d.next(p)};return o.addEventListener(i,r,{passive:!0,capture:!1}),a.teardownCallback=()=>{o.removeEventListener(i,r,{passive:!0,capture:!1})},a.eventsSubscription=a.events.pipe(l.isNullOrUndefined(n)?(0,B.b)(()=>{}):U(Number(n),void 0,{leading:!0,trailing:!0})).subscribe(p=>{t(p)}),a}detachEventListener(o){var i,t;l.isNullOrUndefined(null==o?void 0:o.eventsSubscription)||(null===(i=null==o?void 0:o.eventsSubscription)||void 0===i||i.unsubscribe(),o&&(o.eventsSubscription=null)),l.isNullOrUndefined(null==o?void 0:o.events)||(null===(t=null==o?void 0:o.events)||void 0===t||t.complete(),o&&(o.events=null)),l.isNullOrUndefined(null==o?void 0:o.teardownCallback)||(o&&o.teardownCallback&&o.teardownCallback(),o&&(o.teardownCallback=null))}attachEventListener(o,i,t,n){const a=new ge;return a.eventName=i,a.events=new F.x,a.teardownCallback=this.renderer.listen(o,i,p=>{var d;null===(d=a.events)||void 0===d||d.next(p)}),a.eventsSubscription=a.events.pipe(l.isNullOrUndefined(n)?(0,B.b)(()=>{}):U(Number(n),void 0,{leading:!0,trailing:!0})).subscribe(p=>{t(p)}),a}}let R=(()=>{class s{constructor(i,t){this.elemRef=i,this.renderer=t,this._position=0,this._dimension=0,this._alwaysHide=!1,this._vertical=!1,this._scale=1,this.opacity=1,this.visibility="visible",this.left="",this.bottom="",this.height="",this.width="",this.eventListeners=[],this.eventListenerHelper=new fe(this.renderer)}get position(){return this._position}get dimension(){return this._dimension}get alwaysHide(){return this._alwaysHide}get vertical(){return this._vertical}get scale(){return this._scale}setAlwaysHide(i){this._alwaysHide=i,this.visibility=i?"hidden":"visible"}hide(){this.opacity=0}show(){this.alwaysHide||(this.opacity=1)}isVisible(){return!this.alwaysHide&&0!==this.opacity}setVertical(i){this._vertical=i,this._vertical?(this.left="",this.width=""):(this.bottom="",this.height="")}setScale(i){this._scale=i}setPosition(i){this._position=i,this._vertical?this.bottom=Math.round(i)+"px":this.left=Math.round(i)+"px"}calculateDimension(){const i=this.getBoundingClientRect();this._dimension=this.vertical?(i.bottom-i.top)*this.scale:(i.right-i.left)*this.scale}setDimension(i){this._dimension=i,this._vertical?this.height=Math.round(i)+"px":this.width=Math.round(i)+"px"}getBoundingClientRect(){return this.elemRef.nativeElement.getBoundingClientRect()}on(i,t,n){const a=this.eventListenerHelper.attachEventListener(this.elemRef.nativeElement,i,t,n);this.eventListeners.push(a)}onPassive(i,t,n){const a=this.eventListenerHelper.attachPassiveEventListener(this.elemRef.nativeElement,i,t,n);this.eventListeners.push(a)}off(i){let t,n;l.isNullOrUndefined(i)?(t=[],n=this.eventListeners):(t=this.eventListeners.filter(a=>a.eventName!==i),n=this.eventListeners.filter(a=>a.eventName===i));for(const a of n)this.eventListenerHelper.detachEventListener(a);this.eventListeners=t}}return s.\u0275fac=function(i){return new(i||s)(e.Y36(e.SBq),e.Y36(e.Qsj))},s.\u0275dir=e.lG2({type:s,selectors:[["","appSliderElement",""]],hostVars:12,hostBindings:function(i,t){2&i&&e.Udp("opacity",t.opacity)("visibility",t.visibility)("left",t.left)("bottom",t.bottom)("height",t.height)("width",t.width)}}),s})(),X=(()=>{class s extends R{constructor(i,t){super(i,t),this.active=!1,this.role="",this.tabindex="",this.ariaOrientation="",this.ariaLabel="",this.ariaLabelledBy="",this.ariaValueNow="",this.ariaValueText="",this.ariaValueMin="",this.ariaValueMax=""}focus(){this.elemRef.nativeElement.focus()}}return s.\u0275fac=function(i){return new(i||s)(e.Y36(e.SBq),e.Y36(e.Qsj))},s.\u0275dir=e.lG2({type:s,selectors:[["","appSliderHandle",""]],hostVars:11,hostBindings:function(i,t){2&i&&(e.uIk("role",t.role)("tabindex",t.tabindex)("aria-orientation",t.ariaOrientation)("aria-label",t.ariaLabel)("aria-labelledby",t.ariaLabelledBy)("aria-valuenow",t.ariaValueNow)("aria-valuetext",t.ariaValueText)("aria-valuemin",t.ariaValueMin)("aria-valuemax",t.ariaValueMax),e.ekj("app-slider-active",t.active))},features:[e.qOj]}),s})(),Z=(()=>{class s extends R{constructor(i,t){super(i,t),this._value=null}get value(){return this._value}setValue(i){let t=!1;!this.alwaysHide&&(l.isNullOrUndefined(this.value)||this.value.length!==i.length||this.value.length>0&&0===this.dimension)&&(t=!0),this._value=i,this.elemRef.nativeElement.innerHTML=i,t&&this.calculateDimension()}}return s.\u0275fac=function(i){return new(i||s)(e.Y36(e.SBq),e.Y36(e.Qsj))},s.\u0275dir=e.lG2({type:s,selectors:[["","appSliderLabel",""]],features:[e.qOj]}),s})();class x{static isTouchEvent(o){return void 0!==window.TouchEvent?o instanceof TouchEvent:void 0!==o.touches}static isResizeObserverAvailable(){return void 0!==window.ResizeObserver}}class v{static roundToPrecisionLimit(o,i){return+o.toPrecision(i||0)}static clampToRange(o,i,t){return Math.min(Math.max(o,i),t)}}class Ze{}var h=(()=>{return(s=h||(h={}))[s.Min=0]="Min",s[s.Max=1]="Max",h;var s})(),Me=c(8485);function ke(s,o){}function Ie(s,o){1&s&&e.YNc(0,ke,0,0,"ng-template")}const De=function(s,o,i){return{tooltip:s,placement:o,content:i}};function Pe(s,o){if(1&s&&(e.ynx(0),e.YNc(1,Ie,1,0,void 0,1),e.BQk()),2&s){const i=e.oxw();e.xp6(1),e.Q6J("ngTemplateOutlet",i.template)("ngTemplateOutletContext",e.kEZ(2,De,i.tooltip,i.placement,i.content))}}function Fe(s,o){if(1&s&&(e.ynx(0),e.TgZ(1,"div",2),e._uU(2),e.qZA(),e.BQk()),2&s){const i=e.oxw();e.xp6(1),e.uIk("title",i.tooltip)("data-tooltip-placement",i.placement),e.xp6(1),e.hij(" ",i.content," ")}}let Ue=(()=>{class s{}return s.\u0275fac=function(i){return new(i||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["app-slider-tooltip-wrapper"]],inputs:{template:"template",tooltip:"tooltip",placement:"placement",content:"content"},decls:2,vars:2,consts:[[4,"ngIf"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"app-slider-inner-tooltip"]],template:function(i,t){1&i&&(e.YNc(0,Pe,2,6,"ng-container",0),e.YNc(1,Fe,3,3,"ng-container",0)),2&i&&(e.Q6J("ngIf",t.template),e.xp6(1),e.Q6J("ngIf",!t.template))},directives:[m.O5,m.tP],styles:[".app-slider-inner-tooltip[_ngcontent-%COMP%]{height:100%}"]}),s})();const Be=["tooltipTemplate"],qe=["leftOuterSelectionBar"],Qe=["rightOuterSelectionBar"],Je=["fullBar"],Ye=["selectionBar"],je=["minHandle"],Ge=["maxHandle"],ze=["floorLabel"],$e=["ceilLabel"],We=["minHandleLabel"],Xe=["maxHandleLabel"],Ke=["combinedLabel"],ei=["ticksElement"];function ii(s,o){if(1&s&&e._UZ(0,"app-slider-tooltip-wrapper",31),2&s){const i=e.oxw().$implicit,t=e.oxw();e.Q6J("template",t.tooltipTemplate)("tooltip",i.valueTooltip)("placement",i.valueTooltipPlacement)("content",i.value)}}function ti(s,o){if(1&s&&e._UZ(0,"span",32),2&s){const i=e.oxw().$implicit;e.Q6J("innerHTML",i.legend,e.oJD)}}const si=function(s){return{"app-slider-selected":s}};function ni(s,o){if(1&s&&(e.TgZ(0,"span",27),e._UZ(1,"app-slider-tooltip-wrapper",28),e.YNc(2,ii,1,4,"app-slider-tooltip-wrapper",29),e.YNc(3,ti,1,1,"span",30),e.qZA()),2&s){const i=o.$implicit,t=e.oxw();e.Q6J("ngClass",e.VKq(7,si,i.selected))("ngStyle",i.style),e.xp6(1),e.Q6J("template",t.tooltipTemplate)("tooltip",i.tooltip)("placement",i.tooltipPlacement),e.xp6(1),e.Q6J("ngIf",null!==i.value),e.xp6(1),e.Q6J("ngIf",null!==i.legend)}}class ai{constructor(){this.selected=!1,this.style={},this.tooltip=null,this.tooltipPlacement=null,this.value=null,this.valueTooltip=null,this.valueTooltipPlacement=null,this.legend=null}}class ve{constructor(){this.active=!1,this.value=0,this.difference=0,this.position=0,this.lowLimit=0,this.highLimit=0}}class q{static compare(o,i){return!(l.isNullOrUndefined(o)&&l.isNullOrUndefined(i)||l.isNullOrUndefined(o)!==l.isNullOrUndefined(i))&&(null==o?void 0:o.value)===(null==i?void 0:i.value)&&(null==o?void 0:o.highValue)===(null==i?void 0:i.highValue)}}class we extends q{static compare(o,i){return!(l.isNullOrUndefined(o)&&l.isNullOrUndefined(i)||l.isNullOrUndefined(o)!==l.isNullOrUndefined(i))&&(null==o?void 0:o.value)===(null==i?void 0:i.value)&&(null==o?void 0:o.highValue)===(null==i?void 0:i.highValue)&&(null==o?void 0:o.forceChange)===(null==i?void 0:i.forceChange)}}const oi={provide:u.JU,useExisting:(0,e.Gpc)(()=>K),multi:!0};let K=(()=>{class s{constructor(i,t,n,a,r,p){this.renderer=i,this.elementRef=t,this.changeDetectionRef=n,this.zone=a,this.themeservice=r,this.store=p,this.class="app-slider",this.value=null,this.valueChange=new e.vpe,this.highValue=null,this.highValueChange=new e.vpe,this.options=new I,this.userChangeStart=new e.vpe,this.userChange=new e.vpe,this.userChangeEnd=new e.vpe,this.initHasRun=!1,this.inputModelChangeSubject=new F.x,this.inputModelChangeSubscription=null,this.outputModelChangeSubject=new F.x,this.outputModelChangeSubscription=null,this.viewLowValue=null,this.viewHighValue=null,this.viewOptions=new I,this.handleHalfDimension=0,this.maxHandlePosition=0,this.currentTrackingPointer=null,this.currentFocusPointer=null,this.firstKeyDown=!1,this.touchId=null,this.dragging=new ve,this.sliderElementVerticalClass=!1,this.sliderElementAnimateClass=!1,this.sliderElementDisabledAttr=null,this.barStyle={},this.minPointerStyle={},this.maxPointerStyle={},this.fullBarTransparentClass=!1,this.selectionBarDraggableClass=!1,this.ticksUnderValuesClass=!1,this.isDarkTheme=!1,this.intermediateTicks=!1,this.ticks=[],this.onTouchedCallback=null,this.onChangeCallback=null,this.eventListenerHelper=new fe(this.renderer),this.store.select(D.D6).subscribe(d=>{const f=d.userPreference.theme,g=null==f?void 0:f.split("-");this.isDarkTheme=!(!g||"dark"!==g[1])})}set manualRefresh(i){this.unsubscribeManualRefresh(),this.manualRefreshSubscription=i.subscribe(()=>{setTimeout(()=>this.calculateViewDimensionsAndDetectChanges())})}set triggerFocus(i){this.unsubscribeTriggerFocus(),this.triggerFocusSubscription=i.subscribe(t=>{this.focusPointer(t)})}get range(){return!l.isNullOrUndefined(this.value)&&!l.isNullOrUndefined(this.highValue)}get showTicks(){var i,t;return!!(null===(i=this.viewOptions)||void 0===i?void 0:i.showTicks)&&(null===(t=this.viewOptions)||void 0===t?void 0:t.showTicks)}ngOnInit(){this.viewOptions=new I,Object.assign(this.viewOptions,this.options),this.updateDisabledState(),this.updateVerticalState()}ngAfterViewInit(){this.applyOptions(),this.subscribeInputModelChangeSubject(this.viewOptions.inputEventsInterval),this.subscribeOutputModelChangeSubject(this.viewOptions.outputEventsInterval),this.renormaliseModelValues(),this.viewLowValue=this.modelValueToViewValue(this.value),this.viewHighValue=this.range?this.modelValueToViewValue(this.highValue):null,this.updateVerticalState(),this.manageElementsStyle(),this.updateDisabledState(),this.calculateViewDimensions(),this.addAccessibility(),this.updateCeilLabel(),this.updateFloorLabel(),this.initHandles(),this.manageEventsBindings(),this.subscribeResizeObserver(),this.initHasRun=!0,this.changeDetectionRef.detectChanges()}ngOnChanges(i){l.isNullOrUndefined(i.options)||this.onChangeOptions(),(!l.isNullOrUndefined(i.value)||!l.isNullOrUndefined(i.highValue))&&this.inputModelChangeSubject.next({value:this.value,highValue:this.highValue,forceChange:!1,internalChange:!1})}ngOnDestroy(){this.unbindEvents(),this.unsubscribeResizeObserver(),this.unsubscribeInputModelChangeSubject(),this.unsubscribeOutputModelChangeSubject(),this.unsubscribeManualRefresh(),this.unsubscribeTriggerFocus()}writeValue(i){i instanceof Array?(this.value=i[0],this.highValue=i[1]):this.value=i,this.inputModelChangeSubject.next({value:this.value,highValue:this.highValue,forceChange:!1,internalChange:!1})}registerOnChange(i){this.onChangeCallback=i}registerOnTouched(i){this.onTouchedCallback=i}setDisabledState(i){this.viewOptions.disabled=i,this.updateDisabledState()}onResize(i){this.calculateViewDimensionsAndDetectChanges()}subscribeInputModelChangeSubject(i){this.inputModelChangeSubscription=this.inputModelChangeSubject.pipe((0,ue.x)(we.compare),(0,xe.h)(t=>!t.forceChange&&!t.internalChange),l.isNullOrUndefined(i)?(0,B.b)(()=>{}):U(Number(i),void 0,{leading:!0,trailing:!0})).subscribe(t=>this.applyInputModelChange(t))}subscribeOutputModelChangeSubject(i){this.outputModelChangeSubscription=this.outputModelChangeSubject.pipe((0,ue.x)(we.compare),l.isNullOrUndefined(i)?(0,B.b)(()=>{}):U(Number(i),void 0,{leading:!0,trailing:!0})).subscribe(t=>this.publishOutputModelChange(t))}subscribeResizeObserver(){x.isResizeObserverAvailable()&&(this.resizeObserver=new ResizeObserver(()=>this.calculateViewDimensionsAndDetectChanges()),this.resizeObserver.observe(this.elementRef.nativeElement))}unsubscribeResizeObserver(){x.isResizeObserverAvailable()&&null!==this.resizeObserver&&(this.resizeObserver.disconnect(),this.resizeObserver=null)}unsubscribeOnMove(){this.eventListenerHelper&&(this.eventListenerHelper.detachEventListener(this.onMoveEventListener),this.onMoveEventListener=null)}unsubscribeOnEnd(){this.eventListenerHelper&&(this.eventListenerHelper.detachEventListener(this.onEndEventListener),this.onEndEventListener=null)}unsubscribeInputModelChangeSubject(){this.inputModelChangeSubscription&&(this.inputModelChangeSubscription.unsubscribe(),this.inputModelChangeSubscription=null)}unsubscribeOutputModelChangeSubject(){this.outputModelChangeSubscription&&(this.outputModelChangeSubscription.unsubscribe(),this.outputModelChangeSubscription=null)}unsubscribeManualRefresh(){l.isNullOrUndefined(this.manualRefreshSubscription)||(this.manualRefreshSubscription.unsubscribe(),this.manualRefreshSubscription=null)}unsubscribeTriggerFocus(){l.isNullOrUndefined(this.triggerFocusSubscription)||(this.triggerFocusSubscription.unsubscribe(),this.triggerFocusSubscription=null)}getPointerElement(i){return i===h.Min?this.minHandleElement:i===h.Max?this.maxHandleElement:null}getCurrentTrackingValue(){return this.currentTrackingPointer===h.Min?this.viewLowValue:this.currentTrackingPointer===h.Max?this.viewHighValue:null}modelValueToViewValue(i){return l.isNullOrUndefined(i)?NaN:l.isNullOrUndefined(this.viewOptions.stepsArray)||this.viewOptions.bindIndexForStepsArray?+i:l.findStepIndex(+i,this.viewOptions.stepsArray)}viewValueToModelValue(i){return l.isNullOrUndefined(this.viewOptions.stepsArray)||this.viewOptions.bindIndexForStepsArray?i:this.getStepValue(i)}getStepValue(i){var t;const n=null===(t=this.viewOptions)||void 0===t?void 0:t.stepsArray[i];return l.isNullOrUndefined(n)?NaN:n.value}applyViewChange(){this.value=this.viewValueToModelValue(this.viewLowValue),this.range&&(this.highValue=this.viewValueToModelValue(this.viewHighValue)),this.outputModelChangeSubject.next({value:this.value,highValue:this.highValue,userEventInitiated:!0,forceChange:!1}),this.inputModelChangeSubject.next({value:this.value,highValue:this.highValue,forceChange:!1,internalChange:!0})}applyInputModelChange(i){const t=this.normaliseModelValues(i),n=!q.compare(i,t);n&&(this.value=t.value,this.highValue=t.highValue),this.viewLowValue=this.modelValueToViewValue(t.value),this.viewHighValue=this.range?this.modelValueToViewValue(t.highValue):null,this.updateLowHandle(this.valueToPosition(this.viewLowValue)),this.range&&this.updateHighHandle(this.valueToPosition(this.viewHighValue)),this.updateSelectionBar(),this.updateTicksScale(),this.updateAriaAttributes(),this.range&&this.updateCombinedLabel(),this.outputModelChangeSubject.next({value:t.value,highValue:t.highValue,forceChange:n,userEventInitiated:!1})}publishOutputModelChange(i){const t=()=>{var n;this.valueChange.emit(i.value),this.range&&(null===(n=this.highValueChange)||void 0===n||n.emit(null==i?void 0:i.highValue)),l.isNullOrUndefined(this.onChangeCallback)||this.onChangeCallback(this.range?[i.value,i.highValue]:i.value),l.isNullOrUndefined(this.onTouchedCallback)||this.onTouchedCallback(this.range?[i.value,i.highValue]:i.value)};i.userEventInitiated?(t(),this.userChange.emit(this.getChangeContext())):setTimeout(()=>{t()})}normaliseModelValues(i){const t=new q;if(t.value=i.value,t.highValue=i.highValue,this.viewOptions.enforceStep&&(t.value=this.roundStep(t.value),this.range&&(t.highValue=this.roundStep(t.highValue))),!l.isNullOrUndefined(this.viewOptions.stepsArray)||!this.viewOptions.enforceRange)return t;if(t.value=v.clampToRange(t.value,this.viewOptions.floor,this.viewOptions.ceil),this.range&&(t.highValue=v.clampToRange(t.highValue,this.viewOptions.floor,this.viewOptions.ceil)),this.range&&i.value>i.highValue)if(this.viewOptions.noSwitching)t.value=t.highValue;else{const n=i.value;t.value=i.highValue,t.highValue=n}return t}renormaliseModelValues(){const i={value:this.value,highValue:this.highValue},t=this.normaliseModelValues(i);q.compare(t,i)||(this.value=t.value,this.highValue=t.highValue,this.outputModelChangeSubject.next({value:this.value,highValue:this.highValue,forceChange:!0,userEventInitiated:!1}))}onChangeOptions(){if(!this.initHasRun)return;const i=this.viewOptions.inputEventsInterval,t=this.viewOptions.outputEventsInterval;this.applyOptions(),i!==this.viewOptions.inputEventsInterval&&(this.unsubscribeInputModelChangeSubject(),this.subscribeInputModelChangeSubject(this.viewOptions.inputEventsInterval)),t!==this.viewOptions.outputEventsInterval&&(this.unsubscribeInputModelChangeSubject(),this.subscribeInputModelChangeSubject(this.viewOptions.outputEventsInterval)),this.renormaliseModelValues(),this.viewLowValue=this.modelValueToViewValue(this.value),this.viewHighValue=this.range?this.modelValueToViewValue(this.highValue):null,this.resetSlider()}applyOptions(){if(this.viewOptions=new I,Object.assign(this.viewOptions,this.options),this.viewOptions.draggableRange=this.range&&this.viewOptions.draggableRange,this.viewOptions.draggableRangeOnly=this.range&&this.viewOptions.draggableRangeOnly,this.viewOptions.draggableRangeOnly&&(this.viewOptions.draggableRange=!0),this.viewOptions.showTicks=this.viewOptions.showTicks||this.viewOptions.showTicksValues||!l.isNullOrUndefined(this.viewOptions.ticksArray),this.viewOptions.showTicks&&(!l.isNullOrUndefined(this.viewOptions.tickStep)||!l.isNullOrUndefined(this.viewOptions.ticksArray))&&(this.intermediateTicks=!0),this.viewOptions.showSelectionBar=this.viewOptions.showSelectionBar||this.viewOptions.showSelectionBarEnd||!l.isNullOrUndefined(this.viewOptions.showSelectionBarFromValue),l.isNullOrUndefined(this.viewOptions.stepsArray)?this.applyFloorCeilOptions():this.applyStepsArrayOptions(),l.isNullOrUndefined(this.viewOptions.combineLabels)&&(this.viewOptions.combineLabels=(i,t)=>i+" - "+t),this.viewOptions.logScale&&0===this.viewOptions.floor)throw Error("Can't use floor=0 with logarithmic scale")}applyStepsArrayOptions(){this.viewOptions.floor=0,this.viewOptions.ceil=this.viewOptions.stepsArray.length-1,this.viewOptions.step=1,l.isNullOrUndefined(this.viewOptions.translate)&&(this.viewOptions.translate=i=>String(this.viewOptions.bindIndexForStepsArray?this.getStepValue(i):i)),this.viewOptions.getLegend=i=>this.viewOptions.stepsArray[i].legend}applyFloorCeilOptions(){if(l.isNullOrUndefined(this.viewOptions.step)?this.viewOptions.step=1:(this.viewOptions.step=+this.viewOptions.step,this.viewOptions.step<=0&&(this.viewOptions.step=1)),l.isNullOrUndefined(this.viewOptions.ceil)||l.isNullOrUndefined(this.viewOptions.floor))throw Error("floor and ceil options must be supplied");this.viewOptions.ceil=+this.viewOptions.ceil,this.viewOptions.floor=+this.viewOptions.floor,l.isNullOrUndefined(this.viewOptions.translate)&&(this.viewOptions.translate=i=>String(i))}resetSlider(){this.manageElementsStyle(),this.addAccessibility(),this.updateCeilLabel(),this.updateFloorLabel(),this.unbindEvents(),this.manageEventsBindings(),this.updateDisabledState(),this.calculateViewDimensions(),this.refocusPointerIfNeeded()}focusPointer(i){i!==h.Min&&i!==h.Max&&(i=h.Min),i===h.Min?this.minHandleElement.focus():this.range&&i===h.Max&&this.maxHandleElement.focus()}refocusPointerIfNeeded(){l.isNullOrUndefined(this.currentFocusPointer)||(this.onPointerFocus(this.currentFocusPointer),this.getPointerElement(this.currentFocusPointer).focus())}manageElementsStyle(){this.updateScale(),this.floorLabelElement.setAlwaysHide(this.viewOptions.showTicksValues||this.viewOptions.hideLimitLabels),this.ceilLabelElement.setAlwaysHide(this.viewOptions.showTicksValues||this.viewOptions.hideLimitLabels);const i=this.viewOptions.showTicksValues&&!this.intermediateTicks;this.minHandleLabelElement.setAlwaysHide(i||this.viewOptions.hidePointerLabels),this.maxHandleLabelElement.setAlwaysHide(i||!this.range||this.viewOptions.hidePointerLabels),this.combinedLabelElement.setAlwaysHide(i||!this.range||this.viewOptions.hidePointerLabels),this.selectionBarElement.setAlwaysHide(!this.range&&!this.viewOptions.showSelectionBar),this.leftOuterSelectionBarElement.setAlwaysHide(!this.range||!this.viewOptions.showOuterSelectionBars),this.rightOuterSelectionBarElement.setAlwaysHide(!this.range||!this.viewOptions.showOuterSelectionBars),this.fullBarTransparentClass=this.range&&this.viewOptions.showOuterSelectionBars,this.selectionBarDraggableClass=this.viewOptions.draggableRange&&!this.viewOptions.onlyBindHandles,this.ticksUnderValuesClass=this.intermediateTicks&&this.options.showTicksValues,this.sliderElementVerticalClass!==this.viewOptions.vertical&&(this.updateVerticalState(),setTimeout(()=>{this.resetSlider()})),this.sliderElementAnimateClass!==this.viewOptions.animate&&setTimeout(()=>{this.sliderElementAnimateClass=this.viewOptions.animate})}manageEventsBindings(){this.viewOptions.disabled||this.viewOptions.readOnly?this.unbindEvents():this.bindEvents()}updateDisabledState(){this.sliderElementDisabledAttr=this.viewOptions.disabled?"disabled":null}updateVerticalState(){this.sliderElementVerticalClass=this.viewOptions.vertical;for(const i of this.getAllSliderElements())l.isNullOrUndefined(i)||i.setVertical(this.viewOptions.vertical)}updateScale(){for(const i of this.getAllSliderElements())i.setScale(this.viewOptions.scale)}getAllSliderElements(){return[this.leftOuterSelectionBarElement,this.rightOuterSelectionBarElement,this.fullBarElement,this.selectionBarElement,this.minHandleElement,this.maxHandleElement,this.floorLabelElement,this.ceilLabelElement,this.minHandleLabelElement,this.maxHandleLabelElement,this.combinedLabelElement,this.ticksElement]}initHandles(){this.updateLowHandle(this.valueToPosition(this.viewLowValue)),this.range&&this.updateHighHandle(this.valueToPosition(this.viewHighValue)),this.updateSelectionBar(),this.range&&this.updateCombinedLabel(),this.updateTicksScale()}addAccessibility(){this.updateAriaAttributes(),this.minHandleElement.role="slider",this.minHandleElement.tabindex=!this.viewOptions.keyboardSupport||this.viewOptions.readOnly||this.viewOptions.disabled?"":"0",this.viewOptions.vertical&&(this.minHandleElement.ariaOrientation="vertical"),l.isNullOrUndefined(this.viewOptions.ariaLabel)?l.isNullOrUndefined(this.viewOptions.ariaLabelledBy)||(this.minHandleElement.ariaLabelledBy=this.viewOptions.ariaLabelledBy):this.minHandleElement.ariaLabel=this.viewOptions.ariaLabel,this.range&&(this.maxHandleElement.role="slider",this.maxHandleElement.tabindex=!this.viewOptions.keyboardSupport||this.viewOptions.readOnly||this.viewOptions.disabled?"":"0",this.maxHandleElement.ariaOrientation=this.viewOptions.vertical?"vertical":"horizontal",l.isNullOrUndefined(this.viewOptions.ariaLabelHigh)?l.isNullOrUndefined(this.viewOptions.ariaLabelledByHigh)||(this.maxHandleElement.ariaLabelledBy=this.viewOptions.ariaLabelledByHigh):this.maxHandleElement.ariaLabel=this.viewOptions.ariaLabelHigh)}updateAriaAttributes(){this.minHandleElement.ariaValueNow=(+this.value).toString(),this.minHandleElement.ariaValueText=this.viewOptions.translate(+this.value,O.Low),this.minHandleElement.ariaValueMin=this.viewOptions.floor.toString(),this.minHandleElement.ariaValueMax=this.viewOptions.ceil.toString(),this.range&&(this.maxHandleElement.ariaValueNow=(+this.highValue).toString(),this.maxHandleElement.ariaValueText=this.viewOptions.translate(+this.highValue,O.High),this.maxHandleElement.ariaValueMin=this.viewOptions.floor.toString(),this.maxHandleElement.ariaValueMax=this.viewOptions.ceil.toString())}calculateViewDimensions(){l.isNullOrUndefined(this.viewOptions.handleDimension)?this.minHandleElement.calculateDimension():this.minHandleElement.setDimension(this.viewOptions.handleDimension);const i=this.minHandleElement.dimension;this.handleHalfDimension=i/2,l.isNullOrUndefined(this.viewOptions.barDimension)?this.fullBarElement.calculateDimension():this.fullBarElement.setDimension(this.viewOptions.barDimension),this.maxHandlePosition=this.fullBarElement.dimension-i,this.initHasRun&&(this.updateFloorLabel(),this.updateCeilLabel(),this.initHandles())}calculateViewDimensionsAndDetectChanges(){this.calculateViewDimensions(),this.changeDetectionRef.detectChanges()}updateTicksScale(){if(!this.viewOptions.showTicks)return;const i=l.isNullOrUndefined(this.viewOptions.ticksArray)?this.getTicksArray():this.viewOptions.ticksArray,t=this.viewOptions.vertical?"translateY":"translateX";this.viewOptions.rightToLeft&&i.reverse();const n=i.map(a=>{let r=this.valueToPosition(a);this.viewOptions.vertical&&(r=this.maxHandlePosition-r);const p=t+"("+Math.round(r)+"px)",d=new ai;if(d.selected=this.isTickSelected(a),d.style={"-webkit-transform":p,"-moz-transform":p,"-o-transform":p,"-ms-transform":p,transform:p},d.selected&&!l.isNullOrUndefined(this.viewOptions.getSelectionBarColor)&&(d.style["background-color"]=this.getSelectionBarColor()),!d.selected&&!l.isNullOrUndefined(this.viewOptions.getTickColor)&&(d.style["background-color"]=this.getTickColor(a)),l.isNullOrUndefined(this.viewOptions.ticksTooltip)||(d.tooltip=this.viewOptions.ticksTooltip(a),d.tooltipPlacement=this.viewOptions.vertical?"right":"top"),this.viewOptions.showTicksValues&&a%this.viewOptions.tickValueStep==0&&(d.value=this.getDisplayValue(a,O.TickValue),l.isNullOrUndefined(this.viewOptions.ticksValuesTooltip)||(d.valueTooltip=this.viewOptions.ticksValuesTooltip(a),d.valueTooltipPlacement=this.viewOptions.vertical?"right":"top")),!l.isNullOrUndefined(this.viewOptions.getLegend)){const f=this.viewOptions.getLegend(a);l.isNullOrUndefined(f)||(d.legend=f)}return d});if(l.isNullOrUndefined(this.ticks)||this.ticks.length!==n.length)this.ticks=n;else for(let a=0;a<n.length;++a)Object.assign(this.ticks[a],n[a]);this.changeDetectionRef.detectChanges()}getTicksArray(){const i=l.isNullOrUndefined(this.viewOptions.tickStep)?this.viewOptions.step:this.viewOptions.tickStep,t=[];for(let n=this.viewOptions.floor;n<=this.viewOptions.ceil;n+=i)t.push(n);return t}isTickSelected(i){if(!this.range)if(l.isNullOrUndefined(this.viewOptions.showSelectionBarFromValue)){if(this.viewOptions.showSelectionBarEnd){if(i>=this.viewLowValue)return!0}else if(this.viewOptions.showSelectionBar&&i<=this.viewLowValue)return!0}else{const t=this.viewOptions.showSelectionBarFromValue;if(this.viewLowValue>t&&i>=t&&i<=this.viewLowValue)return!0;if(this.viewLowValue<t&&i<=t&&i>=this.viewLowValue)return!0}return!!(this.range&&i>=this.viewLowValue&&i<=this.viewHighValue)}updateFloorLabel(){this.floorLabelElement.alwaysHide||(this.floorLabelElement.setValue(this.getDisplayValue(this.viewOptions.floor,O.Floor)),this.floorLabelElement.calculateDimension(),this.floorLabelElement.setPosition(this.viewOptions.rightToLeft?this.fullBarElement.dimension-this.floorLabelElement.dimension:0))}updateCeilLabel(){this.ceilLabelElement.alwaysHide||(this.ceilLabelElement.setValue(this.getDisplayValue(this.viewOptions.ceil,O.Ceil)),this.ceilLabelElement.calculateDimension(),this.ceilLabelElement.setPosition(this.viewOptions.rightToLeft?0:this.fullBarElement.dimension-this.ceilLabelElement.dimension))}updateHandles(i,t){i===h.Min?this.updateLowHandle(t):i===h.Max&&this.updateHighHandle(t),this.updateSelectionBar(),this.updateTicksScale(),this.range&&this.updateCombinedLabel()}getHandleLabelPos(i,t){const n=i===h.Min?this.minHandleLabelElement.dimension:this.maxHandleLabelElement.dimension,a=t-n/2+this.handleHalfDimension,r=this.fullBarElement.dimension-n;return this.viewOptions.boundPointerLabels?this.viewOptions.rightToLeft&&i===h.Min||!this.viewOptions.rightToLeft&&i===h.Max?Math.min(a,r):Math.min(Math.max(a,0),r):a}updateLowHandle(i){this.minHandleElement.setPosition(i),this.minHandleLabelElement.setValue(this.getDisplayValue(this.viewLowValue,O.Low)),this.minHandleLabelElement.setPosition(this.getHandleLabelPos(h.Min,i)),l.isNullOrUndefined(this.viewOptions.getPointerColor)||(this.minPointerStyle={backgroundColor:this.getPointerColor(h.Min)}),this.viewOptions.autoHideLimitLabels&&this.updateFloorAndCeilLabelsVisibility()}updateHighHandle(i){this.maxHandleElement.setPosition(i),this.maxHandleLabelElement.setValue(this.getDisplayValue(this.viewHighValue,O.High)),this.maxHandleLabelElement.setPosition(this.getHandleLabelPos(h.Max,i)),l.isNullOrUndefined(this.viewOptions.getPointerColor)||(this.maxPointerStyle={backgroundColor:this.getPointerColor(h.Max)}),this.viewOptions.autoHideLimitLabels&&this.updateFloorAndCeilLabelsVisibility()}updateFloorAndCeilLabelsVisibility(){if(this.viewOptions.hidePointerLabels)return;let i=!1,t=!1;const n=this.isLabelBelowFloorLabel(this.minHandleLabelElement),a=this.isLabelAboveCeilLabel(this.minHandleLabelElement),r=this.isLabelAboveCeilLabel(this.maxHandleLabelElement),p=this.isLabelBelowFloorLabel(this.combinedLabelElement),d=this.isLabelAboveCeilLabel(this.combinedLabelElement);if(n?(i=!0,this.floorLabelElement.hide()):(i=!1,this.floorLabelElement.show()),a?(t=!0,this.ceilLabelElement.hide()):(t=!1,this.ceilLabelElement.show()),this.range){const f=this.combinedLabelElement.isVisible()?d:r,g=this.combinedLabelElement.isVisible()?p:n;f?this.ceilLabelElement.hide():t||this.ceilLabelElement.show(),g?this.floorLabelElement.hide():i||this.floorLabelElement.show()}}isLabelBelowFloorLabel(i){const t=i.position,a=this.floorLabelElement.position;return this.viewOptions.rightToLeft?t+i.dimension>=a-2:t<=a+this.floorLabelElement.dimension+2}isLabelAboveCeilLabel(i){const t=i.position,a=this.ceilLabelElement.position;return this.viewOptions.rightToLeft?t<=a+this.ceilLabelElement.dimension+2:t+i.dimension>=a-2}updateSelectionBar(){let i=0,t=0;const n=this.viewOptions.rightToLeft?!this.viewOptions.showSelectionBarEnd:this.viewOptions.showSelectionBarEnd,a=this.viewOptions.rightToLeft?this.maxHandleElement.position+this.handleHalfDimension:this.minHandleElement.position+this.handleHalfDimension;if(this.range)t=Math.abs(this.maxHandleElement.position-this.minHandleElement.position),i=a;else if(l.isNullOrUndefined(this.viewOptions.showSelectionBarFromValue))n?(t=Math.ceil(Math.abs(this.maxHandlePosition-this.minHandleElement.position)+this.handleHalfDimension),i=Math.floor(this.minHandleElement.position+this.handleHalfDimension)):(t=this.minHandleElement.position+this.handleHalfDimension,i=0);else{const r=this.viewOptions.showSelectionBarFromValue,p=this.valueToPosition(r);(this.viewOptions.rightToLeft?this.viewLowValue<=r:this.viewLowValue>r)?(t=this.minHandleElement.position-p,i=p+this.handleHalfDimension):(t=p-this.minHandleElement.position,i=this.minHandleElement.position+this.handleHalfDimension)}if(this.selectionBarElement.setDimension(t),this.selectionBarElement.setPosition(i),this.range&&this.viewOptions.showOuterSelectionBars&&(this.viewOptions.rightToLeft?(this.rightOuterSelectionBarElement.setDimension(i),this.rightOuterSelectionBarElement.setPosition(0),this.fullBarElement.calculateDimension(),this.leftOuterSelectionBarElement.setDimension(this.fullBarElement.dimension-(i+t)),this.leftOuterSelectionBarElement.setPosition(i+t)):(this.leftOuterSelectionBarElement.setDimension(i),this.leftOuterSelectionBarElement.setPosition(0),this.fullBarElement.calculateDimension(),this.rightOuterSelectionBarElement.setDimension(this.fullBarElement.dimension-(i+t)),this.rightOuterSelectionBarElement.setPosition(i+t))),l.isNullOrUndefined(this.viewOptions.getSelectionBarColor)){if(!l.isNullOrUndefined(this.viewOptions.selectionBarGradient)){const r=l.isNullOrUndefined(this.viewOptions.showSelectionBarFromValue)?0:this.valueToPosition(this.viewOptions.showSelectionBarFromValue),p=r-i>0&&!n||r-i<=0&&n;this.barStyle={backgroundImage:"linear-gradient(to "+(this.viewOptions.vertical?p?"bottom":"top":p?"left":"right")+", "+this.viewOptions.selectionBarGradient.from+" 0%,"+this.viewOptions.selectionBarGradient.to+" 100%)"},this.viewOptions.vertical?(this.barStyle.backgroundPosition="center "+(r+t+i+(p?-this.handleHalfDimension:0))+"px",this.barStyle.backgroundSize="100% "+(this.fullBarElement.dimension-this.handleHalfDimension)+"px"):(this.barStyle.backgroundPosition=r-i+(p?this.handleHalfDimension:0)+"px center",this.barStyle.backgroundSize=this.fullBarElement.dimension-this.handleHalfDimension+"px 100%")}}else{const r=this.getSelectionBarColor();this.barStyle={backgroundColor:r}}}getSelectionBarColor(){return this.range?this.viewOptions.getSelectionBarColor(this.value,this.highValue):this.viewOptions.getSelectionBarColor(this.value)}getPointerColor(i){return this.viewOptions.getPointerColor(i===h.Max?this.highValue:this.value,i)}getTickColor(i){return this.viewOptions.getTickColor(i)}updateCombinedLabel(){let i=null;if(i=this.viewOptions.rightToLeft?this.minHandleLabelElement.position-this.minHandleLabelElement.dimension-10<=this.maxHandleLabelElement.position:this.minHandleLabelElement.position+this.minHandleLabelElement.dimension+10>=this.maxHandleLabelElement.position,i){const t=this.getDisplayValue(this.viewLowValue,O.Low),n=this.getDisplayValue(this.viewHighValue,O.High),a=this.viewOptions.rightToLeft?this.viewOptions.combineLabels(n,t):this.viewOptions.combineLabels(t,n);this.combinedLabelElement.setValue(a);const r=this.viewOptions.boundPointerLabels?Math.min(Math.max(this.selectionBarElement.position+this.selectionBarElement.dimension/2-this.combinedLabelElement.dimension/2,0),this.fullBarElement.dimension-this.combinedLabelElement.dimension):this.selectionBarElement.position+this.selectionBarElement.dimension/2-this.combinedLabelElement.dimension/2;this.combinedLabelElement.setPosition(r),this.minHandleLabelElement.hide(),this.maxHandleLabelElement.hide(),this.combinedLabelElement.show()}else this.updateHighHandle(this.valueToPosition(this.viewHighValue)),this.updateLowHandle(this.valueToPosition(this.viewLowValue)),this.maxHandleLabelElement.show(),this.minHandleLabelElement.show(),this.combinedLabelElement.hide();this.viewOptions.autoHideLimitLabels&&this.updateFloorAndCeilLabelsVisibility()}getDisplayValue(i,t){return!l.isNullOrUndefined(this.viewOptions.stepsArray)&&!this.viewOptions.bindIndexForStepsArray&&(i=this.getStepValue(i)),this.viewOptions.translate(i,t)}roundStep(i,t){const n=l.isNullOrUndefined(t)?this.viewOptions.step:t;let a=v.roundToPrecisionLimit((i-this.viewOptions.floor)/n,this.viewOptions.precisionLimit);return a=Math.round(a)*n,v.roundToPrecisionLimit(this.viewOptions.floor+a,this.viewOptions.precisionLimit)}valueToPosition(i){let t=l.linearValueToPosition;l.isNullOrUndefined(this.viewOptions.customValueToPosition)?this.viewOptions.logScale&&(t=l.logValueToPosition):t=this.viewOptions.customValueToPosition;let n=t(i=v.clampToRange(i,this.viewOptions.floor,this.viewOptions.ceil),this.viewOptions.floor,this.viewOptions.ceil);return l.isNullOrUndefined(n)&&(n=0),this.viewOptions.rightToLeft&&(n=1-n),n*this.maxHandlePosition}positionToValue(i){let t=i/this.maxHandlePosition;this.viewOptions.rightToLeft&&(t=1-t);let n=l.linearPositionToValue;l.isNullOrUndefined(this.viewOptions.customPositionToValue)?this.viewOptions.logScale&&(n=l.logPositionToValue):n=this.viewOptions.customPositionToValue;const a=n(t,this.viewOptions.floor,this.viewOptions.ceil);return l.isNullOrUndefined(a)?0:a}getEventXY(i,t){if(i instanceof MouseEvent)return this.viewOptions.vertical?i.clientY:i.clientX;let n=0;const a=i.touches;if(!l.isNullOrUndefined(t))for(let r=0;r<a.length;r++)if(a[r].identifier===t){n=r;break}return this.viewOptions.vertical?a[n].clientY:a[n].clientX}getEventPosition(i,t){const n=this.elementRef.nativeElement.getBoundingClientRect(),a=this.viewOptions.vertical?n.bottom:n.left;let r=0;return r=this.viewOptions.vertical?-this.getEventXY(i,t)+a:this.getEventXY(i,t)-a,r*this.viewOptions.scale-this.handleHalfDimension}getNearestHandle(i){if(!this.range)return h.Min;const t=this.getEventPosition(i),n=Math.abs(t-this.minHandleElement.position),a=Math.abs(t-this.maxHandleElement.position);return n<a?h.Min:n>a?h.Max:this.viewOptions.rightToLeft?t>this.minHandleElement.position?h.Min:h.Max:t<this.minHandleElement.position?h.Min:h.Max}bindEvents(){const i=this.viewOptions.draggableRange;this.viewOptions.onlyBindHandles||this.selectionBarElement.on("mousedown",t=>this.onBarStart(null,i,t,!0,!0,!0)),this.viewOptions.draggableRangeOnly?(this.minHandleElement.on("mousedown",t=>this.onBarStart(h.Min,i,t,!0,!0)),this.maxHandleElement.on("mousedown",t=>this.onBarStart(h.Max,i,t,!0,!0))):(this.minHandleElement.on("mousedown",t=>this.onStart(h.Min,t,!0,!0)),this.range&&this.maxHandleElement.on("mousedown",t=>this.onStart(h.Max,t,!0,!0)),this.viewOptions.onlyBindHandles||(this.fullBarElement.on("mousedown",t=>this.onStart(null,t,!0,!0,!0)),this.ticksElement.on("mousedown",t=>this.onStart(null,t,!0,!0,!0,!0)))),this.viewOptions.onlyBindHandles||this.selectionBarElement.onPassive("touchstart",t=>this.onBarStart(null,i,t,!0,!0,!0)),this.viewOptions.draggableRangeOnly?(this.minHandleElement.onPassive("touchstart",t=>this.onBarStart(h.Min,i,t,!0,!0)),this.maxHandleElement.onPassive("touchstart",t=>this.onBarStart(h.Max,i,t,!0,!0))):(this.minHandleElement.onPassive("touchstart",t=>this.onStart(h.Min,t,!0,!0)),this.range&&this.maxHandleElement.onPassive("touchstart",t=>this.onStart(h.Max,t,!0,!0)),this.viewOptions.onlyBindHandles||(this.fullBarElement.onPassive("touchstart",t=>this.onStart(null,t,!0,!0,!0)),this.ticksElement.onPassive("touchstart",t=>this.onStart(null,t,!1,!1,!0,!0)))),this.viewOptions.keyboardSupport&&(this.minHandleElement.on("focus",()=>this.onPointerFocus(h.Min)),this.range&&this.maxHandleElement.on("focus",()=>this.onPointerFocus(h.Max)))}unbindEvents(){this.unsubscribeOnMove(),this.unsubscribeOnEnd();for(const i of this.getAllSliderElements())i.off()}onBarStart(i,t,n,a,r,p,d){t?this.onDragStart(i,n,a,r):this.onStart(i,n,a,r,p,d)}onStart(i,t,n,a,r,p){t.stopPropagation(),(!x.isTouchEvent(t)||!le)&&t.preventDefault(),this.calculateViewDimensions(),l.isNullOrUndefined(i)&&(i=this.getNearestHandle(t)),this.currentTrackingPointer=i;const d=this.getPointerElement(i);if(d.active=!0,this.viewOptions.keyboardSupport&&d.focus(),n){this.unsubscribeOnMove();const f=g=>this.dragging.active?this.onDragMove(g):this.onMove(g);this.onMoveEventListener=x.isTouchEvent(t)?this.eventListenerHelper.attachPassiveEventListener(document,"touchmove",f,this.viewOptions.touchEventsInterval):this.eventListenerHelper.attachEventListener(document,"mousemove",f,this.viewOptions.mouseEventsInterval)}if(a){this.unsubscribeOnEnd();const f=g=>this.onEnd(g);this.onEndEventListener=x.isTouchEvent(t)?this.eventListenerHelper.attachPassiveEventListener(document,"touchend",f):this.eventListenerHelper.attachEventListener(document,"mouseup",f)}this.userChangeStart.emit(this.getChangeContext()),x.isTouchEvent(t)&&!l.isNullOrUndefined(t.changedTouches)&&l.isNullOrUndefined(this.touchId)&&(this.touchId=t.changedTouches[0].identifier),r&&this.onMove(t,!0),p&&this.onEnd(t)}onMove(i,t){let n=null;if(x.isTouchEvent(i)){const f=i.changedTouches;for(let g=0;g<f.length;g++)if(f[g].identifier===this.touchId){n=f[g];break}if(l.isNullOrUndefined(n))return}const a=l.isNullOrUndefined(n)?this.getEventPosition(i):this.getEventPosition(i,n.identifier);let r;a<=0?r=this.viewOptions.rightToLeft?this.viewOptions.ceil:this.viewOptions.floor:a>=this.maxHandlePosition?r=this.viewOptions.rightToLeft?this.viewOptions.floor:this.viewOptions.ceil:(r=this.positionToValue(a),r=t&&!l.isNullOrUndefined(this.viewOptions.tickStep)?this.roundStep(r,this.viewOptions.tickStep):this.roundStep(r)),this.positionTrackingHandle(r)}onEnd(i){x.isTouchEvent(i)&&i.changedTouches[0].identifier!==this.touchId||(this.touchId=null,this.viewOptions.keyboardSupport||(this.minHandleElement.active=!1,this.maxHandleElement.active=!1,this.currentTrackingPointer=null),this.dragging.active=!1,this.unsubscribeOnMove(),this.unsubscribeOnEnd(),this.userChangeEnd.emit(this.getChangeContext()))}onPointerFocus(i){const t=this.getPointerElement(i);t.on("blur",()=>this.onPointerBlur(t)),t.on("keydown",n=>this.onKeyboardEvent(n)),t.on("keyup",()=>this.onKeyUp()),t.active=!0,this.currentTrackingPointer=i,this.currentFocusPointer=i,this.firstKeyDown=!0}onKeyUp(){this.firstKeyDown=!0,this.userChangeEnd.emit(this.getChangeContext())}onPointerBlur(i){i.off("blur"),i.off("keydown"),i.off("keyup"),i.active=!1,l.isNullOrUndefined(this.touchId)&&(this.currentTrackingPointer=null,this.currentFocusPointer=null)}getKeyActions(i){const t=this.viewOptions.ceil-this.viewOptions.floor;let n=i+this.viewOptions.step,a=i-this.viewOptions.step,r=i+t/10,p=i-t/10;this.viewOptions.reversedControls&&(n=i-this.viewOptions.step,a=i+this.viewOptions.step,r=i-t/10,p=i+t/10);const d={UP:n,DOWN:a,LEFT:a,RIGHT:n,PAGEUP:r,PAGEDOWN:p,HOME:this.viewOptions.reversedControls?this.viewOptions.ceil:this.viewOptions.floor,END:this.viewOptions.reversedControls?this.viewOptions.floor:this.viewOptions.ceil};return this.viewOptions.rightToLeft&&(d.LEFT=n,d.RIGHT=a,this.viewOptions.vertical&&(d.UP=a,d.DOWN=n)),d}onKeyboardEvent(i){const t=this.getCurrentTrackingValue(),n=l.isNullOrUndefined(i.keyCode)?i.which:i.keyCode,d=this.getKeyActions(t)[{38:"UP",40:"DOWN",37:"LEFT",39:"RIGHT",33:"PAGEUP",34:"PAGEDOWN",36:"HOME",35:"END"}[n]];if(l.isNullOrUndefined(d)||l.isNullOrUndefined(this.currentTrackingPointer))return;i.preventDefault(),this.firstKeyDown&&(this.firstKeyDown=!1,this.userChangeStart.emit(this.getChangeContext()));const f=v.clampToRange(d,this.viewOptions.floor,this.viewOptions.ceil),g=this.roundStep(f);if(this.viewOptions.draggableRangeOnly){const w=this.viewHighValue-this.viewLowValue;let C,b;this.currentTrackingPointer===h.Min?(C=g,b=g+w,b>this.viewOptions.ceil&&(b=this.viewOptions.ceil,C=b-w)):this.currentTrackingPointer===h.Max&&(b=g,C=g-w,C<this.viewOptions.floor&&(C=this.viewOptions.floor,b=C+w)),this.positionTrackingBar(C,b)}else this.positionTrackingHandle(g)}onDragStart(i,t,n,a){const r=this.getEventPosition(t);this.dragging=new ve,this.dragging.active=!0,this.dragging.value=this.positionToValue(r),this.dragging.difference=this.viewHighValue-this.viewLowValue,this.dragging.lowLimit=this.viewOptions.rightToLeft?this.minHandleElement.position-r:r-this.minHandleElement.position,this.dragging.highLimit=this.viewOptions.rightToLeft?r-this.maxHandleElement.position:this.maxHandleElement.position-r,this.onStart(i,t,n,a)}getMinValue(i,t,n){var a;const r=null===(a=this.viewOptions)||void 0===a?void 0:a.rightToLeft;let p=null;return p=t&&this.viewOptions?n?r?this.viewOptions.floor:this.viewOptions.ceil?this.viewOptions.ceil-this.dragging.difference:0:r?this.viewOptions.ceil?this.viewOptions.ceil-this.dragging.difference:0:this.viewOptions.floor:this.positionToValue(r?i+this.dragging.lowLimit:i-this.dragging.lowLimit),this.roundStep(Number(p))}getMaxValue(i,t,n){const a=this.viewOptions.rightToLeft;let r=null;return r=t?n?a?this.viewOptions.floor+this.dragging.difference:this.viewOptions.ceil:a?this.viewOptions.ceil:this.viewOptions.floor+this.dragging.difference:a?this.positionToValue(i+this.dragging.lowLimit)+this.dragging.difference:this.positionToValue(i-this.dragging.lowLimit)+this.dragging.difference,this.roundStep(Number(r))}onDragMove(i){const t=this.getEventPosition(i);let n,a,r,p;this.viewOptions.rightToLeft?(n=this.dragging.lowLimit,a=this.dragging.highLimit,r=this.maxHandleElement,p=this.minHandleElement):(n=this.dragging.highLimit,a=this.dragging.lowLimit,r=this.minHandleElement,p=this.maxHandleElement);const f=t>=this.maxHandlePosition-n;let g,w;if(t<=a){if(0===r.position)return;g=this.getMinValue(t,!0,!1),w=this.getMaxValue(t,!0,!1)}else if(f){if(p.position===this.maxHandlePosition)return;w=this.getMaxValue(t,!0,!0),g=this.getMinValue(t,!0,!0)}else g=this.getMinValue(t,!1,!1),w=this.getMaxValue(t,!1,!1);this.positionTrackingBar(g,w)}positionTrackingBar(i,t){!l.isNullOrUndefined(this.viewOptions.minLimit)&&i<this.viewOptions.minLimit&&(t=v.roundToPrecisionLimit((i=this.viewOptions.minLimit)+this.dragging.difference,this.viewOptions.precisionLimit)),!l.isNullOrUndefined(this.viewOptions.maxLimit)&&t>this.viewOptions.maxLimit&&(i=v.roundToPrecisionLimit((t=this.viewOptions.maxLimit)-this.dragging.difference,this.viewOptions.precisionLimit)),this.viewLowValue=i,this.viewHighValue=t,this.applyViewChange(),this.updateHandles(h.Min,this.valueToPosition(i)),this.updateHandles(h.Max,this.valueToPosition(t))}positionTrackingHandle(i){i=this.applyMinMaxLimit(i),this.range&&(this.viewOptions.pushRange?i=this.applyPushRange(i):(this.viewOptions.noSwitching&&(this.currentTrackingPointer===h.Min&&i>this.viewHighValue?i=this.applyMinMaxRange(this.viewHighValue):this.currentTrackingPointer===h.Max&&i<this.viewLowValue&&(i=this.applyMinMaxRange(this.viewLowValue))),i=this.applyMinMaxRange(i),this.currentTrackingPointer===h.Min&&i>this.viewHighValue?(this.viewLowValue=this.viewHighValue,this.applyViewChange(),this.updateHandles(h.Min,this.maxHandleElement.position),this.updateAriaAttributes(),this.currentTrackingPointer=h.Max,this.minHandleElement.active=!1,this.maxHandleElement.active=!0,this.viewOptions.keyboardSupport&&this.maxHandleElement.focus()):this.currentTrackingPointer===h.Max&&i<this.viewLowValue&&(this.viewHighValue=this.viewLowValue,this.applyViewChange(),this.updateHandles(h.Max,this.minHandleElement.position),this.updateAriaAttributes(),this.currentTrackingPointer=h.Min,this.maxHandleElement.active=!1,this.minHandleElement.active=!0,this.viewOptions.keyboardSupport&&this.minHandleElement.focus()))),this.getCurrentTrackingValue()!==i&&(this.currentTrackingPointer===h.Min?(this.viewLowValue=i,this.applyViewChange()):this.currentTrackingPointer===h.Max&&(this.viewHighValue=i,this.applyViewChange()),this.updateHandles(this.currentTrackingPointer,this.valueToPosition(i)),this.updateAriaAttributes())}applyMinMaxLimit(i){return!l.isNullOrUndefined(this.viewOptions.minLimit)&&i<this.viewOptions.minLimit?this.viewOptions.minLimit:!l.isNullOrUndefined(this.viewOptions.maxLimit)&&i>this.viewOptions.maxLimit?this.viewOptions.maxLimit:i}applyMinMaxRange(i){const n=Math.abs(i-(this.currentTrackingPointer===h.Min?this.viewHighValue:this.viewLowValue));if(!l.isNullOrUndefined(this.viewOptions.minRange)&&n<this.viewOptions.minRange){if(this.currentTrackingPointer===h.Min)return v.roundToPrecisionLimit(this.viewHighValue-this.viewOptions.minRange,this.viewOptions.precisionLimit);if(this.currentTrackingPointer===h.Max)return v.roundToPrecisionLimit(this.viewLowValue+this.viewOptions.minRange,this.viewOptions.precisionLimit)}if(!l.isNullOrUndefined(this.viewOptions.maxRange)&&n>this.viewOptions.maxRange){if(this.currentTrackingPointer===h.Min)return v.roundToPrecisionLimit(this.viewHighValue-this.viewOptions.maxRange,this.viewOptions.precisionLimit);if(this.currentTrackingPointer===h.Max)return v.roundToPrecisionLimit(this.viewLowValue+this.viewOptions.maxRange,this.viewOptions.precisionLimit)}return i}applyPushRange(i){const t=this.currentTrackingPointer===h.Min?this.viewHighValue-i:i-this.viewLowValue,n=l.isNullOrUndefined(this.viewOptions.minRange)?this.viewOptions.step:this.viewOptions.minRange,a=this.viewOptions.maxRange;return n&&t&&t<n?(this.currentTrackingPointer===h.Min?(this.viewHighValue=v.roundToPrecisionLimit(Math.min(i+n,Number(this.viewOptions.ceil)),this.viewOptions.precisionLimit),i=v.roundToPrecisionLimit(this.viewHighValue-n,this.viewOptions.precisionLimit),this.applyViewChange(),this.updateHandles(h.Max,this.valueToPosition(this.viewHighValue))):this.currentTrackingPointer===h.Max&&(this.viewLowValue=v.roundToPrecisionLimit(Math.max(i-n,Number(this.viewOptions.floor)),this.viewOptions.precisionLimit),i=v.roundToPrecisionLimit(this.viewLowValue+n,this.viewOptions.precisionLimit),this.applyViewChange(),this.updateHandles(h.Min,this.valueToPosition(this.viewLowValue))),this.updateAriaAttributes()):!l.isNullOrUndefined(a)&&t>a&&(this.currentTrackingPointer===h.Min?(this.viewHighValue=v.roundToPrecisionLimit(i+a,this.viewOptions.precisionLimit),this.applyViewChange(),this.updateHandles(h.Max,this.valueToPosition(this.viewHighValue))):this.currentTrackingPointer===h.Max&&(this.viewLowValue=v.roundToPrecisionLimit(i-a,this.viewOptions.precisionLimit),this.applyViewChange(),this.updateHandles(h.Min,this.valueToPosition(this.viewLowValue))),this.updateAriaAttributes()),i}getChangeContext(){const i=new Ze;return i.pointerType=this.currentTrackingPointer,i.value=this.value?+this.value:0,this.range&&(i.highValue=this.highValue?+this.highValue:0),i}}return s.\u0275fac=function(i){return new(i||s)(e.Y36(e.Qsj),e.Y36(e.SBq),e.Y36(e.sBO),e.Y36(e.R0b),e.Y36(Me.m),e.Y36(P.yh))},s.\u0275cmp=e.Xpm({type:s,selectors:[["app-slider"]],contentQueries:function(i,t,n){if(1&i&&e.Suo(n,Be,5),2&i){let a;e.iGM(a=e.CRH())&&(t.tooltipTemplate=a.first)}},viewQuery:function(i,t){if(1&i&&(e.Gf(qe,5,R),e.Gf(Qe,5,R),e.Gf(Je,5,R),e.Gf(Ye,5,R),e.Gf(je,5,X),e.Gf(Ge,5,X),e.Gf(ze,5,Z),e.Gf($e,5,Z),e.Gf(We,5,Z),e.Gf(Xe,5,Z),e.Gf(Ke,5,Z),e.Gf(ei,5,R)),2&i){let n;e.iGM(n=e.CRH())&&(t.leftOuterSelectionBarElement=n.first),e.iGM(n=e.CRH())&&(t.rightOuterSelectionBarElement=n.first),e.iGM(n=e.CRH())&&(t.fullBarElement=n.first),e.iGM(n=e.CRH())&&(t.selectionBarElement=n.first),e.iGM(n=e.CRH())&&(t.minHandleElement=n.first),e.iGM(n=e.CRH())&&(t.maxHandleElement=n.first),e.iGM(n=e.CRH())&&(t.floorLabelElement=n.first),e.iGM(n=e.CRH())&&(t.ceilLabelElement=n.first),e.iGM(n=e.CRH())&&(t.minHandleLabelElement=n.first),e.iGM(n=e.CRH())&&(t.maxHandleLabelElement=n.first),e.iGM(n=e.CRH())&&(t.combinedLabelElement=n.first),e.iGM(n=e.CRH())&&(t.ticksElement=n.first)}},hostVars:7,hostBindings:function(i,t){1&i&&e.NdJ("resize",function(a){return t.onResize(a)},!1,e.Jf7),2&i&&(e.uIk("disabled",t.sliderElementDisabledAttr),e.Tol(t.class),e.ekj("vertical",t.sliderElementVerticalClass)("animate",t.sliderElementAnimateClass))},inputs:{value:"value",highValue:"highValue",options:"options",manualRefresh:"manualRefresh",triggerFocus:"triggerFocus"},outputs:{valueChange:"valueChange",highValueChange:"highValueChange",userChangeStart:"userChangeStart",userChange:"userChange",userChangeEnd:"userChangeEnd"},features:[e._Bn([oi]),e.TTD],decls:29,vars:18,consts:[["appSliderElement","",1,"app-slider-span","app-slider-bar-wrapper","app-slider-left-out-selection"],["leftOuterSelectionBar",""],[1,"app-slider-span","app-slider-bar"],["appSliderElement","",1,"app-slider-span","app-slider-bar-wrapper","app-slider-right-out-selection"],["rightOuterSelectionBar",""],["appSliderElement","",1,"app-slider-span","app-slider-bar-wrapper","app-slider-full-bar"],["fullBar",""],["appSliderElement","",1,"app-slider-span","app-slider-bar-wrapper","app-slider-selection-bar"],["selectionBar",""],[1,"app-slider-span","app-slider-bar","app-slider-selection",3,"ngStyle"],["appSliderHandle","",1,"app-slider-span","app-slider-pointer","app-slider-pointer-min",3,"ngStyle"],["minHandle",""],["appSliderHandle","",1,"app-slider-span","app-slider-pointer","app-slider-pointer-max",3,"ngStyle"],["maxHandle",""],["appSliderLabel","",1,"app-slider-span","app-slider-limit","app-slider-floor",3,"ngClass"],["floorLabel",""],["appSliderLabel","",1,"app-slider-span","app-slider-limit","app-slider-ceil",3,"ngClass"],["ceilLabel",""],["appSliderLabel","",1,"app-slider-span","app-slider-model-value",3,"ngClass"],["minHandleLabel",""],["appSliderLabel","",1,"app-slider-span","app-slider-model-high",3,"ngClass"],["maxHandleLabel",""],["appSliderLabel","",1,"app-slider-span","app-slider-combined",3,"ngClass"],["combinedLabel",""],["appSliderElement","",1,"app-slider-ticks",3,"hidden"],["ticksElement",""],["class","app-slider-tick",3,"ngClass","ngStyle",4,"ngFor","ngForOf"],[1,"app-slider-tick",3,"ngClass","ngStyle"],[3,"template","tooltip","placement"],["class","app-slider-span app-slider-tick-value",3,"template","tooltip","placement","content",4,"ngIf"],["class","app-slider-span app-slider-tick-legend",3,"innerHTML",4,"ngIf"],[1,"app-slider-span","app-slider-tick-value",3,"template","tooltip","placement","content"],[1,"app-slider-span","app-slider-tick-legend",3,"innerHTML"]],template:function(i,t){1&i&&(e.TgZ(0,"span",0,1),e._UZ(2,"span",2),e.qZA(),e.TgZ(3,"span",3,4),e._UZ(5,"span",2),e.qZA(),e.TgZ(6,"span",5,6),e._UZ(8,"span",2),e.qZA(),e.TgZ(9,"span",7,8),e._UZ(11,"span",9),e.qZA(),e._UZ(12,"span",10,11),e._UZ(14,"span",12,13),e._UZ(16,"span",14,15),e._UZ(18,"span",16,17),e._UZ(20,"span",18,19),e._UZ(22,"span",20,21),e._UZ(24,"span",22,23),e.TgZ(26,"span",24,25),e.YNc(28,ni,4,9,"span",26),e.qZA()),2&i&&(e.xp6(6),e.ekj("app-slider-transparent",t.fullBarTransparentClass),e.xp6(3),e.ekj("app-slider-draggable",t.selectionBarDraggableClass),e.xp6(2),e.Q6J("ngStyle",t.barStyle),e.xp6(1),e.Q6J("ngStyle",t.minPointerStyle),e.xp6(2),e.Udp("display",t.range?"inherit":"none"),e.Q6J("ngStyle",t.maxPointerStyle),e.xp6(2),e.Q6J("ngClass",t.isDarkTheme?"app-slider-bubble-dark-theme":"app-slider-bubble"),e.xp6(2),e.Q6J("ngClass",t.isDarkTheme?"app-slider-bubble-dark-theme":"app-slider-bubble"),e.xp6(2),e.Q6J("ngClass",t.isDarkTheme?"app-slider-bubble-dark-theme":"app-slider-bubble"),e.xp6(2),e.Q6J("ngClass",t.isDarkTheme?"app-slider-bubble-dark-theme":"app-slider-bubble"),e.xp6(2),e.Q6J("ngClass",t.isDarkTheme?"app-slider-bubble-dark-theme":"app-slider-bubble"),e.xp6(2),e.ekj("app-slider-ticks-values-under",t.ticksUnderValuesClass),e.Q6J("hidden",!t.showTicks),e.xp6(2),e.Q6J("ngForOf",t.ticks))},directives:[R,m.PC,X,Z,m.mk,m.sg,Ue,m.O5],styles:['.app-slider{display:inline-block;position:relative;height:4px;width:100%;margin:35px 0 15px;vertical-align:middle;-webkit-user-select:none;user-select:none;touch-action:pan-y}  .app-slider.with-legend{margin-bottom:40px}  .app-slider[disabled]{cursor:not-allowed}  .app-slider[disabled] .app-slider-pointer{cursor:not-allowed;background-color:#d8e0f3}  .app-slider[disabled] .app-slider-draggable{cursor:not-allowed}  .app-slider[disabled] .app-slider-selection{background:#8b91a2}  .app-slider[disabled] .app-slider-tick{cursor:not-allowed}  .app-slider[disabled] .app-slider-tick.app-slider-selected{background:#8b91a2}  .app-slider .app-slider-span{white-space:nowrap;position:absolute;display:inline-block}  .app-slider .app-slider-base{width:100%;height:100%;padding:0}  .app-slider .app-slider-bar-wrapper{left:0;box-sizing:border-box;margin-top:-16px;padding-top:16px;width:100%;height:32px;z-index:1}  .app-slider .app-slider-draggable{cursor:move}  .app-slider .app-slider-bar{left:0;width:100%;height:4px;z-index:1;background:#d8e0f3;border-radius:2px}  .app-slider .app-slider-bar-wrapper.app-slider-transparent .app-slider-bar{background:transparent}  .app-slider .app-slider-bar-wrapper.app-slider-left-out-selection .app-slider-bar{background:#df002d}  .app-slider .app-slider-bar-wrapper.app-slider-right-out-selection .app-slider-bar{background:#03a688}  .app-slider .app-slider-selection{z-index:2;background:#0db9f0;border-radius:2px}  .app-slider .app-slider-pointer{cursor:pointer;width:32px;height:32px;top:-14px;background-color:#0db9f0;z-index:3;border-radius:16px}  .app-slider .app-slider-pointer:after{content:"";width:8px;height:8px;position:absolute;top:12px;left:12px;border-radius:4px;background:#fff}  .app-slider .app-slider-pointer:hover:after{background-color:#fff}  .app-slider .app-slider-pointer.app-slider-active{z-index:4}  .app-slider .app-slider-pointer.app-slider-active:after{background-color:#451aff}  .app-slider .app-slider-bubble{cursor:default;bottom:16px;padding:1px 3px;color:#55637d;font-size:16px}  .app-slider .app-slider-bubble.app-slider-limit{color:#55637d}  .app-slider .app-slider-ticks{box-sizing:border-box;width:100%;height:0;position:absolute;left:0;top:-3px;margin:0;z-index:1;list-style:none}  .app-slider .app-slider-ticks-values-under .app-slider-tick-value{top:auto;bottom:-36px}  .app-slider .app-slider-tick{text-align:center;cursor:pointer;width:10px;height:10px;background:#d8e0f3;border-radius:50%;position:absolute;top:0;left:0;margin-left:11px}  .app-slider .app-slider-tick.app-slider-selected{background:#0db9f0}  .app-slider .app-slider-tick-value{position:absolute;top:-34px;transform:translate(-50%)}  .app-slider .app-slider-tick-legend{position:absolute;top:24px;transform:translate(-50%);max-width:50px;white-space:normal}  .app-slider.vertical{position:relative;width:4px;height:100%;margin:0 20px;padding:0;vertical-align:baseline;touch-action:pan-x}  .app-slider.vertical .app-slider-base{width:100%;height:100%;padding:0}  .app-slider.vertical .app-slider-bar-wrapper{top:auto;left:0;margin:0 0 0 -16px;padding:0 0 0 16px;height:100%;width:32px}  .app-slider.vertical .app-slider-bar{bottom:0;left:auto;width:4px;height:100%}  .app-slider.vertical .app-slider-pointer{left:-14px!important;top:auto;bottom:0}  .app-slider.vertical .app-slider-bubble{left:16px!important;bottom:0}  .app-slider.vertical .app-slider-bubble-dark-theme{left:16px!important;bottom:0}  .app-slider.vertical .app-slider-ticks{height:100%;width:0;left:-3px;top:0;z-index:1}  .app-slider.vertical .app-slider-tick{vertical-align:middle;margin-left:auto;margin-top:11px}  .app-slider.vertical .app-slider-tick-value{left:24px;top:auto;transform:translateY(-28%)}  .app-slider.vertical .app-slider-tick-legend{top:auto;right:24px;transform:translateY(-28%);max-width:none;white-space:nowrap}  .app-slider.vertical .app-slider-ticks-values-under .app-slider-tick-value{bottom:auto;left:auto;right:24px}  .app-slider *{transition:none}  .app-slider.animate .app-slider-bar-wrapper{transition:all linear .3s}  .app-slider.animate .app-slider-selection{transition:background-color linear .3s}  .app-slider.animate .app-slider-pointer{transition:all linear .3s}  .app-slider.animate .app-slider-bubble{transition:all linear .3s}  .app-slider.animate .app-slider-bubble.app-slider-limit{transition:opacity linear .3s}  .app-slider.animate .app-slider-bubble.app-slider-combined{transition:opacity linear .3s}  .app-slider.animate .app-slider-bubble-dark-theme{transition:all linear .3s}  .app-slider.animate .app-slider-bubble-dark-theme.app-slider-limit{transition:opacity linear .3s}  .app-slider.animate .app-slider-bubble-dark-theme.app-slider-combined{transition:opacity linear .3s}  .app-slider.animate .app-slider-tick{transition:background-color linear .3s}']}),s})();function li(s,o){if(1&s&&(e.TgZ(0,"mat-option",13),e._uU(1),e.qZA()),2&s){const i=o.$implicit;e.Q6J("value",i),e.xp6(1),e.hij(" ",i.name," ")}}function ri(s,o){1&s&&(e.TgZ(0,"div"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&s&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"COSTRATE.DIVISION.ERROR.REQUIRED")," "))}function hi(s,o){if(1&s&&(e.TgZ(0,"mat-error"),e.YNc(1,ri,3,3,"div",6),e.qZA()),2&s){const i=e.oxw();e.xp6(1),e.Q6J("ngIf",!(null==i.CostRateEditForm.controls.division.errors||!i.CostRateEditForm.controls.division.errors.required))}}function pi(s,o){if(1&s&&(e.TgZ(0,"mat-option",13),e._uU(1),e.qZA()),2&s){const i=o.$implicit;e.Q6J("value",i),e.xp6(1),e.hij(" ",i.name," ")}}function di(s,o){1&s&&(e.TgZ(0,"div"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&s&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"COSTRATE.SUBDIVISION.ERROR.REQUIRED")," "))}function ui(s,o){if(1&s&&(e.TgZ(0,"mat-error"),e.YNc(1,di,3,3,"div",6),e.qZA()),2&s){const i=e.oxw();e.xp6(1),e.Q6J("ngIf",!(null==i.CostRateEditForm.controls.sub_division.errors||!i.CostRateEditForm.controls.sub_division.errors.required))}}function ci(s,o){if(1&s&&(e.TgZ(0,"mat-option",13),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&s){const i=o.$implicit;e.Q6J("value",i),e.xp6(1),e.hij(" ",e.lcZ(2,2,i.display_name)," ")}}function mi(s,o){1&s&&(e.TgZ(0,"div"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&s&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"COSTRATE.CAREERLEVEL.ERROR.REQUIRED")," "))}function gi(s,o){if(1&s&&(e.TgZ(0,"mat-error"),e.YNc(1,mi,3,3,"div",6),e.qZA()),2&s){const i=e.oxw();e.xp6(1),e.Q6J("ngIf",!(null==i.CostRateEditForm.controls.career_level.errors||!i.CostRateEditForm.controls.career_level.errors.required))}}function fi(s,o){if(1&s&&(e.TgZ(0,"mat-option",13),e._uU(1),e.qZA()),2&s){const i=o.$implicit;e.Q6J("value",i),e.xp6(1),e.hij(" ",i," ")}}function vi(s,o){1&s&&(e.TgZ(0,"div"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&s&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"COSTRATE.BILLCODE.ERROR.REQUIRED")," "))}function wi(s,o){if(1&s&&(e.TgZ(0,"mat-error"),e.YNc(1,vi,3,3,"div",6),e.qZA()),2&s){const i=e.oxw();e.xp6(1),e.Q6J("ngIf",!(null==i.CostRateEditForm.controls.billcode.errors||!i.CostRateEditForm.controls.billcode.errors.required))}}function Ci(s,o){if(1&s){const i=e.EpF();e.TgZ(0,"div"),e.TgZ(1,"p"),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.TgZ(4,"app-slider",14),e.NdJ("valueChange",function(n){return e.CHM(i),e.oxw().minValue=n})("highValueChange",function(n){return e.CHM(i),e.oxw().onSalaryChange(n)})("highValueChange",function(n){return e.CHM(i),e.oxw().maxValue=n}),e.qZA(),e.qZA()}if(2&s){const i=e.oxw();e.xp6(2),e.Oqu(e.lcZ(3,4,"COSTRATE.SALARY")),e.xp6(2),e.Q6J("value",i.minValue)("highValue",i.maxValue)("options",i.options)}}function bi(s,o){1&s&&(e.TgZ(0,"div"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&s&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"COSTRATE.CAPACITY.ERROR.REQUIRED")," "))}function Oi(s,o){1&s&&(e.TgZ(0,"div"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&s&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"COSTRATE.CAPACITY.ERROR.MIN")," "))}function Ei(s,o){1&s&&(e.TgZ(0,"div"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&s&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"COSTRATE.CAPACITY.ERROR.MAX")," "))}function Ti(s,o){if(1&s&&(e.TgZ(0,"mat-error"),e.YNc(1,bi,3,3,"div",6),e.YNc(2,Oi,3,3,"div",6),e.YNc(3,Ei,3,3,"div",6),e.qZA()),2&s){const i=e.oxw();e.xp6(1),e.Q6J("ngIf",!(null==i.CostRateEditForm.controls.load.errors||!i.CostRateEditForm.controls.load.errors.required)),e.xp6(1),e.Q6J("ngIf",!(null==i.CostRateEditForm.controls.load.errors||!i.CostRateEditForm.controls.load.errors.min)),e.xp6(1),e.Q6J("ngIf",!(null==i.CostRateEditForm.controls.load.errors||!i.CostRateEditForm.controls.load.errors.max))}}function Li(s,o){1&s&&(e.TgZ(0,"div"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&s&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"COSTRATE.COSTRATE.ERROR.REQUIRED")," "))}function Si(s,o){if(1&s&&(e.TgZ(0,"mat-error"),e.YNc(1,Li,3,3,"div",6),e.qZA()),2&s){const i=e.oxw();e.xp6(1),e.Q6J("ngIf",!(null==i.CostRateEditForm.controls.rate.errors||!i.CostRateEditForm.controls.rate.errors.required))}}let _i=(()=>{class s{constructor(i,t,n,a,r,p,d,f,g){this.permissionService=i,this.costRateService=t,this.activatedRoute=n,this.dialog=a,this.router=r,this.snackbarService=p,this.translate=d,this.cdRef=f,this.store=g,this.model={},this.minValue=75e3,this.maxValue=1e5,this.options={},this.filteredDivisions=[],this.totalDays=365,this.weekendDays=104,this.holidays=10,this.leaves=30,this.workingHours=8,this.appearanceType="fill",this.dataLoaded=!1,this.store.select(D.D6).subscribe(w=>{this.translate.use(w.userPreference.language),this.appearanceType=w.userPreference.appearanceType,this.direction=w.userPreference.direction,this.dataLoaded=!0,this.options={floor:0,ceil:3e5,showTicks:!0,tickStep:25e3,rightToLeft:"rtl"===w.userPreference.direction,translate:(C,b)=>{switch(b){case O.Low:return this.options.rightToLeft?C+"$"+this.translate.instant("COSTRATE.SALARY-MIN"):this.translate.instant("COSTRATE.SALARY-MIN")+"$"+C;case O.High:return this.options.rightToLeft?C+"$"+this.translate.instant("COSTRATE.SALARY-MAX"):this.translate.instant("COSTRATE.SALARY-MAX")+"$"+C;default:return this.options.rightToLeft?C+"$":"$"+C}}}})}ngOnInit(){this.selectedCostRate=JSON.parse(localStorage.getItem("selectedItem")),this.selectedCostRateId=this.selectedCostRate.id,this.CostRateEditForm=new u.cw({division:new u.NI("",u.kI.required),sub_division:new u.NI(""),career_level:new u.NI("",u.kI.required),billcode:new u.NI("",u.kI.required),salary:new u.NI(""),load:new u.NI(100,[u.kI.required,u.kI.min(1),u.kI.max(100)]),rate:new u.NI("",u.kI.required)}),this.getCareerLevels(),this.getDivision(),this.billCodes=this.selectedCostRate.career_level.addldata.billcodes,this.CostRateEditForm.patchValue({division:this.selectedCostRate.division,sub_division:this.selectedCostRate.sub_division,career_level:this.selectedCostRate.career_level,billcode:this.selectedCostRate.billcode,salary:[this.selectedCostRate.minimum_salary,this.selectedCostRate.maximum_salary],load:this.selectedCostRate.load,rate:this.selectedCostRate.rate}),this.CostRateEditForm.disable()}getCareerLevels(){this.costRateService.getCareelLevel().subscribe(i=>{this.careerlevels=i})}getDivision(){this.costRateService.getDivision().subscribe(i=>{this.divisions=i,this.divisions.forEach(t=>{t.has_sub_divisions&&this.filteredDivisions.push(t)}),this.subDivisions=this.divisions.filter(t=>t.parent_id===this.selectedCostRate.division.id)})}onCareerLevelChange(i){this.billCodes=i.value.addldata.billcodes}onDivsionChange(i){const t=i.value;this.subDivisions=this.divisions.filter(n=>n.parent_id===t.id)}updateCostRate(){const i=this.CostRateEditForm.get("salary").value;this.CostRateEditForm.removeControl("salary");const t=this.CostRateEditForm.value;t.minimum_salary=i[0],t.maximum_salary=i[1],this.costRateService.update(this.selectedCostRate.id,t).subscribe({next:n=>{this.snackbarService.info(this.translate.instant("COSTRATE.SUCCESS.UPDATE")),this.router.navigate(["./../../"],{relativeTo:this.activatedRoute})},error:n=>this.snackbarService.warn(this.translate.instant("COSTRATE.ERROR.UPDATE"))})}deleteCostRate(){this.dialog.open(Oe.p,{disableClose:!0,direction:this.direction}).afterClosed().subscribe(t=>{"OK"===t&&this.costRateService.delete(this.selectedCostRate.id).subscribe({next:n=>{this.snackbarService.info(this.translate.instant("COSTRATE.SUCCESS.DELETE")),this.router.navigate(["./../../"],{relativeTo:this.activatedRoute})},error:n=>this.snackbarService.warn(this.translate.instant("COSTRATE.ERROR.DELETE"))})})}compareFn(i,t){return i&&t?i.id===t.id:i===t}onCapacityChange(i){const t=i.target.value,a=this.CostRateEditForm.get("salary").value[1];if(t>0&&t<=100){const r=a/((this.totalDays-(this.weekendDays+this.holidays+this.leaves))*this.workingHours*t/100);this.CostRateEditForm.get("rate").setValue(r.toFixed(2))}else this.CostRateEditForm.get("rate").setValue("")}onSalaryChange(i){const t=this.CostRateEditForm.get("load").value,n=i/((this.totalDays-(this.weekendDays+this.holidays+this.leaves))*this.workingHours*t/100);this.CostRateEditForm.get("rate").setValue(n.toFixed(2))}compareBillCodes(i,t){return i.toString()===t.toString()}getPageAction(i){const t=i.toString();"delete"===t?this.deleteCostRate():"update"===t?this.updateCostRate():"modify"===t&&(this.CostRateEditForm.enable(),this.options.disabled=!1)}ngAfterViewInit(){this.cdRef.detectChanges()}}return s.\u0275fac=function(i){return new(i||s)(e.Y36(ee.$),e.Y36(j),e.Y36(T.gz),e.Y36(Ee.uw),e.Y36(T.F0),e.Y36(ie.o),e.Y36(L.sK),e.Y36(e.sBO),e.Y36(P.yh))},s.\u0275cmp=e.Xpm({type:s,selectors:[["app-costrate-edit"]],decls:48,vars:47,consts:[[3,"title","showEditBack","showIcon","selectedId","showDelete","pageAction"],["fxLayout","column","fxLayoutGap","16px",1,"p-2",3,"formGroup"],["fxLayout","row wrap","fxLayoutAlign","start start","fxLayoutGap","10px grid","fxFlexFill",""],["fxFlex.xs","100","fxFlex.lt-md","50","fxFlex","25",3,"appearance"],["formControlName","division","required","",3,"compareWith","selectionChange"],[3,"value",4,"ngFor","ngForOf"],[4,"ngIf"],["formControlName","sub_division",3,"compareWith"],["formControlName","career_level","required","",3,"compareWith","selectionChange"],["formControlName","billcode","required","",3,"compareWith"],["fxFlex.xs","100","fxFlex.lt-md","50","fxFlex","50",3,"appearance"],["formControlName","load","type","number","matInput","","min","1","max","100","required","",3,"keyup"],["formControlName","rate","matInput","","required",""],[3,"value"],["formControlName","salary",3,"value","highValue","options","valueChange","highValueChange"]],template:function(i,t){1&i&&(e.TgZ(0,"app-page"),e.TgZ(1,"app-page-header",0),e.NdJ("pageAction",function(a){return t.getPageAction(a)}),e.ALo(2,"translate"),e.qZA(),e.TgZ(3,"app-page-body"),e.TgZ(4,"form",1),e.TgZ(5,"div",2),e.TgZ(6,"mat-form-field",3),e.TgZ(7,"mat-label"),e._uU(8),e.ALo(9,"translate"),e.qZA(),e.TgZ(10,"mat-select",4),e.NdJ("selectionChange",function(a){return t.onDivsionChange(a)}),e.YNc(11,li,2,2,"mat-option",5),e.qZA(),e.YNc(12,hi,2,1,"mat-error",6),e.qZA(),e.TgZ(13,"mat-form-field",3),e.TgZ(14,"mat-label"),e._uU(15),e.ALo(16,"translate"),e.qZA(),e.TgZ(17,"mat-select",7),e.YNc(18,pi,2,2,"mat-option",5),e.qZA(),e.YNc(19,ui,2,1,"mat-error",6),e.qZA(),e.TgZ(20,"mat-form-field",3),e.TgZ(21,"mat-label"),e._uU(22),e.ALo(23,"translate"),e.qZA(),e.TgZ(24,"mat-select",8),e.NdJ("selectionChange",function(a){return t.onCareerLevelChange(a)}),e.YNc(25,ci,3,4,"mat-option",5),e.qZA(),e.YNc(26,gi,2,1,"mat-error",6),e.qZA(),e.TgZ(27,"mat-form-field",3),e.TgZ(28,"mat-label"),e._uU(29),e.ALo(30,"translate"),e.qZA(),e.TgZ(31,"mat-select",9),e.YNc(32,fi,2,2,"mat-option",5),e.qZA(),e.YNc(33,wi,2,1,"mat-error",6),e.qZA(),e.qZA(),e.YNc(34,Ci,5,6,"div",6),e.TgZ(35,"div",2),e.TgZ(36,"mat-form-field",10),e.TgZ(37,"mat-label"),e._uU(38),e.ALo(39,"translate"),e.qZA(),e.TgZ(40,"input",11),e.NdJ("keyup",function(a){return t.onCapacityChange(a)}),e.qZA(),e.YNc(41,Ti,4,3,"mat-error",6),e.qZA(),e.TgZ(42,"mat-form-field",10),e.TgZ(43,"mat-label"),e._uU(44),e.ALo(45,"translate"),e.qZA(),e._UZ(46,"input",12),e.YNc(47,Si,2,1,"mat-error",6),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&i&&(e.xp6(1),e.Q6J("title",e.lcZ(2,33,"COSTRATE.EDIT"))("showEditBack",!0)("showIcon",!0)("selectedId",t.permissionService.hasPermission("COSTRATE-UPDATE")?t.selectedCostRateId:null)("showDelete",t.permissionService.hasPermission("COSTRATE-DELETE")),e.xp6(3),e.Q6J("formGroup",t.CostRateEditForm),e.xp6(2),e.Q6J("appearance",t.appearanceType),e.xp6(2),e.Oqu(e.lcZ(9,35,"COSTRATE.DIVISION.TITLE")),e.xp6(2),e.Q6J("compareWith",t.compareFn),e.xp6(1),e.Q6J("ngForOf",t.filteredDivisions),e.xp6(1),e.Q6J("ngIf",!!t.CostRateEditForm.controls.division.invalid&&!!t.CostRateEditForm.controls.division.touched),e.xp6(1),e.Q6J("appearance",t.appearanceType),e.xp6(2),e.Oqu(e.lcZ(16,37,"COSTRATE.SUBDIVISION.TITLE")),e.xp6(2),e.Q6J("compareWith",t.compareFn),e.xp6(1),e.Q6J("ngForOf",t.subDivisions),e.xp6(1),e.Q6J("ngIf",!!t.CostRateEditForm.controls.sub_division.invalid&&!!t.CostRateEditForm.controls.sub_division.touched),e.xp6(1),e.Q6J("appearance",t.appearanceType),e.xp6(2),e.Oqu(e.lcZ(23,39,"COSTRATE.CAREERLEVEL.TITLE")),e.xp6(2),e.Q6J("compareWith",t.compareFn),e.xp6(1),e.Q6J("ngForOf",t.careerlevels),e.xp6(1),e.Q6J("ngIf",!!t.CostRateEditForm.controls.career_level.invalid&&!!t.CostRateEditForm.controls.career_level.touched),e.xp6(1),e.Q6J("appearance",t.appearanceType),e.xp6(2),e.Oqu(e.lcZ(30,41,"COSTRATE.BILLCODE.TITLE")),e.xp6(2),e.Q6J("compareWith",t.compareBillCodes),e.xp6(1),e.Q6J("ngForOf",t.billCodes),e.xp6(1),e.Q6J("ngIf",!!t.CostRateEditForm.controls.billcode.invalid&&!!t.CostRateEditForm.controls.billcode.touched),e.xp6(1),e.Q6J("ngIf",t.dataLoaded),e.xp6(2),e.Q6J("appearance",t.appearanceType),e.xp6(2),e.Oqu(e.lcZ(39,43,"COSTRATE.CAPACITY.TITLE")),e.xp6(3),e.Q6J("ngIf",!!t.CostRateEditForm.controls.load.invalid&&!!t.CostRateEditForm.controls.load.touched),e.xp6(1),e.Q6J("appearance",t.appearanceType),e.xp6(2),e.Oqu(e.lcZ(45,45,"COSTRATE.COSTRATE.TITLE")),e.xp6(3),e.Q6J("ngIf",!!t.CostRateEditForm.controls.rate.invalid&&!!t.CostRateEditForm.controls.rate.touched))},directives:[G.I,z.q,$.H,u._Y,u.JL,S.xw,S.SQ,u.sg,S.Wh,S.s9,V.KE,S.yH,V.hX,te.gD,u.JJ,u.u,u.Q7,m.sg,m.O5,u.Fj,u.wV,u.qQ,u.Fd,se.Nt,ne.ey,V.TO,K],pipes:[L.X$],styles:[""]}),s})();function Ri(s,o){if(1&s&&(e.TgZ(0,"mat-option",13),e._uU(1),e.qZA()),2&s){const i=o.$implicit;e.Q6J("value",i),e.xp6(1),e.hij(" ",i.name," ")}}function xi(s,o){1&s&&(e.TgZ(0,"div"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&s&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"COSTRATE.DIVISION.ERROR.REQUIRED")," "))}function Ai(s,o){if(1&s&&(e.TgZ(0,"mat-error"),e.YNc(1,xi,3,3,"div",6),e.qZA()),2&s){const i=e.oxw();e.xp6(1),e.Q6J("ngIf",!(null==i.CostRateForm.controls.division.errors||!i.CostRateForm.controls.division.errors.required))}}function yi(s,o){if(1&s&&(e.TgZ(0,"mat-option",13),e._uU(1),e.qZA()),2&s){const i=o.$implicit;e.Q6J("value",i),e.xp6(1),e.hij(" ",i.name," ")}}function Hi(s,o){1&s&&(e.TgZ(0,"div"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&s&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"COSTRATE.SUBDIVISION.ERROR.REQUIRED")," "))}function Vi(s,o){if(1&s&&(e.TgZ(0,"mat-error"),e.YNc(1,Hi,3,3,"div",6),e.qZA()),2&s){const i=e.oxw();e.xp6(1),e.Q6J("ngIf",!(null==i.CostRateForm.controls.sub_division.errors||!i.CostRateForm.controls.sub_division.errors.required))}}function Ni(s,o){if(1&s&&(e.TgZ(0,"mat-option",13),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&s){const i=o.$implicit;e.Q6J("value",i),e.xp6(1),e.hij(" ",e.lcZ(2,2,i.display_name)," ")}}function Zi(s,o){1&s&&(e.TgZ(0,"div"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&s&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"COSTRATE.CAREERLEVEL.ERROR.REQUIRED")," "))}function Mi(s,o){if(1&s&&(e.TgZ(0,"mat-error"),e.YNc(1,Zi,3,3,"div",6),e.qZA()),2&s){const i=e.oxw();e.xp6(1),e.Q6J("ngIf",!(null==i.CostRateForm.controls.career_level.errors||!i.CostRateForm.controls.career_level.errors.required))}}function ki(s,o){if(1&s&&(e.TgZ(0,"mat-option",13),e._uU(1),e.qZA()),2&s){const i=o.$implicit;e.Q6J("value",i),e.xp6(1),e.hij(" ",i," ")}}function Ii(s,o){1&s&&(e.TgZ(0,"div"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&s&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"COSTRATE.BILLCODE.ERROR.REQUIRED")," "))}function Di(s,o){if(1&s&&(e.TgZ(0,"mat-error"),e.YNc(1,Ii,3,3,"div",6),e.qZA()),2&s){const i=e.oxw();e.xp6(1),e.Q6J("ngIf",!(null==i.CostRateForm.controls.billcode.errors||!i.CostRateForm.controls.billcode.errors.required))}}function Pi(s,o){if(1&s){const i=e.EpF();e.TgZ(0,"div"),e.TgZ(1,"p"),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.TgZ(4,"app-slider",14),e.NdJ("valueChange",function(n){return e.CHM(i),e.oxw().minValue=n})("highValueChange",function(n){return e.CHM(i),e.oxw().maxValue=n}),e.qZA(),e.qZA()}if(2&s){const i=e.oxw();e.xp6(2),e.Oqu(e.lcZ(3,4,"COSTRATE.SALARY")),e.xp6(2),e.Q6J("value",i.minValue)("highValue",i.maxValue)("options",i.options)}}function Fi(s,o){1&s&&(e.TgZ(0,"div"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&s&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"COSTRATE.CAPACITY.ERROR.REQUIRED")," "))}function Ui(s,o){1&s&&(e.TgZ(0,"div"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&s&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"COSTRATE.CAPACITY.ERROR.MIN")," "))}function Bi(s,o){1&s&&(e.TgZ(0,"div"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&s&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"COSTRATE.CAPACITY.ERROR.MAX")," "))}function qi(s,o){if(1&s&&(e.TgZ(0,"mat-error"),e.YNc(1,Fi,3,3,"div",6),e.YNc(2,Ui,3,3,"div",6),e.YNc(3,Bi,3,3,"div",6),e.qZA()),2&s){const i=e.oxw();e.xp6(1),e.Q6J("ngIf",!(null==i.CostRateForm.controls.load.errors||!i.CostRateForm.controls.load.errors.required)),e.xp6(1),e.Q6J("ngIf",!(null==i.CostRateForm.controls.load.errors||!i.CostRateForm.controls.load.errors.min)),e.xp6(1),e.Q6J("ngIf",!(null==i.CostRateForm.controls.load.errors||!i.CostRateForm.controls.load.errors.max))}}function Qi(s,o){1&s&&(e.TgZ(0,"div"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&s&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"COSTRATE.COSTRATE.ERROR.REQUIRED")," "))}function Ji(s,o){if(1&s&&(e.TgZ(0,"mat-error"),e.YNc(1,Qi,3,3,"div",6),e.qZA()),2&s){const i=e.oxw();e.xp6(1),e.Q6J("ngIf",!(null==i.CostRateForm.controls.rate.errors||!i.CostRateForm.controls.rate.errors.required))}}let Yi=(()=>{class s{constructor(i,t,n,a,r,p){this.costRateService=i,this.activatedRoute=t,this.router=n,this.snackbarService=a,this.translate=r,this.store=p,this.selectedTab=0,this.model={},this.minLabel="",this.minValue=25e3,this.maxValue=1e5,this.options={},this.filteredDivisions=[],this.totalDays=365,this.weekendDays=104,this.holidays=10,this.leaves=30,this.workingHours=8,this.appearanceType="fill",this.dataLoaded=!1,this.store.select(D.D6).subscribe(d=>{this.translate.use(d.userPreference.language),this.appearanceType=d.userPreference.appearanceType,this.direction=d.userPreference.direction,this.updateSalarySlide()})}updateSalarySlide(){this.dataLoaded=!1,this.options={floor:0,ceil:3e5,showTicks:!0,tickStep:25e3,rightToLeft:"rtl"===this.direction,translate:(i,t)=>{switch(t){case O.Low:return this.options.rightToLeft?i+"$"+this.translate.instant("COSTRATE.SALARY-MIN"):this.translate.instant("COSTRATE.SALARY-MIN")+"$"+i;case O.High:return this.options.rightToLeft?i+"$"+this.translate.instant("COSTRATE.SALARY-MAX"):this.translate.instant("COSTRATE.SALARY-MAX")+"$"+i;default:return this.options.rightToLeft?i+"$":"$"+i}}},this.dataLoaded=!0}ngOnInit(){this.updateSalarySlide(),this.CostRateForm=new u.cw({division:new u.NI("",u.kI.required),sub_division:new u.NI(""),career_level:new u.NI("",u.kI.required),billcode:new u.NI("",u.kI.required),salary:new u.NI(""),load:new u.NI(100,[u.kI.required,u.kI.min(1),u.kI.max(100)]),rate:new u.NI("",u.kI.required)}),this.CostRateForm.patchValue({salary:[this.minValue,this.maxValue]}),this.getCareerLevels(),this.getDivision()}getCareerLevels(){this.costRateService.getCareelLevel().subscribe(i=>{this.careerlevels=i})}getDivision(){this.costRateService.getDivision().subscribe(i=>{this.divisions=i,this.divisions.forEach(t=>{t.has_sub_divisions&&this.filteredDivisions.push(t)})})}onCareerLevelChange(i){this.billCodes=i.value.addldata.billcodes}onDivsionChange(i){const t=i.value;this.subDivisions=this.divisions.filter(n=>n.parent_id===t.id),this.CostRateForm.patchValue({sub_division:null})}saveCostRate(){const i=this.CostRateForm.get("salary").value;this.CostRateForm.removeControl("salary");const t=this.CostRateForm.value;t.minimum_salary=i[0],t.maximum_salary=i[1],this.costRateService.save(t).subscribe({next:n=>{this.snackbarService.info(this.translate.instant("COSTRATE.SUCCESS.CREATE")),this.router.navigate(["./../"],{relativeTo:this.activatedRoute})},error:n=>this.snackbarService.warn(this.translate.instant("COSTRATE.ERROR.CREATE"))})}onCapacityChange(i){const t=i.target.value,a=this.CostRateForm.get("salary").value[1];if(t>0&&t<=100){const r=a/((this.totalDays-(this.weekendDays+this.holidays+this.leaves))*this.workingHours*t/100);this.CostRateForm.get("rate").setValue(r.toFixed(2))}else this.CostRateForm.get("rate").setValue("")}onSalaryChange(i){const t=this.CostRateForm.get("load").value,n=i/((this.totalDays-(this.weekendDays+this.holidays+this.leaves))*this.workingHours*t/100);this.CostRateForm.get("rate").setValue(n.toFixed(2))}getPageAction(i){"save"===i.toString()&&this.saveCostRate()}}return s.\u0275fac=function(i){return new(i||s)(e.Y36(j),e.Y36(T.gz),e.Y36(T.F0),e.Y36(ie.o),e.Y36(L.sK),e.Y36(P.yh))},s.\u0275cmp=e.Xpm({type:s,selectors:[["app-costrate-new"]],decls:48,vars:43,consts:[[3,"title","showBack","showIcon","showSave","isDisabled","pageAction"],["fxLayout","column","fxLayoutGap","16px",1,"p-2",3,"formGroup"],["fxLayout","row wrap","fxLayoutAlign","start start","fxLayoutGap","10px grid","fxFlexFill",""],["fxFlex.xs","100","fxFlex.lt-md","50","fxFlex","25",3,"appearance"],["formControlName","division","required","",3,"selectionChange"],[3,"value",4,"ngFor","ngForOf"],[4,"ngIf"],["formControlName","sub_division"],["formControlName","career_level","required","",3,"selectionChange"],["formControlName","billcode","required",""],["fxFlex.xs","100","fxFlex","50",3,"appearance"],["formControlName","load","type","number","matInput","","min","1","max","100","required","",3,"keyup"],["formControlName","rate","matInput","","required",""],[3,"value"],["formControlName","salary",3,"value","highValue","options","valueChange","highValueChange"]],template:function(i,t){1&i&&(e.TgZ(0,"app-page"),e.TgZ(1,"app-page-header",0),e.NdJ("pageAction",function(a){return t.getPageAction(a)}),e.ALo(2,"translate"),e.qZA(),e.TgZ(3,"app-page-body"),e.TgZ(4,"form",1),e.TgZ(5,"div",2),e.TgZ(6,"mat-form-field",3),e.TgZ(7,"mat-label"),e._uU(8),e.ALo(9,"translate"),e.qZA(),e.TgZ(10,"mat-select",4),e.NdJ("selectionChange",function(a){return t.onDivsionChange(a)}),e.YNc(11,Ri,2,2,"mat-option",5),e.qZA(),e.YNc(12,Ai,2,1,"mat-error",6),e.qZA(),e.TgZ(13,"mat-form-field",3),e.TgZ(14,"mat-label"),e._uU(15),e.ALo(16,"translate"),e.qZA(),e.TgZ(17,"mat-select",7),e.YNc(18,yi,2,2,"mat-option",5),e.qZA(),e.YNc(19,Vi,2,1,"mat-error",6),e.qZA(),e.TgZ(20,"mat-form-field",3),e.TgZ(21,"mat-label"),e._uU(22),e.ALo(23,"translate"),e.qZA(),e.TgZ(24,"mat-select",8),e.NdJ("selectionChange",function(a){return t.onCareerLevelChange(a)}),e.YNc(25,Ni,3,4,"mat-option",5),e.qZA(),e.YNc(26,Mi,2,1,"mat-error",6),e.qZA(),e.TgZ(27,"mat-form-field",3),e.TgZ(28,"mat-label"),e._uU(29),e.ALo(30,"translate"),e.qZA(),e.TgZ(31,"mat-select",9),e.YNc(32,ki,2,2,"mat-option",5),e.qZA(),e.YNc(33,Di,2,1,"mat-error",6),e.qZA(),e.qZA(),e.YNc(34,Pi,5,6,"div",6),e.TgZ(35,"div",2),e.TgZ(36,"mat-form-field",10),e.TgZ(37,"mat-label"),e._uU(38),e.ALo(39,"translate"),e.qZA(),e.TgZ(40,"input",11),e.NdJ("keyup",function(a){return t.onCapacityChange(a)}),e.qZA(),e.YNc(41,qi,4,3,"mat-error",6),e.qZA(),e.TgZ(42,"mat-form-field",10),e.TgZ(43,"mat-label"),e._uU(44),e.ALo(45,"translate"),e.qZA(),e._UZ(46,"input",12),e.YNc(47,Ji,2,1,"mat-error",6),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&i&&(e.xp6(1),e.Q6J("title",e.lcZ(2,29,"COSTRATE.CREATE"))("showBack",!0)("showIcon",!0)("showSave",!0)("isDisabled",t.CostRateForm.invalid),e.xp6(3),e.Q6J("formGroup",t.CostRateForm),e.xp6(2),e.Q6J("appearance",t.appearanceType),e.xp6(2),e.Oqu(e.lcZ(9,31,"COSTRATE.DIVISION.TITLE")),e.xp6(3),e.Q6J("ngForOf",t.filteredDivisions),e.xp6(1),e.Q6J("ngIf",!!t.CostRateForm.controls.division.invalid&&!!t.CostRateForm.controls.division.touched),e.xp6(1),e.Q6J("appearance",t.appearanceType),e.xp6(2),e.Oqu(e.lcZ(16,33,"COSTRATE.SUBDIVISION.TITLE")),e.xp6(3),e.Q6J("ngForOf",t.subDivisions),e.xp6(1),e.Q6J("ngIf",!!t.CostRateForm.controls.sub_division.invalid&&!!t.CostRateForm.controls.sub_division.touched),e.xp6(1),e.Q6J("appearance",t.appearanceType),e.xp6(2),e.Oqu(e.lcZ(23,35,"COSTRATE.CAREERLEVEL.TITLE")),e.xp6(3),e.Q6J("ngForOf",t.careerlevels),e.xp6(1),e.Q6J("ngIf",!!t.CostRateForm.controls.career_level.invalid&&!!t.CostRateForm.controls.career_level.touched),e.xp6(1),e.Q6J("appearance",t.appearanceType),e.xp6(2),e.Oqu(e.lcZ(30,37,"COSTRATE.BILLCODE.TITLE")),e.xp6(3),e.Q6J("ngForOf",t.billCodes),e.xp6(1),e.Q6J("ngIf",!!t.CostRateForm.controls.billcode.invalid&&!!t.CostRateForm.controls.billcode.touched),e.xp6(1),e.Q6J("ngIf",t.dataLoaded),e.xp6(2),e.Q6J("appearance",t.appearanceType),e.xp6(2),e.Oqu(e.lcZ(39,39,"COSTRATE.CAPACITY.TITLE")),e.xp6(3),e.Q6J("ngIf",!!t.CostRateForm.controls.load.invalid&&!!t.CostRateForm.controls.load.touched),e.xp6(1),e.Q6J("appearance",t.appearanceType),e.xp6(2),e.Oqu(e.lcZ(45,41,"COSTRATE.COSTRATE.TITLE")),e.xp6(3),e.Q6J("ngIf",!!t.CostRateForm.controls.rate.invalid&&!!t.CostRateForm.controls.rate.touched))},directives:[G.I,z.q,$.H,u._Y,u.JL,S.xw,S.SQ,u.sg,S.Wh,S.s9,V.KE,S.yH,V.hX,te.gD,u.JJ,u.u,u.Q7,m.sg,m.O5,u.Fj,u.wV,u.qQ,u.Fd,se.Nt,ne.ey,V.TO,K],pipes:[L.X$],styles:[""]}),s})();var ji=c(7142);const zi=[{canActivate:[M.a],path:"",component:(()=>{class s{constructor(i,t,n,a,r,p){this.permissionService=i,this._costRateService=t,this.activatedRoute=n,this.router=a,this.translate=r,this.store=p,this.displayedColumns=["class","subClass","careerLevelName","billcode","load","rate"],this.headers=[{columnName:"class",display_name:"GRID.DIVISION"},{columnName:"subClass",display_name:"GRID.SUB-DIVISION"},{columnName:"careerLevelName",display_name:"GRID.CAREERLEVEL"},{columnName:"billcode",display_name:"GRID.BILLCODE"},{columnName:"load",display_name:"GRID.LOAD"},{columnName:"rate",display_name:"GRID.COSTRATE"}],this.gridData=[],this.dataLoaded=!1,this.searchString="",this.filteredRecords=[],this.store.select(D.D6).subscribe(d=>{this.translate.use(d.userPreference.language)})}ngOnInit(){this.getAllCostRates()}getAllCostRates(){this._costRateService.getAll().subscribe({next:i=>{this.gridData=i,this.filteredRecords=i;for(const t of this.gridData)t.class=t.division.name,t.subClass=t.sub_division?t.sub_division.display_name:"",t.careerLevelName=t.career_level?t.career_level.display_name:"";this.dataLoaded=!0},error:i=>{this.dataLoaded=!0,this.gridData=[]}})}selectedRowItem(i){this.permissionService.hasPermission("COSTRATE-UPDATE||CAREER-LEVEL-DELETE||CAREER-LEVEL-READ")&&(localStorage.setItem("selectedItem",JSON.stringify(i)),this.router.navigate(["./edit/"+i.id],{relativeTo:this.activatedRoute}))}selectedSelection(i){}getSearchString(i){this.searchString=i}}return s.\u0275fac=function(i){return new(i||s)(e.Y36(ee.$),e.Y36(j),e.Y36(T.gz),e.Y36(T.F0),e.Y36(L.sK),e.Y36(P.yh))},s.\u0275cmp=e.Xpm({type:s,selectors:[["app-costrate"]],decls:7,vars:15,consts:[[3,"title","showNew","showIcon","showSearch","searchPlaceholder","emitSearchString"],[1,"p-2"],[3,"data","displayColumns","useCustomHeader","headers","showFilter","searchString","selectedRow","selectedSelection"]],template:function(i,t){1&i&&(e.TgZ(0,"app-page"),e.TgZ(1,"app-page-header",0),e.NdJ("emitSearchString",function(a){return t.getSearchString(a)}),e.ALo(2,"translate"),e.ALo(3,"translate"),e.qZA(),e.TgZ(4,"app-page-body"),e.TgZ(5,"div",1),e.TgZ(6,"app-shared-grid",2),e.NdJ("selectedRow",function(a){return t.selectedRowItem(a)})("selectedSelection",function(a){return t.selectedSelection(a)}),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&i&&(e.xp6(1),e.Q6J("title",e.lcZ(2,11,"COSTRATE.PAGE-TITLE"))("showNew",t.permissionService.hasPermission("COSTRATE-CREATE"))("showIcon",!0)("showSearch",!0)("searchPlaceholder",e.lcZ(3,13,"COSTRATE.SEARCH-PLACEHOLDER")),e.xp6(5),e.Q6J("data",t.filteredRecords)("displayColumns",t.displayedColumns)("useCustomHeader",!0)("headers",t.headers)("showFilter",!1)("searchString",t.searchString))},directives:[G.I,z.q,$.H,ji.M],pipes:[L.X$],styles:[""]}),s})(),data:{breadcrumb:"",permission_code:"CLIENT-READ"}},{canActivate:[M.a],path:"new",component:Yi,data:{breadcrumb:"BUTTON.NEW",permission_code:"COSTRATE-CREATE"}},{canActivate:[M.a],path:"edit/:id",component:_i,data:{breadcrumb:"BUTTON.EDIT",permission_code:"COSTRATE-UPDATE||CAREER-LEVEL-DELETE||CAREER-LEVEL-READ"}}];let $i=(()=>{class s{}return s.\u0275fac=function(i){return new(i||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({imports:[[T.Bz.forChild(zi)],T.Bz]}),s})();function Ce(s){return new Q.w(s,"assets/i18n/",".json")}let Wi=(()=>{class s{}return s.\u0275fac=function(i){return new(i||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({imports:[[m.ez,$i,_,L.aw.forChild({loader:{provide:L.Zw,useFactory:Ce,deps:[y.eN]},isolate:!0}),J.q,u.UX,u.u5,A.m,Y._]]}),s})()},9759:(be,k,c)=>{c.d(k,{p:()=>Y});var m=c(5e3),y=c(8966),u=c(7093),L=c(7322),Q=c(7423),J=c(1062);let Y=(()=>{class A{constructor(_){this.dialogRef=_}onNoClick(){this.dialogRef.close()}delete(){this.dialogRef.close("OK")}}return A.\u0275fac=function(_){return new(_||A)(m.Y36(y.so))},A.\u0275cmp=m.Xpm({type:A,selectors:[["app-delete-confirmation"]],decls:12,vars:9,consts:[["fxLayout","column"],["mat-dialog-content","",2,"overflow","hidden"],[1,"mat-h2"],["mat-dialog-actions","","fxLayout","row","fxLayoutAlign","space-between center","fxLayoutGap","5px",1,"mt-1"],["mat-stroked-button","","color","primary",3,"click"],["mat-stroked-button","","color","warn","cdkFocusInitial","",3,"click"]],template:function(_,T){1&_&&(m.TgZ(0,"div",0),m.TgZ(1,"div",1),m.TgZ(2,"mat-label",2),m._uU(3),m.ALo(4,"translate"),m.qZA(),m.qZA(),m.TgZ(5,"div",3),m.TgZ(6,"button",4),m.NdJ("click",function(){return T.onNoClick()}),m._uU(7),m.ALo(8,"translate"),m.qZA(),m.TgZ(9,"button",5),m.NdJ("click",function(){return T.delete()}),m._uU(10),m.ALo(11,"translate"),m.qZA(),m.qZA(),m.qZA()),2&_&&(m.xp6(3),m.Oqu(m.lcZ(4,3,"BUTTON.DELETE-CONFIRMATION")),m.xp6(4),m.Oqu(m.lcZ(8,5,"BUTTON.CANCEL")),m.xp6(3),m.Oqu(m.lcZ(11,7,"BUTTON.DELETE")))},directives:[u.xw,y.xY,L.hX,y.H8,u.Wh,u.SQ,Q.lW],pipes:[J.X$],styles:[""]}),A})()}}]);