"use strict";(self.webpackChunksolidapp=self.webpackChunksolidapp||[]).push([[1237],{1237:(ce,U,s)=>{s.r(U),s.d(U,{InvoiceModule:()=>ft,createTranslateLoader:()=>le});var u=s(9808),C=s(520),l=s(3075),A=s(1062),L=s(40),D=s(7006),E=s(3583),h=s(900),g=s(9291),f=s(8675),d=s(4004),S=s(9759),V=s(4971),e=s(5e3),b=s(8966),_=s(7093),k=s(9814),w=s(7423);function se(o,r){if(1&o&&(e.TgZ(0,"mat-radio-button",8),e._uU(1),e.qZA()),2&o){const t=r.$implicit;e.Q6J("value",t),e.xp6(1),e.Oqu(t.value)}}let ue=(()=>{class o{constructor(t){this.dialogRef=t,this.copyTypes=[{id:1,value:"Quote"},{id:2,value:"Sale Order"},{id:3,value:"Invoice"}],this.selectedCopyType=new l.NI("")}onNoClick(){this.dialogRef.close()}saveCopyTo(){this.dialogRef.close(this.selectedCopyType.value)}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(b.so))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-copy-invoice-to"]],decls:11,vars:2,consts:[["fxLayout","column",1,"pt-7","pl-8","pb-7","pr-8"],["mat-dialog-title",""],["mat-dialog-content","",2,"overflow","hidden"],["aria-label","Select an option","fxLayout","column","fxLayoutGap","5px",1,"pl-4","pr-4",3,"formControl"],[3,"value",4,"ngFor","ngForOf"],["mat-dialog-actions",""],["mat-stroked-button","",3,"click"],["mat-stroked-button","","color","primary","cdkFocusInitial","",3,"click"],[3,"value"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"h1",1),e._uU(2,"Copy Invoice to"),e.qZA(),e.TgZ(3,"div",2),e.TgZ(4,"mat-radio-group",3),e.YNc(5,se,2,2,"mat-radio-button",4),e.qZA(),e.qZA(),e.TgZ(6,"div",5),e.TgZ(7,"button",6),e.NdJ("click",function(){return i.onNoClick()}),e._uU(8,"Cancel"),e.qZA(),e.TgZ(9,"button",7),e.NdJ("click",function(){return i.saveCopyTo()}),e._uU(10,"Copy"),e.qZA(),e.qZA(),e.qZA()),2&t&&(e.xp6(4),e.Q6J("formControl",i.selectedCopyType),e.xp6(1),e.Q6J("ngForOf",i.copyTypes))},directives:[_.xw,b.uh,b.xY,k.VQ,_.SQ,l.JJ,l.oH,u.sg,b.H8,w.lW,k.U0],styles:[""]}),o})();var Y=s(7071),F=s(2340);let G=(()=>{class o{constructor(t){this.http=t}getTaxOption(){return this.http.get(`${F.N.apiEndpoint}/metadata/taxoption`)}getAllItems(){return this.http.get(`${F.N.apiEndpoint}/org/config/item`)}getAllClients(){return this.http.get(`${F.N.apiEndpoint}/org/config/customer`)}getAccounts(){return this.http.get(`${F.N.apiEndpoint}/metadata/accounttype`)}getDivision(){return this.http.get(`${F.N.apiEndpoint}/org/config/division`)}}return o.\u0275fac=function(t){return new(t||o)(e.LFG(C.eN))},o.\u0275prov=e.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();var B=s(5094),P=s(291),j=s(722),T=s(7322),H=s(3874),N=s(2181),W=s(4763),$=s(7531),O=s(1079),y=s(6856),X=s(4107),K=s(3322),z=s(508);function pe(o,r){1&o&&(e.TgZ(0,"mat-icon",66),e._uU(1,"search"),e.qZA())}function me(o,r){if(1&o){const t=e.EpF();e.TgZ(0,"button",67),e.NdJ("click",function(){return e.CHM(t),e.oxw().addCompany()}),e.TgZ(1,"mat-icon",5),e._uU(2,"add_circle_outline"),e.qZA(),e.qZA()}}function de(o,r){if(1&o&&(e.TgZ(0,"mat-option",68),e._uU(1),e.qZA()),2&o){const t=r.$implicit;e.Q6J("value",t),e.xp6(1),e.hij(" ",t.name," ")}}function ve(o,r){1&o&&(e.TgZ(0,"div"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&o&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"ACCOUNTS.INVOICE.TO.ERROR.REQUIRED")," "))}function fe(o,r){if(1&o&&(e.TgZ(0,"mat-error"),e.YNc(1,ve,3,3,"div",23),e.qZA()),2&o){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",!(null==t.invoiceDetailForm.controls.to.errors||!t.invoiceDetailForm.controls.to.errors.required))}}function _e(o,r){1&o&&(e.TgZ(0,"div"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&o&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"ACCOUNTS.INVOICE.DATE.ERROR.REQUIRED")," "))}function ge(o,r){1&o&&(e.TgZ(0,"div"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&o&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"ACCOUNTS.INVOICE.DATE.ERROR.INVALID")," "))}function Te(o,r){if(1&o&&(e.TgZ(0,"mat-error"),e.YNc(1,_e,3,3,"div",23),e.YNc(2,ge,3,3,"div",23),e.qZA()),2&o){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",!(null==t.invoiceDetailForm.controls.date.errors||!t.invoiceDetailForm.controls.date.errors.required)),e.xp6(1),e.Q6J("ngIf",!!t.invoiceDetailForm.controls.date.hasError("matDatepickerMin"))}}function Ze(o,r){1&o&&(e.TgZ(0,"div"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&o&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"ACCOUNTS.DUE-DATE.ERROR.REQUIRED")," "))}function Ae(o,r){1&o&&(e.TgZ(0,"div"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&o&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"ACCOUNTS.DUE-DATE.ERROR.INVALID")," "))}function xe(o,r){if(1&o&&(e.TgZ(0,"mat-error"),e.YNc(1,Ze,3,3,"div",23),e.YNc(2,Ae,3,3,"div",23),e.qZA()),2&o){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",!(null==t.invoiceDetailForm.controls.dueDate.errors||!t.invoiceDetailForm.controls.dueDate.errors.required)),e.xp6(1),e.Q6J("ngIf",!!t.invoiceDetailForm.controls.dueDate.hasError("matDatepickerMin"))}}function he(o,r){1&o&&(e.TgZ(0,"div"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&o&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"ACCOUNTS.INVOICE.NUMBER.ERROR.REQUIRED")," "))}function Ie(o,r){if(1&o&&(e.TgZ(0,"mat-error"),e.YNc(1,he,3,3,"div",23),e.qZA()),2&o){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",!(null==t.invoiceDetailForm.controls.num.errors||!t.invoiceDetailForm.controls.num.errors.required))}}function Ce(o,r){1&o&&(e.TgZ(0,"div"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&o&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"ACCOUNTS.REF.ERROR.REQUIRED")," "))}function Ne(o,r){if(1&o&&(e.TgZ(0,"mat-error"),e.YNc(1,Ce,3,3,"div",23),e.qZA()),2&o){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",!(null==t.invoiceDetailForm.controls.ref.errors||!t.invoiceDetailForm.controls.ref.errors.required))}}function ye(o,r){if(1&o&&(e.TgZ(0,"mat-option",68),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&o){const t=r.$implicit;e.Q6J("value",t),e.xp6(1),e.hij(" ",e.lcZ(2,2,t.display_name)," ")}}function qe(o,r){1&o&&(e.TgZ(0,"div"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&o&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"ACCOUNTS.AMOUNTS-ARE.ERROR.REQUIRED")," "))}function be(o,r){if(1&o&&(e.TgZ(0,"mat-error"),e.YNc(1,qe,3,3,"div",23),e.qZA()),2&o){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",!(null==t.amntAre.errors||!t.amntAre.errors.required))}}function Fe(o,r){if(1&o&&(e.TgZ(0,"mat-option",68),e._uU(1),e.qZA()),2&o){const t=r.$implicit;e.Q6J("value",t),e.xp6(1),e.hij(" ",t.name," ")}}function Ue(o,r){1&o&&(e.TgZ(0,"mat-option"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&o&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"ACCOUNTS.NO-ITEM-FOUND")))}function Oe(o,r){if(1&o&&(e.TgZ(0,"mat-option",68),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&o){const t=r.$implicit;e.Q6J("value",t),e.xp6(1),e.hij(" ",e.lcZ(2,2,t.display_name)," ")}}function Le(o,r){if(1&o&&(e.TgZ(0,"mat-option",68),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&o){const t=r.$implicit;e.Q6J("value",t),e.xp6(1),e.hij(" ",e.lcZ(2,2,t.display_name)," ")}}function De(o,r){if(1&o){const t=e.EpF();e.TgZ(0,"div",71),e.TgZ(1,"mat-form-field",72),e._UZ(2,"input",73),e.TgZ(3,"mat-autocomplete",74,75),e.NdJ("optionSelected",function(a){const c=e.CHM(t).index;return e.oxw(2).onItemSelected(a,c)}),e.YNc(5,Fe,2,2,"mat-option",22),e.ALo(6,"async"),e.YNc(7,Ue,3,3,"mat-option",23),e.qZA(),e.qZA(),e.TgZ(8,"mat-form-field",76),e._UZ(9,"input",77),e.qZA(),e.TgZ(10,"mat-form-field",78),e.TgZ(11,"mat-select",79),e.YNc(12,Oe,3,4,"mat-option",22),e.qZA(),e.qZA(),e.TgZ(13,"mat-form-field",80),e._UZ(14,"input",81),e.qZA(),e.TgZ(15,"mat-form-field",82),e.TgZ(16,"input",83),e.NdJ("keyup",function(){return e.CHM(t),e.oxw(2).invceValueChnaged()}),e.qZA(),e.qZA(),e.TgZ(17,"mat-form-field",80),e.TgZ(18,"input",84),e.NdJ("keyup",function(){return e.CHM(t),e.oxw(2).invceValueChnaged()}),e.qZA(),e.TgZ(19,"mat-icon",66),e._UZ(20,"i",85),e.qZA(),e.qZA(),e.TgZ(21,"mat-form-field",86),e.TgZ(22,"input",87),e.NdJ("blur",function(){const n=e.CHM(t).index;return e.oxw(2).blurInput("account",n)}),e.qZA(),e.TgZ(23,"mat-autocomplete",88,89),e.YNc(25,Le,3,4,"mat-option",22),e.ALo(26,"async"),e.qZA(),e.qZA(),e.TgZ(27,"mat-form-field",80),e.TgZ(28,"input",90),e.NdJ("keyup",function(){return e.CHM(t),e.oxw(2).invceValueChnaged()}),e.qZA(),e.TgZ(29,"mat-icon",66),e._UZ(30,"i",85),e.qZA(),e.qZA(),e.TgZ(31,"mat-form-field",91),e._UZ(32,"input",92),e.TgZ(33,"mat-icon",93),e._UZ(34,"i",94),e.qZA(),e.qZA(),e.TgZ(35,"button",95),e.NdJ("click",function(){const n=e.CHM(t).index;return e.oxw(2).removeFormGroup(n)}),e.TgZ(36,"mat-icon",5),e._uU(37,"close"),e.qZA(),e.qZA(),e.qZA()}if(2&o){const t=r.index,i=e.MAs(4),a=e.MAs(24),n=e.oxw(2);e.Q6J("fxLayoutGap",n.flexGap)("formGroupName",t),e.xp6(1),e.Q6J("appearance",n.appearanceType),e.xp6(1),e.Q6J("matAutocomplete",i),e.xp6(1),e.Q6J("displayWith",n.displayFn),e.xp6(2),e.Q6J("ngForOf",e.lcZ(6,20,n.filteredItems[t])),e.xp6(2),e.Q6J("ngIf",n.showNoItem),e.xp6(1),e.Q6J("appearance",n.appearanceType),e.xp6(2),e.Q6J("appearance",n.appearanceType),e.xp6(1),e.Q6J("compareWith",n.compareFn),e.xp6(1),e.Q6J("ngForOf",n.filteredDivisions),e.xp6(1),e.Q6J("appearance",n.appearanceType),e.xp6(2),e.Q6J("appearance",n.appearanceType),e.xp6(2),e.Q6J("appearance",n.appearanceType),e.xp6(4),e.Q6J("appearance",n.appearanceType),e.xp6(1),e.Q6J("matAutocomplete",a),e.xp6(1),e.Q6J("displayWith",n.displayFn),e.xp6(2),e.Q6J("ngForOf",e.lcZ(26,22,n.filteredAccounts[t])),e.xp6(2),e.Q6J("appearance",n.appearanceType),e.xp6(4),e.Q6J("appearance",n.appearanceType)}}function Ee(o,r){if(1&o&&(e.TgZ(0,"div",69),e.YNc(1,De,38,24,"div",70),e.qZA()),2&o){const t=e.oxw();e.xp6(1),e.Q6J("ngForOf",t.invoiceEditForm.get("invoice").controls)}}function Se(o,r){if(1&o&&(e.TgZ(0,"div",60),e.TgZ(1,"h3"),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.TgZ(4,"div",96),e.TgZ(5,"div",97),e.TgZ(6,"mat-label"),e._uU(7),e.ALo(8,"translate"),e.qZA(),e.TgZ(9,"mat-form-field",16),e._UZ(10,"input",98),e.qZA(),e.qZA(),e.TgZ(11,"div",97),e.TgZ(12,"mat-label"),e._uU(13),e.ALo(14,"translate"),e.qZA(),e.TgZ(15,"mat-form-field",16),e._UZ(16,"input",98),e.qZA(),e.qZA(),e.TgZ(17,"div",97),e.TgZ(18,"mat-label"),e._uU(19),e.ALo(20,"translate"),e.qZA(),e.TgZ(21,"mat-form-field",16),e._UZ(22,"input",98),e.qZA(),e.qZA(),e.TgZ(23,"div",97),e.TgZ(24,"mat-label"),e._uU(25),e.ALo(26,"translate"),e.qZA(),e.TgZ(27,"mat-form-field",16),e._UZ(28,"input",98),e.qZA(),e.qZA(),e.TgZ(29,"div",99),e.TgZ(30,"button",100),e._uU(31),e.ALo(32,"translate"),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&o){const t=e.oxw();e.xp6(2),e.Oqu(e.lcZ(3,15,"ACCOUNTS.PAYMENT-INFORMATION.TITLE")),e.xp6(5),e.Oqu(e.lcZ(8,17,"ACCOUNTS.PAYMENT-INFORMATION.AMOUNT-RECIEVED")),e.xp6(2),e.Q6J("appearance",t.appearanceType),e.xp6(1),e.Q6J("disabled",4===(null==t.savedInvoice||null==t.savedInvoice.tallyValue||null==t.savedInvoice.tallyValue.status?null:t.savedInvoice.tallyValue.status.id)),e.xp6(3),e.Oqu(e.lcZ(14,19,"ACCOUNTS.PAYMENT-INFORMATION.TDS-PAID")),e.xp6(2),e.Q6J("appearance",t.appearanceType),e.xp6(1),e.Q6J("disabled",4===(null==t.savedInvoice||null==t.savedInvoice.tallyValue||null==t.savedInvoice.tallyValue.status?null:t.savedInvoice.tallyValue.status.id)),e.xp6(3),e.Oqu(e.lcZ(20,21,"ACCOUNTS.PAYMENT-INFORMATION.AMOUNT-UNPAID")),e.xp6(2),e.Q6J("appearance",t.appearanceType),e.xp6(1),e.Q6J("disabled",4===(null==t.savedInvoice||null==t.savedInvoice.tallyValue||null==t.savedInvoice.tallyValue.status?null:t.savedInvoice.tallyValue.status.id)),e.xp6(3),e.Oqu(e.lcZ(26,23,"ACCOUNTS.PAYMENT-INFORMATION.REFERENCE")),e.xp6(2),e.Q6J("appearance",t.appearanceType),e.xp6(1),e.Q6J("disabled",4===(null==t.savedInvoice||null==t.savedInvoice.tallyValue||null==t.savedInvoice.tallyValue.status?null:t.savedInvoice.tallyValue.status.id)),e.xp6(2),e.Q6J("disabled",4===(null==t.savedInvoice||null==t.savedInvoice.tallyValue||null==t.savedInvoice.tallyValue.status?null:t.savedInvoice.tallyValue.status.id)),e.xp6(1),e.Oqu(e.lcZ(32,25,"ACCOUNTS.PAYMENT-INFORMATION.ADD-PAYMENT"))}}const we=function(){return["../../../"]},ee=function(){return{width:"40%"}},te=function(){return{width:"30%"}},ie=function(){return{width:"20%"}};let Je=(()=>{class o{constructor(t,i,a,n,c,p,Z,I,v){this.snackbarService=t,this.router=i,this.route=a,this.dialog=n,this.formBuilder=c,this.invoiceService=p,this.translate=Z,this.store=I,this.cdRef=v,this.myControl=new l.NI,this.options=["Microsoft","Google","Apple"],this.amntAre=new l.NI("",l.kI.required),this.savedInvoice={},this.invoiceSubTotal=0,this.invoiceTaxRate=0,this.invoiceDiscount=0,this.invoiceTotal=0,this.filteredDivisions=[],this.showNoItem=!1,this.showNoAccounts=!1,this.appearanceType="outline",this.flexGap="0px",this.amounts=[],this.disableFields=!0,this.minDate=new Date,this.showAddOption=!1,this.invoiceDetailForm=new l.cw({to:new l.NI("",l.kI.required),date:new l.NI("",l.kI.required),dueDate:new l.NI("",l.kI.required),num:new l.NI("",l.kI.required),ref:new l.NI("",l.kI.required)}),this.store.select(V.D6).subscribe(x=>{this.appearanceType=x.userPreference.appearanceType,this.direction=x.userPreference.direction,this.flexGap="outline"===this.appearanceType?"0px":"2px"})}ngOnInit(){var t,i;this.selectedId=this.route.snapshot.paramMap.get("id"),this.getTaxOptions(),this.getClients(),this.filteredClients=null===(i=null===(t=this.invoiceDetailForm)||void 0===t?void 0:t.get("to"))||void 0===i?void 0:i.valueChanges.pipe((0,f.O)(""),(0,d.U)(n=>"string"==typeof n?n:null==n?void 0:n.name),(0,d.U)(n=>{var c;return n?this._filterClient(n):null===(c=this.allClients)||void 0===c?void 0:c.slice()})),this.invoiceEditForm=this.formBuilder.group({invoice:this.formBuilder.array([])}),this.invoiceEditForm.disable(),this.invoiceDetailForm.disable();const a=localStorage.getItem("selectedItem");if(a&&(this.savedInvoice=JSON.parse(a)),this.savedInvoice&&(this.invoiceDetailForm.setValue(this.savedInvoice.details),this.savedInvoice.items.forEach((n,c)=>{this.addExistingOptions(n),this.ManageControl(c)})),this.savedInvoice.tallyValue){const n=this.savedInvoice.tallyValue;this.invoiceDiscount=n.discount,this.invoiceSubTotal=n.subTotal,this.invoiceTaxRate=n.tax_rate,this.invoiceTotal=n.total,this.amntAre.setValue(n.amontsAre)}this.minDueDate=this.addDays(new Date(this.savedInvoice.details.date),30),this.getItems(),this.getAccounts(),this.getDivision()}ngAfterViewInit(){this.cdRef.detectChanges()}addExistingOptions(t){this.invoiceEditForm.get("invoice").push(this.setExistingValues(t))}setExistingValues(t){return new l.cw({name:new l.NI({value:t.name,disabled:this.disableFields}),desc:new l.NI({value:t.desc,disabled:this.disableFields}),class:new l.NI({value:t.class,disabled:this.disableFields}),quantity:new l.NI({value:t.quantity,disabled:this.disableFields}),price:new l.NI({value:t.price,disabled:this.disableFields}),discount:new l.NI({value:t.discount,disabled:this.disableFields}),account:new l.NI({value:t.account,disabled:this.disableFields}),tax_rate:new l.NI({value:t.tax_rate,disabled:this.disableFields}),amount:new l.NI({value:t.amount,disabled:this.disableFields})})}createInvoiceFormGroup(){return new l.cw({name:new l.NI(""),desc:new l.NI(""),class:new l.NI(""),quantity:new l.NI(""),price:new l.NI(""),discount:new l.NI(""),account:new l.NI(""),tax_rate:new l.NI(""),amount:new l.NI("")})}_filter(t){const i=t.toLowerCase();return this.options.filter(a=>0===a.toLowerCase().indexOf(i))}OnInvoiceDateChange(t){}OnInvoiceDueDateChange(t){}createInvoiceCopy(){localStorage.setItem("selectedItem",JSON.stringify(this.savedInvoice)),localStorage.removeItem("accountTypeStatus"),localStorage.setItem("accountTypeStatus",JSON.stringify({isAdd:!1,isEdit:!1,isCopy:!0})),this.snackbarService.info("Invoice copy created successfully"),this.router.navigate(["./../../add"],{relativeTo:this.route})}deleteInvoiceCopy(){this.dialog.open(S.p,{disableClose:!0,direction:this.direction}).afterClosed().subscribe(i=>{"OK"===i&&(this.snackbarService.info("Invoice copy deleted successfully"),localStorage.removeItem("selectedItem"),this.router.navigate(["./../../../"],{relativeTo:this.route}))})}enableDisableFields(){this.disableFields=!this.disableFields,3===this.savedInvoice.tallyValue.status.id?this.invoiceEditForm.get("invoice").controls.forEach(i=>{var a,n;null===(a=i.get("desc"))||void 0===a||a.enable(),null===(n=i.get("class"))||void 0===n||n.enable()}):this.invoiceEditForm.enable(),this.invoiceDetailForm.enable()}copyInvoiceTo(){this.dialog.open(ue,{disableClose:!0,direction:this.direction}).afterClosed().subscribe(i=>{i&&(this.snackbarService.info("Invoice copied to "+i.value+" successfully"),this.router.navigate(["./../../../"],{relativeTo:this.route}))})}addCreditNote(){this.snackbarService.info("Added to Credit Note successfully"),this.router.navigate(["./../../../"],{relativeTo:this.route})}addInvoiceGroup(){const t=this.invoiceEditForm.get("invoice");t.push(this.createInvoiceFormGroup()),this.ManageControl(t.length-1)}removeFormGroup(t){const i=this.invoiceEditForm.get("invoice");i.length>1?i.removeAt(t):i.reset(),this.invceValueChnaged()}invceValueChnaged(){this.invoiceSubTotal=0,this.invoiceTaxRate=0,this.invoiceDiscount=0,this.invoiceTotal=0,this.invoiceEditForm.get("invoice").controls.forEach(i=>{var a,n,c,p,Z,I,v,x,q,J,Q,R,M;let re;if((null===(a=i.get("price"))||void 0===a?void 0:a.value)&&(null===(n=i.get("quantity"))||void 0===n?void 0:n.value)){let m=Number((null===(c=i.get("price"))||void 0===c?void 0:c.value)*Number(null===(p=i.get("quantity"))||void 0===p?void 0:p.value));if(m=Number(m.toFixed(2)),m>=0&&i.patchValue({amount:m}),(null===(Z=i.get("discount"))||void 0===Z?void 0:Z.value)&&(m-=m*(Number(null===(I=i.get("discount"))||void 0===I?void 0:I.value)/100),m=m,m=Number(m.toFixed(2)),m>=0&&i.patchValue({amount:m})),this.invoiceSubTotal=m+this.invoiceSubTotal,this.invoiceDiscount=Number(null===(v=i.get("discount"))||void 0===v?void 0:v.value)+this.invoiceDiscount,1===this.amntAre.value.id)(null===(x=i.get("tax_rate"))||void 0===x?void 0:x.value)>=0&&(re=m+Number(m*((null===(q=i.get("tax_rate"))||void 0===q?void 0:q.value)/100))),this.invoiceTaxRate=Number((m*((null===(J=i.get("tax_rate"))||void 0===J?void 0:J.value)/100)+this.invoiceTaxRate).toFixed(2)),this.invoiceDiscount=Number(null===(Q=i.get("discount"))||void 0===Q?void 0:Q.value)+this.invoiceDiscount,this.invoiceTotal=re+this.invoiceTotal,this.invoiceTotal=Number(this.invoiceTotal.toFixed(2));else if(2===this.amntAre.value.id){if((null===(R=i.get("tax_rate"))||void 0===R?void 0:R.value)>0){const _t=Number((m-m/(1+(null===(M=i.get("tax_rate"))||void 0===M?void 0:M.value)/100)).toFixed(2));this.invoiceTaxRate=_t+this.invoiceTaxRate}this.invoiceTotal=this.invoiceSubTotal}}})}compareFn(t,i){return t&&i?t.id===i.id:t===i}onAmountsChanged(t){this.invceValueChnaged()}getTaxOptions(){this.invoiceService.getTaxOption().subscribe(t=>{this.amounts=t})}getItems(){this.invoiceService.getAllItems().subscribe(t=>{this.allItems=t})}ManageControl(t){var i,a;const n=this.invoiceEditForm.get("invoice");this.filteredItems[t]=null===(i=n.at(t).get("name"))||void 0===i?void 0:i.valueChanges.pipe((0,f.O)(""),(0,d.U)(c=>"string"==typeof c?c:null==c?void 0:c.name),(0,d.U)(c=>{var p;return c?this._filterItems(c):null===(p=this.allItems)||void 0===p?void 0:p.splice()})),this.filteredAccounts[t]=null===(a=n.at(t).get("account"))||void 0===a?void 0:a.valueChanges.pipe((0,f.O)(""),(0,d.U)(c=>"string"==typeof c?c:null==c?void 0:c.name),(0,d.U)(c=>{var p;return c?this._filterAccount(c):null===(p=this.accounts)||void 0===p?void 0:p.slice()}))}onItemSelected(t,i){var a;(null===(a=null==t?void 0:t.option)||void 0===a?void 0:a.value)&&this.invoiceEditForm.get("invoice").controls[i].patchValue({desc:null==t?void 0:t.option.value.description,class:null==t?void 0:t.option.value.class,price:null==t?void 0:t.option.value.price,tax_rate:null==t?void 0:t.option.value.tax_rate,account:null==t?void 0:t.option.value.account})}_filterItems(t){const i=t.toLowerCase();return this.allItems.filter(n=>0===n.name.toLowerCase().indexOf(i))}_filterAccount(t){const i=t.toLowerCase(),a=this.accounts.filter(n=>0===n.name.toLowerCase().indexOf(i));return this.showNoAccounts=0===a.length,a}displayFn(t){return t&&t.name?t.name:""}_filterClient(t){const i=t.toLowerCase(),a=this.allClients.filter(n=>0===n.name.toLowerCase().indexOf(i));return this.showAddOption=!(a.length>0),a}getClients(){this.invoiceService.getAllClients().subscribe(t=>{this.allClients=t})}addCompany(){this.router.navigate(["/organization/company/add"])}getAccounts(){this.invoiceService.getAccounts().subscribe(t=>{this.accounts=t})}addDays(t,i){return new Date(t.getTime()+24*i*60*60*1e3)}blurInput(t,i){var a,n;const c=this.invoiceEditForm.get("invoice");"account"===t&&this.showNoAccounts?null===(a=c.at(i).get("account"))||void 0===a||a.setValue(""):"client"===t&&this.showAddOption&&(null===(n=this.invoiceDetailForm.get("to"))||void 0===n||n.setValue(""))}getDivision(){this.invoiceService.getDivision().subscribe(t=>{t.forEach(a=>{a.hasSubDivisions&&this.filteredDivisions.push(a)})})}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(Y.o),e.Y36(g.F0),e.Y36(g.gz),e.Y36(b.uw),e.Y36(l.qu),e.Y36(G),e.Y36(A.sK),e.Y36(B.yh),e.Y36(e.sBO))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-invoice-edit"]],decls:209,vars:153,consts:[[3,"title"],["fxLayout","row","fxLayoutGap","10px","fxLayoutAlign","end center","fxFlex","100%"],["fxLayoutGap","5px","fxLayout","row","fxLayoutAlign","start center"],[1,"warn-color"],["mat-raised-button","",3,"routerLink"],[1,"mat-icon-rtl-mirror"],["mat-raised-button",""],[1,"material-icons-outlined"],["mat-raised-button","","color","primary","aria-label","Example icon-button with a menu",3,"matMenuTriggerFor"],[1,"mat-icon-rtl-mirror","v-align-middle"],["menu1","matMenu"],["mat-menu-item","",3,"click"],["mat-menu-item","",3,"disabled","click"],["fxLayout","column","fxFlex","100%","fxFlexFill","",1,"p-2"],["fxLayout","row","fxLayoutGap","1%","fxLayoutAlign","stretch","fxFlex","100%",3,"formGroup"],["fxFlex","1 1 15","fxFlexFill","","fxLayout","column","fxLayoutAlign","stretch"],[3,"appearance"],["matInput","","aria-label","Number","matInput","","formControlName","to",3,"matAutocomplete","blur"],["class","mat-icon-rtl-mirror","matSuffix","",4,"ngIf"],["matSuffix","","mat-icon-button","",3,"click",4,"ngIf"],["autoActiveFirstOption","",3,"displayWith"],["autoInvceto","matAutocomplete"],[3,"value",4,"ngFor","ngForOf"],[4,"ngIf"],["matInput","","formControlName","date","autocomplete","off",3,"min","matDatepicker","dateChange"],["matSuffix","",3,"for"],["picker1",""],["matInput","","formControlName","dueDate","autocomplete","off",3,"min","matDatepicker","dateChange"],["picker2",""],["matPrefix",""],["matInput","","formControlName","num"],["matInput","","formControlName","ref"],["fxFlex","1 1 19","fxFlexFill","","fxLayout","column","fxLayoutAlign","end stretch"],["fxLayout","row","fxLayoutAlign","start center","fxLayoutGap","2px"],["mat-icon-button",""],[1,"mb-2"],["fxFlex","1 1 auto"],["fxLayout","column",1,"mb-2"],["fxFlex","1 1 20",3,"appearance"],["placeholder","Tax Inclusive",3,"formControl","disabled","compareWith","selectionChange"],["fxLayout","row","fxFlex","1 1 100%","fxLayoutAlign","start start"],["fxFlex","11.5"],["fxFlex","15"],["fxFlex","13.5"],["fxFlex","6.5"],["fxFlex","10.5"],["fxFlex","14.5"],["fxFlex","12.5"],["fxLayout","column","fxLayoutGap","2px","fxFlex","1 1 100%","fxFlexFill","",1,"mb-8",3,"formGroup"],["formArrayName","invoice","fxFlexFill","","fxLayout","column",4,"ngIf"],["fxLayout","column","fxLayoutAlign","start start","fxLayoutGap","2em","fxFlexFill","",1,"pt-2","pb-2","primary-color"],["fxLayout","row","fxFlex","1 1 10","fxLayoutAlign","start center",1,"cursor-pointer",3,"click"],["fxLayout","column"],["fxLayout","row","fxLayoutAlign","end center"],["fxFlex.lt-lg","1 1 60","fxFlex","1 1 70","fxFlex.gt-lg","1 1 80"],["fxLayoutAlign","end center"],["fxLayoutAlign","end end"],[3,"ngStyle","ngStyle.lg","ngStyle.gt-lg"],["fxLayout","row","fxLayoutAlign","end center",1,"mt-2"],["fxLayout","column","fxLayoutGap","1em",4,"ngIf"],["fxLayout","column","fxLayoutGap","1em"],["fxLayout","row","fxLayoutGap","0.5em","fxLayoutAlign","start end"],["fxLayout","column","fxFlexFill","","fxFlex","73"],["matInput","","rows","4"],["fxLayoutAlign","start start",1,"mb-4"],["mat-raised-button","","color","primary"],["matSuffix","",1,"mat-icon-rtl-mirror"],["matSuffix","","mat-icon-button","",3,"click"],[3,"value"],["formArrayName","invoice","fxFlexFill","","fxLayout","column"],["fxFlex","row","fxLayoutAlign","start start","class","field-appeance-outline",3,"fxLayoutGap","formGroupName",4,"ngFor","ngForOf"],["fxFlex","row","fxLayoutAlign","start start",1,"field-appeance-outline",3,"fxLayoutGap","formGroupName"],["fxFlex","1 1 11.5",1,"square-border",3,"appearance"],["matInput","","aria-label","Number","matInput","","formControlName","name",3,"matAutocomplete"],["autoActiveFirstOption","",3,"displayWith","optionSelected"],["autoItem","matAutocomplete"],["fxFlex","1 1 15",1,"square-border",3,"appearance"],["matInput","","formControlName","desc"],["fxFlex","1 1 13.5",1,"square-border",3,"appearance"],["formControlName","class",3,"compareWith"],["fxFlex","1 1 6.5",1,"square-border",3,"appearance"],["type","number","min","0","matInput","","formControlName","quantity"],["fxFlex","1 1 10.5",1,"square-border",3,"appearance"],["type","number","min","0","matInput","","formControlName","price",3,"keyup"],["type","number","min","0","max","100","matInput","","formControlName","discount",3,"keyup"],[1,"las","la-percent"],["fxFlex","1 1 14.5",1,"square-border",3,"appearance"],["matInput","","aria-label","Number","matInput","","formControlName","account",3,"matAutocomplete","blur"],[3,"displayWith"],["autoAccount","matAutocomplete"],["type","number","min","0","matInput","","formControlName","tax_rate",3,"keyup"],["disabled","true","fxFlex","1 1 12.5",1,"square-border",3,"appearance"],["matInput","","min","0","formControlName","amount"],["matPrefix","",1,"mat-icon-rtl-mirror"],[1,"las","la-dollar-sign"],["mat-icon-button","","fxFlex","1 1 auto",3,"click"],["fxLayout","row","fxLayoutGap","2em","fxLayoutAlign","start center","fxFlexFill","","fxFlex","80"],["fxFlex","16.5","fxLayout","column"],["matInput","",3,"disabled"],["fxFlex","16.5","fxLayoutAlign","start end"],["mat-raised-button","","color","primary",3,"disabled"]],template:function(t,i){if(1&t&&(e.TgZ(0,"app-page"),e.TgZ(1,"app-page-header",0),e.ALo(2,"translate"),e.TgZ(3,"div",1),e.TgZ(4,"div",2),e.TgZ(5,"mat-label",3),e._uU(6),e.ALo(7,"translate"),e.qZA(),e.TgZ(8,"button",4),e.TgZ(9,"mat-icon",5),e._uU(10,"keyboard_backspace"),e.qZA(),e.TgZ(11,"span"),e._uU(12),e.ALo(13,"translate"),e.qZA(),e.qZA(),e.TgZ(14,"button",6),e.TgZ(15,"i",7),e._uU(16,"mail"),e.qZA(),e.TgZ(17,"span"),e._uU(18),e.ALo(19,"translate"),e.qZA(),e.qZA(),e.TgZ(20,"button",6),e.TgZ(21,"i",7),e._uU(22,"print"),e.qZA(),e.TgZ(23,"span"),e._uU(24),e.ALo(25,"translate"),e.qZA(),e.qZA(),e.TgZ(26,"button",8),e.TgZ(27,"mat-label"),e._uU(28),e.ALo(29,"translate"),e.TgZ(30,"mat-icon",9),e._uU(31," keyboard_arrow_down "),e.qZA(),e.qZA(),e.qZA(),e.TgZ(32,"mat-menu",null,10),e.TgZ(34,"button",11),e.NdJ("click",function(){return i.createInvoiceCopy()}),e.TgZ(35,"span"),e._uU(36),e.ALo(37,"translate"),e.qZA(),e.qZA(),e.TgZ(38,"button",11),e.NdJ("click",function(){return i.deleteInvoiceCopy()}),e.TgZ(39,"span"),e._uU(40),e.ALo(41,"translate"),e.qZA(),e.qZA(),e.TgZ(42,"button",12),e.NdJ("click",function(){return i.enableDisableFields()}),e.TgZ(43,"span"),e._uU(44),e.ALo(45,"translate"),e.qZA(),e.qZA(),e.TgZ(46,"button",11),e.NdJ("click",function(){return i.copyInvoiceTo()}),e.TgZ(47,"span"),e._uU(48),e.ALo(49,"translate"),e.qZA(),e.qZA(),e.TgZ(50,"button",11),e.NdJ("click",function(){return i.addCreditNote()}),e.TgZ(51,"span"),e._uU(52),e.ALo(53,"translate"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(54,"app-page-body"),e.TgZ(55,"div",13),e.TgZ(56,"form",14),e.TgZ(57,"div",15),e.TgZ(58,"mat-form-field",16),e.TgZ(59,"mat-label"),e._uU(60),e.ALo(61,"translate"),e.qZA(),e.TgZ(62,"input",17),e.NdJ("blur",function(){return i.blurInput("client",null)}),e.qZA(),e.YNc(63,pe,2,0,"mat-icon",18),e.YNc(64,me,3,0,"button",19),e.TgZ(65,"mat-autocomplete",20,21),e.YNc(67,de,2,2,"mat-option",22),e.ALo(68,"async"),e.qZA(),e.YNc(69,fe,2,1,"mat-error",23),e.qZA(),e.qZA(),e.TgZ(70,"div",15),e.TgZ(71,"mat-form-field",16),e.TgZ(72,"mat-label"),e._uU(73),e.ALo(74,"translate"),e.qZA(),e.TgZ(75,"input",24),e.NdJ("dateChange",function(n){return i.OnInvoiceDateChange(n)}),e.qZA(),e._UZ(76,"mat-datepicker-toggle",25),e._UZ(77,"mat-datepicker",null,26),e.YNc(79,Te,3,2,"mat-error",23),e.qZA(),e.qZA(),e.TgZ(80,"div",15),e.TgZ(81,"mat-form-field",16),e.TgZ(82,"mat-label"),e._uU(83),e.ALo(84,"translate"),e.qZA(),e.TgZ(85,"input",27),e.NdJ("dateChange",function(n){return i.OnInvoiceDueDateChange(n)}),e.qZA(),e._UZ(86,"mat-datepicker-toggle",25),e._UZ(87,"mat-datepicker",null,28),e.YNc(89,xe,3,2,"mat-error",23),e.qZA(),e.qZA(),e.TgZ(90,"div",15),e.TgZ(91,"mat-form-field",16),e.TgZ(92,"mat-label"),e._uU(93),e.ALo(94,"translate"),e.qZA(),e.TgZ(95,"span",29),e._uU(96,"INV- \xa0"),e.qZA(),e._UZ(97,"input",30),e.YNc(98,Ie,2,1,"mat-error",23),e.qZA(),e.qZA(),e.TgZ(99,"div",15),e.TgZ(100,"mat-form-field",16),e.TgZ(101,"mat-label"),e._uU(102),e.ALo(103,"translate"),e.qZA(),e._UZ(104,"input",31),e.YNc(105,Ne,2,1,"mat-error",23),e.qZA(),e.qZA(),e.TgZ(106,"div",32),e.TgZ(107,"div",33),e.TgZ(108,"button",34),e.TgZ(109,"mat-icon",5),e._uU(110,"attach_file"),e.qZA(),e.qZA(),e.TgZ(111,"span"),e._uU(112),e.ALo(113,"translate"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(114,"div",35),e._UZ(115,"span",36),e.TgZ(116,"div",37),e.TgZ(117,"mat-label"),e._uU(118),e.ALo(119,"translate"),e.qZA(),e.TgZ(120,"mat-form-field",38),e.TgZ(121,"mat-select",39),e.NdJ("selectionChange",function(n){return i.onAmountsChanged(n)}),e.YNc(122,ye,3,4,"mat-option",22),e.qZA(),e.YNc(123,be,2,1,"mat-error",23),e.qZA(),e.qZA(),e.qZA(),e.TgZ(124,"div",40),e.TgZ(125,"mat-label",41),e._uU(126),e.ALo(127,"translate"),e.qZA(),e.TgZ(128,"mat-label",42),e._uU(129),e.ALo(130,"translate"),e.qZA(),e.TgZ(131,"mat-label",43),e._uU(132),e.ALo(133,"translate"),e.qZA(),e.TgZ(134,"mat-label",44),e._uU(135),e.ALo(136,"translate"),e.qZA(),e.TgZ(137,"mat-label",45),e._uU(138),e.ALo(139,"translate"),e.qZA(),e.TgZ(140,"mat-label",44),e._uU(141),e.ALo(142,"translate"),e.qZA(),e.TgZ(143,"mat-label",46),e._uU(144),e.ALo(145,"translate"),e.qZA(),e.TgZ(146,"mat-label",44),e._uU(147),e.ALo(148,"translate"),e.qZA(),e.TgZ(149,"mat-label",47),e._uU(150),e.ALo(151,"translate"),e.qZA(),e.qZA(),e.TgZ(152,"form",48),e.YNc(153,Ee,2,1,"div",49),e.qZA(),e.TgZ(154,"div",50),e.TgZ(155,"div",51),e.NdJ("click",function(){return i.addInvoiceGroup()}),e.TgZ(156,"mat-icon",5),e._uU(157,"add_circle_outline"),e.qZA(),e.TgZ(158,"mat-label"),e._uU(159),e.ALo(160,"translate"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(161,"div",52),e.TgZ(162,"div",53),e._UZ(163,"span",54),e.TgZ(164,"mat-label",55),e._uU(165),e.ALo(166,"translate"),e.qZA(),e._UZ(167,"span",36),e.TgZ(168,"mat-label"),e.TgZ(169,"span"),e._uU(170,"$"),e.qZA(),e._uU(171),e.qZA(),e.qZA(),e.TgZ(172,"div",53),e._UZ(173,"span",54),e.TgZ(174,"mat-label",55),e._uU(175),e.ALo(176,"translate"),e.qZA(),e._UZ(177,"span",36),e.TgZ(178,"mat-label"),e.TgZ(179,"span"),e._uU(180,"$"),e.qZA(),e._uU(181),e.qZA(),e.qZA(),e.TgZ(182,"div",56),e._UZ(183,"hr",57),e.qZA(),e.TgZ(184,"div",58),e._UZ(185,"span",54),e.TgZ(186,"mat-label",55),e._uU(187),e.ALo(188,"translate"),e.qZA(),e._UZ(189,"span",36),e.TgZ(190,"mat-label"),e.TgZ(191,"span"),e._uU(192,"$"),e.qZA(),e._uU(193),e.qZA(),e.qZA(),e.TgZ(194,"div",56),e._UZ(195,"hr",57),e.qZA(),e.qZA(),e.YNc(196,Se,33,27,"div",59),e.TgZ(197,"div",60),e.TgZ(198,"h3"),e._uU(199),e.ALo(200,"translate"),e.qZA(),e.TgZ(201,"div",61),e.TgZ(202,"div",62),e.TgZ(203,"mat-form-field",16),e._UZ(204,"textarea",63),e.qZA(),e.qZA(),e.TgZ(205,"span",64),e.TgZ(206,"button",65),e._uU(207),e.ALo(208,"translate"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&t){const a=e.MAs(33),n=e.MAs(66),c=e.MAs(78),p=e.MAs(88);e.xp6(1),e.Q6J("title",e.lcZ(2,78,"ACCOUNT.INVOICE.EDIT")),e.xp6(5),e.AsE("",e.lcZ(7,80,"GRID.STATUS")," : ",null==i.savedInvoice||null==i.savedInvoice.tallyValue||null==i.savedInvoice.tallyValue.status?null:i.savedInvoice.tallyValue.status.value," "),e.xp6(2),e.Q6J("routerLink",e.DdM(146,we)),e.xp6(4),e.Oqu(e.lcZ(13,82,"BUTTON.BACK")),e.xp6(6),e.Oqu(e.lcZ(19,84,"BUTTON.EMAIL")),e.xp6(6),e.Oqu(e.lcZ(25,86,"BUTTON.PRINT-PDF")),e.xp6(2),e.Q6J("matMenuTriggerFor",a),e.xp6(2),e.hij("",e.lcZ(29,88,"ACCOUNTS.INVOICE.OPTIONS")," "),e.xp6(8),e.Oqu(e.lcZ(37,90,"ACCOUNTS.CREATE-COPY")),e.xp6(4),e.Oqu(e.lcZ(41,92,"ACCOUNTS.VOID")),e.xp6(2),e.Q6J("disabled",4===(null==i.savedInvoice||null==i.savedInvoice.tallyValue||null==i.savedInvoice.tallyValue.status?null:i.savedInvoice.tallyValue.status.id)),e.xp6(2),e.Oqu(e.lcZ(45,94,"ACCOUNTS.EDIT")),e.xp6(4),e.Oqu(e.lcZ(49,96,"ACCOUNTS.COPY-TO")),e.xp6(4),e.Oqu(e.lcZ(53,98,"ACCOUNTS.ADD-CREDIT-NOTE")),e.xp6(4),e.Q6J("formGroup",i.invoiceDetailForm),e.xp6(2),e.Q6J("appearance",i.appearanceType),e.xp6(2),e.Oqu(e.lcZ(61,100,"ACCOUNTS.INVOICE.TO.TITLE")),e.xp6(2),e.Q6J("matAutocomplete",n),e.xp6(1),e.Q6J("ngIf",!i.showAddOption),e.xp6(1),e.Q6J("ngIf",i.showAddOption&&i.invoiceDetailForm.controls.to.value),e.xp6(1),e.Q6J("displayWith",i.displayFn),e.xp6(2),e.Q6J("ngForOf",e.lcZ(68,102,i.filteredClients)),e.xp6(2),e.Q6J("ngIf",!!i.invoiceDetailForm.controls.to.invalid&&!!i.invoiceDetailForm.controls.to.touched),e.xp6(2),e.Q6J("appearance",i.appearanceType),e.xp6(2),e.Oqu(e.lcZ(74,104,"ACCOUNTS.INVOICE.DATE.TITLE")),e.xp6(2),e.Q6J("min",i.minDate)("matDatepicker",c),e.xp6(1),e.Q6J("for",c),e.xp6(3),e.Q6J("ngIf",!!i.invoiceDetailForm.controls.date.invalid&&!!i.invoiceDetailForm.controls.date.touched),e.xp6(2),e.Q6J("appearance",i.appearanceType),e.xp6(2),e.Oqu(e.lcZ(84,106,"ACCOUNTS.DUE-DATE.TITLE")),e.xp6(2),e.Q6J("min",i.minDueDate)("matDatepicker",p),e.xp6(1),e.Q6J("for",p),e.xp6(3),e.Q6J("ngIf",!!i.invoiceDetailForm.controls.dueDate.invalid&&!!i.invoiceDetailForm.controls.dueDate.touched),e.xp6(2),e.Q6J("appearance",i.appearanceType),e.xp6(2),e.Oqu(e.lcZ(94,108,"ACCOUNTS.INVOICE.NUMBER.TITLE")),e.xp6(5),e.Q6J("ngIf",!!i.invoiceDetailForm.controls.num.invalid&&!!i.invoiceDetailForm.controls.num.touched),e.xp6(2),e.Q6J("appearance",i.appearanceType),e.xp6(2),e.Oqu(e.lcZ(103,110,"ACCOUNTS.REFERENCE")),e.xp6(3),e.Q6J("ngIf",!!i.invoiceDetailForm.controls.ref.invalid&&!!i.invoiceDetailForm.controls.ref.touched),e.xp6(7),e.hij("",e.lcZ(113,112,"ACCOUNTS.ATTACHMENT")," (0)"),e.xp6(6),e.Oqu(e.lcZ(119,114,"ACCOUNTS.AMOUNTS-ARE.TITLE")),e.xp6(2),e.Q6J("appearance",i.appearanceType),e.xp6(1),e.Q6J("formControl",i.amntAre)("disabled",i.disableFields)("compareWith",i.compareFn),e.xp6(1),e.Q6J("ngForOf",i.amounts),e.xp6(1),e.Q6J("ngIf",!!i.amntAre.invalid&&!!i.amntAre.touched),e.xp6(3),e.Oqu(e.lcZ(127,116,"ACCOUNTS.ITEM")),e.xp6(3),e.Oqu(e.lcZ(130,118,"ACCOUNTS.DESCRIPTION")),e.xp6(3),e.Oqu(e.lcZ(133,120,"ACCOUNTS.CLASS")),e.xp6(3),e.Oqu(e.lcZ(136,122,"ACCOUNTS.QUANTITY")),e.xp6(3),e.Oqu(e.lcZ(139,124,"ACCOUNTS.UNIT-PRICE")),e.xp6(3),e.Oqu(e.lcZ(142,126,"ACCOUNTS.DISCOUNT")),e.xp6(3),e.Oqu(e.lcZ(145,128,"ACCOUNTS.ACCOUNT")),e.xp6(3),e.Oqu(e.lcZ(148,130,"ACCOUNTS.TAX-RATE")),e.xp6(3),e.Oqu(e.lcZ(151,132,"ACCOUNTS.AMOUNT")),e.xp6(2),e.Q6J("formGroup",i.invoiceEditForm),e.xp6(1),e.Q6J("ngIf",i.invoiceEditForm),e.xp6(6),e.Oqu(e.lcZ(160,134,"ACCOUNTS.ADD")),e.xp6(6),e.Oqu(e.lcZ(166,136,"ACCOUNTS.SUB-TOTAL")),e.xp6(6),e.hij("",i.invoiceSubTotal?i.invoiceSubTotal:"0.00"," "),e.xp6(4),e.Oqu(e.lcZ(176,138,"ACCOUNTS.TAX")),e.xp6(6),e.hij(" ",i.invoiceTaxRate?i.invoiceTaxRate:"0.00"," "),e.xp6(2),e.Q6J("ngStyle",e.DdM(147,ee))("ngStyle.lg",e.DdM(148,te))("ngStyle.gt-lg",e.DdM(149,ie)),e.xp6(4),e.Oqu(e.lcZ(188,140,"ACCOUNTS.TOTAL")),e.xp6(6),e.Oqu(i.invoiceTotal?i.invoiceTotal:"0.00"),e.xp6(2),e.Q6J("ngStyle",e.DdM(150,ee))("ngStyle.lg",e.DdM(151,te))("ngStyle.gt-lg",e.DdM(152,ie)),e.xp6(1),e.Q6J("ngIf",5===(null==i.savedInvoice||null==i.savedInvoice.tallyValue||null==i.savedInvoice.tallyValue.status?null:i.savedInvoice.tallyValue.status.id)||3===(null==i.savedInvoice||null==i.savedInvoice.tallyValue||null==i.savedInvoice.tallyValue.status?null:i.savedInvoice.tallyValue.status.id)),e.xp6(3),e.Oqu(e.lcZ(200,142,"ACCOUNTS.AUDIT-HISTORY-AND-NOTES")),e.xp6(4),e.Q6J("appearance",i.appearanceType),e.xp6(4),e.Oqu(e.lcZ(208,144,"BUTTON.SAVE"))}},directives:[P.I,j.q,_.xw,_.SQ,_.Wh,_.yH,T.hX,w.lW,g.rH,H.Hw,N.p6,N.VK,N.OP,W.H,_.s9,l._Y,l.JL,l.sg,T.KE,$.Nt,l.Fj,O.ZL,l.JJ,l.u,u.O5,O.XC,u.sg,y.hl,y.nW,T.R9,y.Mq,T.qo,X.gD,l.oH,u.PC,K.Zl,z.ey,T.TO,l.CE,l.x0,l.qQ,l.wV,l.Fd],pipes:[A.X$,u.Ov],styles:[""]}),o})();var Qe=s(7238);function Re(o,r){if(1&o){const t=e.EpF();e.TgZ(0,"button",58),e.NdJ("click",function(){const n=e.CHM(t).$implicit;return e.oxw().Approval(n)}),e.TgZ(1,"span"),e._uU(2),e.qZA(),e.qZA()}if(2&o){const t=r.$implicit;e.xp6(2),e.hij(" ",t.value,"")}}function Me(o,r){if(1&o){const t=e.EpF();e.TgZ(0,"div"),e.TgZ(1,"button",59),e.NdJ("click",function(){const n=e.CHM(t).$implicit;return e.oxw().save(n)}),e.TgZ(2,"span"),e._uU(3),e.qZA(),e.qZA(),e.qZA()}if(2&o){const t=r.$implicit,i=e.oxw();e.xp6(1),e.Q6J("disabled",5===t.id&&!i.enableVoidButton),e.xp6(2),e.hij(" ",t.value,"")}}function Ve(o,r){1&o&&(e.TgZ(0,"mat-icon",60),e._uU(1,"search"),e.qZA())}function ke(o,r){if(1&o){const t=e.EpF();e.TgZ(0,"button",61),e.NdJ("click",function(){return e.CHM(t),e.oxw().addCompany()}),e.TgZ(1,"mat-icon",62),e._uU(2,"add_circle_outline"),e.qZA(),e.qZA()}if(2&o){const t=e.oxw();e.xp6(1),e.Q6J("matTooltip",t.invceTovalue)}}function Ye(o,r){if(1&o&&(e.TgZ(0,"mat-option",63),e._uU(1),e.qZA()),2&o){const t=r.$implicit;e.Q6J("value",t),e.xp6(1),e.hij(" ",t.name," ")}}function Ge(o,r){1&o&&(e.TgZ(0,"div"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&o&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"ACCOUNTS.INVOICE.TO.ERROR.REQUIRED")," "))}function Be(o,r){if(1&o&&(e.TgZ(0,"mat-error",64),e.YNc(1,Ge,3,3,"div",65),e.qZA()),2&o){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",!(null==t.invoiceDetailForm.controls.to.errors||!t.invoiceDetailForm.controls.to.errors.required))}}function Pe(o,r){1&o&&(e.TgZ(0,"div"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&o&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"ACCOUNTS.INVOICE.DATE.ERROR.REQUIRED")," "))}function je(o,r){1&o&&(e.TgZ(0,"div"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&o&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"ACCOUNTS.INVOICE.DATE.ERROR.INVALID")," "))}function He(o,r){if(1&o&&(e.TgZ(0,"mat-error",64),e.YNc(1,Pe,3,3,"div",65),e.YNc(2,je,3,3,"div",65),e.qZA()),2&o){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",!(null==t.invoiceDetailForm.controls.date.errors||!t.invoiceDetailForm.controls.date.errors.required)),e.xp6(1),e.Q6J("ngIf",!!t.invoiceDetailForm.controls.date.hasError("matDatepickerMin"))}}function We(o,r){1&o&&(e.TgZ(0,"div"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&o&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"ACCOUNTS.DUE-DATE.ERROR.REQUIRED")," "))}function $e(o,r){1&o&&(e.TgZ(0,"div"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&o&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"ACCOUNTS.DUE-DATE.ERROR.INVALID")," "))}function Xe(o,r){if(1&o&&(e.TgZ(0,"mat-error",64),e.YNc(1,We,3,3,"div",65),e.YNc(2,$e,3,3,"div",65),e.qZA()),2&o){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",!(null==t.invoiceDetailForm.controls.dueDate.errors||!t.invoiceDetailForm.controls.dueDate.errors.required)),e.xp6(1),e.Q6J("ngIf",!!t.invoiceDetailForm.controls.dueDate.hasError("matDatepickerMin"))}}function Ke(o,r){1&o&&(e.TgZ(0,"div"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&o&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"ACCOUNTS.INVOICE.NUMBER.ERROR.REQUIRED")," "))}function ze(o,r){if(1&o&&(e.TgZ(0,"mat-error",64),e.YNc(1,Ke,3,3,"div",65),e.qZA()),2&o){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",!(null==t.invoiceDetailForm.controls.num.errors||!t.invoiceDetailForm.controls.num.errors.required))}}function et(o,r){1&o&&(e.TgZ(0,"div"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&o&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"ACCOUNTS.REF.ERROR.REQUIRED")," "))}function tt(o,r){if(1&o&&(e.TgZ(0,"mat-error",64),e.YNc(1,et,3,3,"div",65),e.qZA()),2&o){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",!(null==t.invoiceDetailForm.controls.ref.errors||!t.invoiceDetailForm.controls.ref.errors.required))}}function it(o,r){if(1&o&&(e.TgZ(0,"mat-option",63),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&o){const t=r.$implicit;e.Q6J("value",t),e.xp6(1),e.hij(" ",e.lcZ(2,2,t.display_name)," ")}}function ot(o,r){1&o&&(e.TgZ(0,"div"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&o&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"ACCOUNTS.AMOUNTS-ARE.ERROR.REQUIRED")," "))}function nt(o,r){if(1&o&&(e.TgZ(0,"mat-error",64),e.YNc(1,ot,3,3,"div",65),e.qZA()),2&o){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",!(null==t.amntAre.errors||!t.amntAre.errors.required))}}function at(o,r){if(1&o&&(e.TgZ(0,"mat-option",63),e._uU(1),e.qZA()),2&o){const t=r.$implicit;e.Q6J("value",t),e.xp6(1),e.hij(" ",t.name," ")}}function lt(o,r){1&o&&(e.TgZ(0,"mat-option"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&o&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"ACCOUNTS.NO-ITEM-FOUND")))}function rt(o,r){if(1&o&&(e.TgZ(0,"mat-option",63),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&o){const t=r.$implicit;e.Q6J("value",t),e.xp6(1),e.hij(" ",e.lcZ(2,2,t.display_name)," ")}}function ct(o,r){if(1&o&&(e.TgZ(0,"mat-option",63),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&o){const t=r.$implicit;e.Q6J("value",t),e.xp6(1),e.hij(" ",e.lcZ(2,2,t.display_name)," ")}}function st(o,r){if(1&o){const t=e.EpF();e.TgZ(0,"div",68),e.TgZ(1,"mat-form-field",69),e._UZ(2,"input",70),e.TgZ(3,"mat-autocomplete",71,72),e.NdJ("optionSelected",function(a){const c=e.CHM(t).index;return e.oxw(2).onItemSelected(a,c)}),e.YNc(5,at,2,2,"mat-option",20),e.ALo(6,"async"),e.YNc(7,lt,3,3,"mat-option",65),e.qZA(),e.qZA(),e.TgZ(8,"mat-form-field",73),e._UZ(9,"input",74),e.qZA(),e.TgZ(10,"mat-form-field",75),e.TgZ(11,"mat-select",76),e.YNc(12,rt,3,4,"mat-option",20),e.qZA(),e.qZA(),e.TgZ(13,"mat-form-field",77),e.TgZ(14,"input",78),e.NdJ("keyup",function(){return e.CHM(t),e.oxw(2).invceValueChnaged()}),e.qZA(),e.qZA(),e.TgZ(15,"mat-form-field",79),e.TgZ(16,"input",80),e.NdJ("keyup",function(){return e.CHM(t),e.oxw(2).invceValueChnaged()}),e.qZA(),e.qZA(),e.TgZ(17,"mat-form-field",77),e.TgZ(18,"input",81),e.NdJ("keyup",function(){return e.CHM(t),e.oxw(2).invceValueChnaged()}),e.qZA(),e.TgZ(19,"mat-icon",60),e._UZ(20,"i",82),e.qZA(),e.qZA(),e.TgZ(21,"mat-form-field",83),e.TgZ(22,"input",84),e.NdJ("blur",function(){const n=e.CHM(t).index;return e.oxw(2).blurInput("account",n)}),e.qZA(),e.TgZ(23,"mat-autocomplete",85,86),e.YNc(25,ct,3,4,"mat-option",20),e.ALo(26,"async"),e.qZA(),e.qZA(),e.TgZ(27,"mat-form-field",77),e.TgZ(28,"input",87),e.NdJ("keyup",function(){return e.CHM(t),e.oxw(2).invceValueChnaged()}),e.qZA(),e.TgZ(29,"mat-icon",60),e._UZ(30,"i",82),e.qZA(),e.qZA(),e.TgZ(31,"mat-form-field",88),e._UZ(32,"input",89),e.TgZ(33,"mat-icon",90),e._UZ(34,"i",91),e.qZA(),e.qZA(),e.TgZ(35,"button",92),e.NdJ("click",function(){const n=e.CHM(t).index;return e.oxw(2).removeFormGroup(n)}),e.TgZ(36,"mat-icon",3),e._uU(37,"close"),e.qZA(),e.qZA(),e.qZA()}if(2&o){const t=r.index,i=e.MAs(4),a=e.MAs(24),n=e.oxw(2);e.Q6J("fxLayoutGap",n.flexGap)("formGroupName",t),e.xp6(1),e.Q6J("appearance",n.appearanceType),e.xp6(1),e.Q6J("matAutocomplete",i),e.xp6(1),e.Q6J("displayWith",n.displayFn),e.xp6(2),e.Q6J("ngForOf",e.lcZ(6,20,n.filteredItems[t])),e.xp6(2),e.Q6J("ngIf",n.showNoItem),e.xp6(1),e.Q6J("appearance",n.appearanceType),e.xp6(2),e.Q6J("appearance",n.appearanceType),e.xp6(1),e.Q6J("compareWith",n.compareFn),e.xp6(1),e.Q6J("ngForOf",n.filteredDivisions),e.xp6(1),e.Q6J("appearance",n.appearanceType),e.xp6(2),e.Q6J("appearance",n.appearanceType),e.xp6(2),e.Q6J("appearance",n.appearanceType),e.xp6(4),e.Q6J("appearance",n.appearanceType),e.xp6(1),e.Q6J("matAutocomplete",a),e.xp6(1),e.Q6J("displayWith",n.displayFn),e.xp6(2),e.Q6J("ngForOf",e.lcZ(26,22,n.filteredAccounts[t])),e.xp6(2),e.Q6J("appearance",n.appearanceType),e.xp6(4),e.Q6J("appearance",n.appearanceType)}}function ut(o,r){if(1&o&&(e.TgZ(0,"div",66),e.YNc(1,st,38,24,"div",67),e.qZA()),2&o){const t=e.oxw();e.xp6(1),e.Q6J("ngForOf",t.invoiceForm.get("invoice").controls)}}function pt(o,r){if(1&o&&(e.TgZ(0,"div",93),e.TgZ(1,"h3"),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.TgZ(4,"div",94),e.TgZ(5,"div",95),e.TgZ(6,"mat-form-field",14),e._UZ(7,"textarea",96),e.qZA(),e.qZA(),e.TgZ(8,"span",97),e.TgZ(9,"button",98),e._uU(10),e.ALo(11,"translate"),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&o){const t=e.oxw();e.xp6(2),e.Oqu(e.lcZ(3,3,"ACCOUNTS.AUDIT-HISTORY-AND-NOTES")),e.xp6(4),e.Q6J("appearance",t.appearanceType),e.xp6(4),e.Oqu(e.lcZ(11,5,"BUTTON.SAVE"))}}const mt=function(){return["../../"]},oe=function(){return{width:"40%"}},ne=function(){return{width:"30%"}},ae=function(){return{width:"20%"}},dt=[{path:"new",component:(()=>{class o{constructor(t,i,a,n,c,p,Z,I){if(this.formBuilder=t,this.snackbarService=i,this.router=a,this.activatedRoute=n,this.invoiceService=c,this.translate=p,this.cdRef=Z,this.store=I,this.amntAre=new l.NI("",l.kI.required),this.options=["Microsoft","Google","Apple"],this.invoiceSubTotal=0,this.invoiceTaxRate=0,this.invoiceDiscount=0,this.invoiceTotal=0,this.enableSaveButton=!1,this.status={},this.invoiceSavedTypes=[{id:1,value:"Save as draft",label:"Invoice Saved as draft successfully"},{id:2,value:"Save & Continue editing",label:" Invoice Saved successfully, please continue editing"},{id:3,value:"Save & Submit for approval",label:"Invoice Saved and  submitted for approval successfully"},{id:4,value:"Save & Add another",label:"Invoice Saved successfully, please  add another"},{id:5,value:"Void",label:"Invoice deleted successfully"}],this.invoiceApporvalTypes=[{id:1,value:"Approve ",label:"Invoice approved susscesfully"},{id:2,value:"Approve & Add Another",label:"Invoice approved, please add another"},{id:3,value:"Approve & Print ",label:"Invoice approved, print in process"}],this.invalidInvoiceDate=!1,this.invalidInvoiceDueDate=!1,this.showHistory=!1,this.minDate=new Date,this.enableVoidButton=!1,this.amounts=[],this.showAddOption=!1,this.filteredItems=[],this.filteredAccounts=[],this.filteredDivisions=[],this.showNoItem=!1,this.showNoAccounts=!1,this.appearanceType="outline",this.flexGap="0px",this.invoiceForm=this.formBuilder.group({invoice:this.formBuilder.array([this.createInvoiceFormGroup()])}),this.invoiceDetailForm=new l.cw({to:new l.NI("",l.kI.required),date:new l.NI("",l.kI.required),dueDate:new l.NI("",l.kI.required),num:new l.NI("",l.kI.required),ref:new l.NI("")}),this.savedInvoiceInLocal=JSON.parse(localStorage.getItem("selectedItem")),this.invoiceCreateStatus=JSON.parse(localStorage.getItem("accountTypeStatus")),this.invoiceCreateStatus.isCopy||this.invoiceCreateStatus.isEdit){if(this.enableVoidButton=!0,this.savedInvoiceInLocal&&(this.enableSaveButton=!0,this.invoiceForm.get("invoice").removeAt(0),this.invoiceDetailForm.setValue(this.savedInvoiceInLocal.details),this.savedInvoiceInLocal.items.forEach((x,q)=>{this.addExistingOptions(x),this.ManageControlItem(q),this.ManageControlAccount(q)}),this.invoiceCreateStatus.isCopy?(this.invoiceDetailForm.patchValue({date:"",dueDate:"",num:""}),this.invoiceDetailForm.get("dueDate").markAsTouched(),this.invoiceDetailForm.get("date").markAsTouched(),this.invoiceDetailForm.get("num").markAsTouched()):this.invoiceCreateStatus.isEdit&&(this.showHistory=!0,this.invoiceDetailForm.get("dueDate").markAsTouched(),this.invoiceDetailForm.get("date").markAsTouched())),this.savedInvoiceInLocal.tallyValue){const v=this.savedInvoiceInLocal.tallyValue;this.invoiceDiscount=v.discount,this.invoiceSubTotal=v.subTotal,this.invoiceTaxRate=v.tax_rate,this.invoiceTotal=v.total,this.amntAre.setValue(v.amontsAre)}}else this.pushFormGroups(),this.invoiceDetailForm.get("num").setValue(111),this.invoiceDetailForm.get("date").setValue(this.minDate),this.minDueDate=this.addDays(this.minDate,30),this.invoiceDetailForm.get("dueDate").setValue(this.minDueDate);this.store.select(V.D6).subscribe(v=>{this.appearanceType=v.userPreference.appearanceType,this.flexGap="outline"===this.appearanceType?"0px":"2px"})}ngAfterViewInit(){this.cdRef.detectChanges()}addExistingOptions(t){this.invoiceForm.get("invoice").push(this.setExistingValues(t))}setExistingValues(t){return"string"==typeof t.name&&(t.name={name:t.name}),new l.cw({name:new l.NI(t.name),desc:new l.NI(t.desc),class:new l.NI(t.class),quantity:new l.NI(t.quantity),price:new l.NI(t.price),discount:new l.NI(t.discount),account:new l.NI(t.account),tax_rate:new l.NI(t.tax_rate),amount:new l.NI(t.amount)})}ngOnInit(){this.getTaxOptions(),this.getItems(),this.getClients(),this.getAccounts(),this.getDivision()}addInvoiceGroup(t){if("new"===t){const i=this.invoiceForm.get("invoice");i.push(this.createInvoiceFormGroup()),this.ManageControlItem(i.length-1),this.ManageControlAccount(i.length-1)}else this.invoiceForm.get("invoice").push(this.createInvoiceFormGroup())}pushFormGroups(){for(let t=0;t<4;t++)this.addInvoiceGroup(t)}createInvoiceFormGroup(){return new l.cw({name:new l.NI({}),desc:new l.NI(""),class:new l.NI(""),quantity:new l.NI(null),price:new l.NI(null),discount:new l.NI(0),account:new l.NI(""),tax_rate:new l.NI(0),amount:new l.NI(null)})}removeFormGroup(t){const i=this.invoiceForm.get("invoice");i.length>1?i.removeAt(t):i.reset(),this.invceValueChnaged()}_filterClient(t){const i=t.toLowerCase(),a=this.allClients.filter(n=>0===n.name.toLowerCase().indexOf(i));return this.showAddOption=!(a.length>0),a}OnInvoiceDateChange(t){}OnInvoiceDueDateChange(t){}save(t){const i={subTotal:this.invoiceSubTotal,total:this.invoiceTotal,tax_rate:this.invoiceTaxRate,discount:this.invoiceDiscount,amontsAre:this.amntAre.value,status:this.status},a=[];this.invoiceForm.value.invoice.forEach(n=>{n.amount&&a.push(n)}),this.saveInvoiceInLocal={details:this.invoiceDetailForm.value,items:a,tallyValue:i},1===t.id?(this.saveInvoiceInLocal.tallyValue.status={id:1,value:"Draft"},localStorage.setItem("selectedItem",JSON.stringify(this.saveInvoiceInLocal)),this.snackbarService.info(t.label),this.router.navigate(["../../"],{relativeTo:this.activatedRoute})):2===t.id?(this.saveInvoiceInLocal.tallyValue.status={id:1,value:"Draft"},localStorage.setItem("selectedItem",JSON.stringify(this.saveInvoiceInLocal)),this.enableVoidButton=!0,this.snackbarService.info(t.label)):3===t.id?(this.saveInvoiceInLocal.tallyValue.status={id:2,value:"Waiting for approval"},localStorage.setItem("selectedItem",JSON.stringify(this.saveInvoiceInLocal)),this.snackbarService.info(t.label),this.router.navigate(["../../"],{relativeTo:this.activatedRoute})):4===t.id?(this.status={id:1,value:"Draft"},this.saveInvoiceInLocal.tallyValue.status={id:1,value:"Draft"},localStorage.setItem("selectedItem",JSON.stringify(this.saveInvoiceInLocal)),this.snackbarService.info(t.label),this.invoiceForm.reset(),this.invoiceDetailForm.reset(),this.amntAre.reset(),this.invoiceDiscount=0,this.invoiceSubTotal=0,this.invoiceTaxRate=0,this.invoiceTotal=0):5===t.id&&(localStorage.removeItem("selectedItem"),this.router.navigate(["../../"],{relativeTo:this.activatedRoute}))}Approval(t){const i={subTotal:this.invoiceSubTotal,total:this.invoiceTotal,tax_rate:this.invoiceTaxRate,discount:this.invoiceDiscount,amontsAre:this.amntAre.value,status:this.status},a=[];this.invoiceForm.value.invoice.forEach(n=>{n.amount&&a.push(n)}),this.saveInvoiceInLocal={details:this.invoiceDetailForm.value,items:a,tallyValue:i},this.saveInvoiceInLocal.tallyValue.status={id:3,value:"Pending"},localStorage.setItem("selectedItem",JSON.stringify(this.saveInvoiceInLocal)),1===t.id?(this.snackbarService.info(t.label),this.router.navigate(["./../edit/1"],{relativeTo:this.activatedRoute})):2===t.id?(this.invoiceForm.reset(),this.invoiceDetailForm.reset(),this.amntAre.reset(),this.invoiceDiscount=0,this.invoiceSubTotal=0,this.invoiceTaxRate=0,this.invoiceTotal=0,this.snackbarService.info(t.label)):3===t.id&&(this.snackbarService.info(t.label),this.router.navigate(["../../"],{relativeTo:this.activatedRoute}))}invceValueChnaged(){this.enableSaveButton=!1,this.invoiceSubTotal=0,this.invoiceTaxRate=0,this.invoiceDiscount=0,this.invoiceTotal=0,this.invoiceForm.get("invoice").controls.forEach(i=>{let a;if(i.get("price").value&&i.get("quantity").value){let n=Number(i.get("price").value*Number(i.get("quantity").value));if(n=Number(n.toFixed(2)),n>=0&&i.patchValue({amount:n}),i.get("discount").value&&(n-=n*(Number(i.get("discount").value)/100),n=n,n=Number(n.toFixed(2)),n>=0&&i.patchValue({amount:n})),n>0&&(this.enableSaveButton=!0),this.invoiceSubTotal=n+this.invoiceSubTotal,this.invoiceDiscount=Number(i.get("discount").value)+this.invoiceDiscount,1===this.amntAre.value.id)i.get("tax_rate").value>=0&&(a=n+Number(n*(i.get("tax_rate").value/100))),this.invoiceTaxRate=Number((n*(i.get("tax_rate").value/100)+this.invoiceTaxRate).toFixed(2)),this.invoiceDiscount=Number(i.get("discount").value)+this.invoiceDiscount,this.invoiceTotal=a+this.invoiceTotal,this.invoiceTotal=Number(this.invoiceTotal.toFixed(2));else if(2===this.amntAre.value.id){if(i.get("tax_rate").value>0){const c=Number((n-n/(1+i.get("tax_rate").value/100)).toFixed(2));this.invoiceTaxRate=c+this.invoiceTaxRate}this.invoiceTotal=this.invoiceSubTotal}}})}onAmountsChanged(t){this.invceValueChnaged(),this.amntAre.value.id&&this.invoiceForm.enable()}onItemChanged(t,i){var a,n;t.value&&this.invoiceForm.get("invoice").controls[i].patchValue({desc:t.value.description,class:this.translate.instant(null===(a=t.value.division)||void 0===a?void 0:a.display_name),price:t.value.price,tax_rate:t.value.tax_rate,account:this.translate.instant(null===(n=t.value.account)||void 0===n?void 0:n.display_name)})}compareFn(t,i){return t&&i?t.id===i.id:t===i}getTaxOptions(){this.invoiceService.getTaxOption().subscribe(t=>{this.amounts=t,this.amntAre.setValue(this.amounts[0])})}getItems(){this.invoiceService.getAllItems().subscribe(t=>{if(this.allItems=t,this.allItems&&!this.invoiceCreateStatus.isCopy&&!this.invoiceCreateStatus.isEdit)for(let i=0;i<5;i++)this.ManageControlItem(i)})}addCompany(){this.router.navigate(["/pricing/clients/add"])}get invceTovalue(){return"Add "+this.invoiceDetailForm.get("to").value}getClients(){this.invoiceService.getAllClients().subscribe(t=>{this.allClients=t,this.filteredClients=this.invoiceDetailForm.get("to").valueChanges.pipe((0,f.O)(""),(0,d.U)(i=>"string"==typeof i?i:null==i?void 0:i.name),(0,d.U)(i=>{var a;return i?this._filterClient(i):null===(a=this.allClients)||void 0===a?void 0:a.slice()}))})}displayFn(t){return t&&t.display_name?t.display_name:""}ManageControlItem(t){const i=this.invoiceForm.get("invoice");this.filteredItems[t]=i.at(t).get("name").valueChanges.pipe((0,f.O)(""),(0,d.U)(a=>"string"==typeof a?a:null==a?void 0:a.name),(0,d.U)(a=>{var n;return a?this._filterItems(a):null===(n=this.allItems)||void 0===n?void 0:n.splice()}))}ManageControlAccount(t){const i=this.invoiceForm.get("invoice");this.filteredAccounts[t]=i.at(t).get("account").valueChanges.pipe((0,f.O)(""),(0,d.U)(a=>"string"==typeof a?a:null==a?void 0:a.name),(0,d.U)(a=>{var n;return a?this._filterAccount(a):null===(n=this.accounts)||void 0===n?void 0:n.slice()}))}onItemSelected(t,i){var a;(null===(a=null==t?void 0:t.option)||void 0===a?void 0:a.value)&&this.invoiceForm.get("invoice").controls[i].patchValue({desc:null==t?void 0:t.option.value.description,class:null==t?void 0:t.option.value.division,price:null==t?void 0:t.option.value.price,tax_rate:null==t?void 0:t.option.value.tax_rate,account:null==t?void 0:t.option.value.account})}_filterItems(t){const i=t.toLowerCase(),a=this.allItems.filter(n=>0===n.name.toLowerCase().indexOf(i));return this.showNoItem=0===a.length,a}_filterAccount(t){const i=t.toLowerCase(),a=this.accounts.filter(n=>0===this.translate.instant(n.display_name).toLowerCase().indexOf(i));return this.showNoAccounts=0===a.length,a}getAccounts(){this.invoiceService.getAccounts().subscribe(t=>{if(this.accounts=t,this.accounts&&!this.invoiceCreateStatus.isCopy&&!this.invoiceCreateStatus.isEdit)for(let i=0;i<5;i++)this.ManageControlAccount(i)})}addDays(t,i){return new Date(t.getTime()+24*i*60*60*1e3)}getDivision(){this.invoiceService.getDivision().subscribe(t=>{t.forEach(a=>{a.hasSubDivisions&&this.filteredDivisions.push(a)})})}blurInput(t,i){const a=this.invoiceForm.get("invoice");"account"===t&&this.showNoAccounts?a.at(i).get("account").setValue(""):"client"===t&&this.showAddOption&&this.invoiceDetailForm.get("to").setValue("")}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(l.qu),e.Y36(Y.o),e.Y36(g.F0),e.Y36(g.gz),e.Y36(G),e.Y36(A.sK),e.Y36(e.sBO),e.Y36(B.yh))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-invoice-new"]],decls:173,vars:127,consts:[["fxLayout","row",3,"title"],["fxLayout","row","fxLayoutGap","10px","fxLayoutAlign","end center","fxFlex","100%"],["mat-raised-button","",1,"btn","btn-secondary","mr-2",3,"routerLink"],[1,"mat-icon-rtl-mirror"],["fxLayoutAlign","start center"],["mat-raised-button","","color","primary","aria-label","Example icon-button with a menu",3,"disabled","matMenuTriggerFor"],[1,"mat-icon-rtl-mirror","v-align-middle"],["menu1","matMenu"],["mat-menu-item","",3,"click",4,"ngFor","ngForOf"],["menu2","matMenu"],[4,"ngFor","ngForOf"],["fxLayout","column","fxFlex","100%","fxFlexFill","",1,"p-2"],["fxLayout","row","fxLayoutGap","1%","fxLayoutAlign","stretch","fxFlex","100%",1,"mr-12","mb-1",3,"formGroup"],["fxFlex","1 1 15","fxFlexFill","","fxLayout","column","fxLayoutAlign","stretch"],[3,"appearance"],["matInput","","aria-label","Number","matInput","","formControlName","to",3,"matAutocomplete","blur"],["class","mat-icon-rtl-mirror","matSuffix","",4,"ngIf"],["matSuffix","","mat-icon-button","",3,"click",4,"ngIf"],["autoActiveFirstOption","",3,"displayWith"],["auto","matAutocomplete"],[3,"value",4,"ngFor","ngForOf"],["class","error-padn",4,"ngIf"],["matInput","","formControlName","date","autocomplete","off",3,"min","matDatepicker","dateChange"],["matSuffix","",3,"for"],["picker1",""],["matInput","","formControlName","dueDate","autocomplete","off",3,"min","matDatepicker","dateChange"],["picker2",""],["matPrefix",""],["matInput","","formControlName","num"],["matInput","","formControlName","ref"],["fxFlex","1 1 19","fxFlexFill","","fxLayout","column","fxLayoutAlign","end stretch"],["fxLayout","row","fxLayoutAlign","start center","fxLayoutGap","2px"],["mat-icon-button",""],[1,"mb-2"],["fxFlex","1 1 auto"],["fxLayout","column",1,"mb-2"],[1,"mat-form-field-fluid",3,"appearance"],[3,"compareWith","formControl","selectionChange"],["fxLayout","row","fxFlex","1 1 100%","fxLayoutAlign","start start"],["fxFlex","11.5"],["fxFlex","15"],["fxFlex","13.5"],["fxFlex","6.5"],["fxFlex","10.5"],["fxFlex","14.5"],["fxFlex","12.5"],["fxLayout","column","fxLayoutGap","2px","fxFlex","1 1 100%","fxFlexFill","",1,"mb-8",3,"formGroup"],["formArrayName","invoice","fxFlexFill","","fxLayout","column",4,"ngIf"],["fxLayout","column","fxLayoutAlign","start start","fxLayoutGap","2em","fxFlexFill","",1,"pt-4","pb-4","primary-color"],["fxLayout","row","fxFlex","1 1 10","fxLayoutAlign","start center",1,"cursor-pointer",3,"click"],["fxLayout","column"],["fxLayout","row","fxLayoutAlign","end center"],["fxFlex.lt-lg","1 1 60","fxFlex","1 1 70","fxFlex.gt-lg","1 1 80"],["fxLayoutAlign","end center"],["fxLayoutAlign","end end"],[1,"border-line",3,"ngStyle","ngStyle.lg","ngStyle.gt-lg"],["fxLayout","row","fxLayoutAlign","end center",1,"mt-2"],["fxLayout","column","class","mt-8","fxLayoutGap","1em",4,"ngIf"],["mat-menu-item","",3,"click"],["mat-menu-item","",3,"disabled","click"],["matSuffix","",1,"mat-icon-rtl-mirror"],["matSuffix","","mat-icon-button","",3,"click"],[1,"mat-icon-rtl-mirror",3,"matTooltip"],[3,"value"],[1,"error-padn"],[4,"ngIf"],["formArrayName","invoice","fxFlexFill","","fxLayout","column"],["class","field-appeance-outline","fxLayout","row","fxLayoutAlign","start start",3,"fxLayoutGap","formGroupName",4,"ngFor","ngForOf"],["fxLayout","row","fxLayoutAlign","start start",1,"field-appeance-outline",3,"fxLayoutGap","formGroupName"],["fxFlex","1 1 11.5",1,"square-border",3,"appearance"],["matInput","","aria-label","Number","matInput","","formControlName","name",3,"matAutocomplete"],["autoActiveFirstOption","true",3,"displayWith","optionSelected"],["autoItem","matAutocomplete"],["fxFlex","1 1 15",1,"square-border",3,"appearance"],["matInput","","formControlName","desc"],["fxFlex","1 1 13.5",1,"square-border",3,"appearance"],["formControlName","class",3,"compareWith"],["fxFlex","1 1 6.5",1,"square-border",3,"appearance"],["matInput","","min","0","type","number","formControlName","quantity",3,"keyup"],["fxFlex","1 1 10.5",1,"square-border",3,"appearance"],["matInput","","min","0","type","number","formControlName","price",3,"keyup"],["matInput","","type","number","min","0","max","100","formControlName","discount",3,"keyup"],[1,"las","la-percent"],["fxFlex","1 1 14.5",1,"square-border",3,"appearance"],["matInput","","aria-label","Number","matInput","","formControlName","account",3,"matAutocomplete","blur"],["autoActiveFirstOption","true",3,"displayWith"],["autoAccount","matAutocomplete"],["matInput","","type","number","min","0","formControlName","tax_rate",3,"keyup"],["disabled","true","fxFlex","1 1 12.5",1,"square-border",3,"appearance"],["matInput","","type","number","min","0","formControlName","amount"],["matPrefix","",1,"mat-icon-rtl-mirror"],[1,"las","la-dollar-sign"],["mat-icon-button","","fxFlex","1 1 auto",3,"click"],["fxLayout","column","fxLayoutGap","1em",1,"mt-8"],["fxLayout","row","fxLayoutGap","0.5em","fxLayoutAlign","start end"],["fxLayout","column","fxFlexFill","","fxFlex","73"],["matInput","","rows","4"],["fxLayoutAlign","end end",1,"mb-4"],["mat-raised-button","","color","primary"]],template:function(t,i){if(1&t&&(e.TgZ(0,"app-page"),e.TgZ(1,"app-page-header",0),e.ALo(2,"translate"),e.TgZ(3,"div",1),e.TgZ(4,"button",2),e.TgZ(5,"mat-icon",3),e._uU(6,"arrow_back"),e.qZA(),e.TgZ(7,"span"),e._uU(8),e.ALo(9,"translate"),e.qZA(),e.qZA(),e.TgZ(10,"div",4),e.TgZ(11,"button",5),e.TgZ(12,"mat-label"),e._uU(13),e.ALo(14,"translate"),e.TgZ(15,"mat-icon",6),e._uU(16," keyboard_arrow_down "),e.qZA(),e.qZA(),e.qZA(),e.TgZ(17,"mat-menu",null,7),e.YNc(19,Re,3,1,"button",8),e.qZA(),e.qZA(),e.TgZ(20,"div",4),e.TgZ(21,"button",5),e.TgZ(22,"mat-label"),e._uU(23),e.ALo(24,"translate"),e.TgZ(25,"mat-icon",6),e._uU(26," keyboard_arrow_down "),e.qZA(),e.qZA(),e.qZA(),e.TgZ(27,"mat-menu",null,9),e.YNc(29,Me,4,2,"div",10),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(30,"app-page-body"),e.TgZ(31,"div",11),e.TgZ(32,"form",12),e.TgZ(33,"div",13),e.TgZ(34,"mat-form-field",14),e.TgZ(35,"mat-label"),e._uU(36),e.ALo(37,"translate"),e.qZA(),e.TgZ(38,"input",15),e.NdJ("blur",function(){return i.blurInput("client",null)}),e.qZA(),e.YNc(39,Ve,2,0,"mat-icon",16),e.YNc(40,ke,3,1,"button",17),e.TgZ(41,"mat-autocomplete",18,19),e.YNc(43,Ye,2,2,"mat-option",20),e.ALo(44,"async"),e.qZA(),e.YNc(45,Be,2,1,"mat-error",21),e.qZA(),e.qZA(),e.TgZ(46,"div",13),e.TgZ(47,"mat-form-field",14),e.TgZ(48,"mat-label"),e._uU(49),e.ALo(50,"translate"),e.qZA(),e.TgZ(51,"input",22),e.NdJ("dateChange",function(n){return i.OnInvoiceDateChange(n)}),e.qZA(),e._UZ(52,"mat-datepicker-toggle",23),e._UZ(53,"mat-datepicker",null,24),e.YNc(55,He,3,2,"mat-error",21),e.qZA(),e.qZA(),e.TgZ(56,"div",13),e.TgZ(57,"mat-form-field",14),e.TgZ(58,"mat-label"),e._uU(59),e.ALo(60,"translate"),e.qZA(),e.TgZ(61,"input",25),e.NdJ("dateChange",function(n){return i.OnInvoiceDueDateChange(n)}),e.qZA(),e._UZ(62,"mat-datepicker-toggle",23),e._UZ(63,"mat-datepicker",null,26),e.YNc(65,Xe,3,2,"mat-error",21),e.qZA(),e.qZA(),e.TgZ(66,"div",13),e.TgZ(67,"mat-form-field",14),e.TgZ(68,"mat-label"),e._uU(69),e.ALo(70,"translate"),e.qZA(),e.TgZ(71,"span",27),e._uU(72,"INV- \xa0"),e.qZA(),e._UZ(73,"input",28),e.YNc(74,ze,2,1,"mat-error",21),e.qZA(),e.qZA(),e.TgZ(75,"div",13),e.TgZ(76,"mat-form-field",14),e.TgZ(77,"mat-label"),e._uU(78),e.ALo(79,"translate"),e.qZA(),e._UZ(80,"input",29),e.YNc(81,tt,2,1,"mat-error",21),e.qZA(),e.qZA(),e.TgZ(82,"div",30),e.TgZ(83,"div",31),e.TgZ(84,"button",32),e.TgZ(85,"mat-icon",3),e._uU(86,"attach_file"),e.qZA(),e.qZA(),e.TgZ(87,"span"),e._uU(88),e.ALo(89,"translate"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(90,"div",33),e._UZ(91,"span",34),e.TgZ(92,"div",35),e.TgZ(93,"mat-form-field",36),e.TgZ(94,"mat-label"),e._uU(95),e.ALo(96,"translate"),e.qZA(),e.TgZ(97,"mat-select",37),e.NdJ("selectionChange",function(n){return i.onAmountsChanged(n)}),e.YNc(98,it,3,4,"mat-option",20),e.qZA(),e.YNc(99,nt,2,1,"mat-error",21),e.qZA(),e.qZA(),e.qZA(),e.TgZ(100,"div",38),e.TgZ(101,"mat-label",39),e._uU(102),e.ALo(103,"translate"),e.qZA(),e.TgZ(104,"mat-label",40),e._uU(105),e.ALo(106,"translate"),e.qZA(),e.TgZ(107,"mat-label",41),e._uU(108),e.ALo(109,"translate"),e.qZA(),e.TgZ(110,"mat-label",42),e._uU(111),e.ALo(112,"translate"),e.qZA(),e.TgZ(113,"mat-label",43),e._uU(114),e.ALo(115,"translate"),e.qZA(),e.TgZ(116,"mat-label",42),e._uU(117),e.ALo(118,"translate"),e.qZA(),e.TgZ(119,"mat-label",44),e._uU(120),e.ALo(121,"translate"),e.qZA(),e.TgZ(122,"mat-label",42),e._uU(123),e.ALo(124,"translate"),e.qZA(),e.TgZ(125,"mat-label",45),e._uU(126),e.ALo(127,"translate"),e.qZA(),e.qZA(),e.TgZ(128,"form",46),e.YNc(129,ut,2,1,"div",47),e.qZA(),e.TgZ(130,"div",48),e.TgZ(131,"div",49),e.NdJ("click",function(){return i.addInvoiceGroup("new")}),e.TgZ(132,"mat-icon",3),e._uU(133,"add_circle_outline"),e.qZA(),e.TgZ(134,"mat-label"),e._uU(135),e.ALo(136,"translate"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(137,"div",50),e.TgZ(138,"div",51),e._UZ(139,"span",52),e.TgZ(140,"mat-label",53),e._uU(141),e.ALo(142,"translate"),e.qZA(),e._UZ(143,"span",34),e.TgZ(144,"mat-label"),e.TgZ(145,"span"),e._uU(146,"$"),e.qZA(),e._uU(147),e.qZA(),e.qZA(),e.TgZ(148,"div",51),e._UZ(149,"span",52),e.TgZ(150,"mat-label",53),e._uU(151),e.ALo(152,"translate"),e.qZA(),e._UZ(153,"span",34),e.TgZ(154,"mat-label"),e.TgZ(155,"span"),e._uU(156,"$"),e.qZA(),e._uU(157),e.qZA(),e.qZA(),e.TgZ(158,"div",54),e._UZ(159,"hr",55),e.qZA(),e.TgZ(160,"div",56),e._UZ(161,"span",52),e.TgZ(162,"mat-label",53),e._uU(163),e.ALo(164,"translate"),e.qZA(),e._UZ(165,"span",34),e.TgZ(166,"mat-label"),e.TgZ(167,"span"),e._uU(168,"$"),e.qZA(),e._uU(169),e.qZA(),e.qZA(),e.TgZ(170,"div",54),e._UZ(171,"hr",55),e.qZA(),e.qZA(),e.YNc(172,pt,12,7,"div",57),e.qZA(),e.qZA(),e.qZA()),2&t){const a=e.MAs(18),n=e.MAs(28),c=e.MAs(42),p=e.MAs(54),Z=e.MAs(64);e.xp6(1),e.Q6J("title",e.lcZ(2,70,"ACCOUNT.INVOICE.CREATE")),e.xp6(3),e.Q6J("routerLink",e.DdM(120,mt)),e.xp6(4),e.Oqu(e.lcZ(9,72,"BUTTON.BACK")),e.xp6(3),e.Q6J("disabled",!(i.invoiceDetailForm.valid&&i.invoiceForm.valid&&i.amntAre.valid&&i.enableSaveButton))("matMenuTriggerFor",a),e.xp6(2),e.hij("",e.lcZ(14,74,"BUTTON.APPROVAL")," "),e.xp6(6),e.Q6J("ngForOf",i.invoiceApporvalTypes),e.xp6(2),e.Q6J("disabled",!(i.invoiceDetailForm.valid&&i.invoiceForm.valid&&i.amntAre.valid&&i.enableSaveButton))("matMenuTriggerFor",n),e.xp6(2),e.hij("",e.lcZ(24,76,"BUTTON.SAVE")," "),e.xp6(6),e.Q6J("ngForOf",i.invoiceSavedTypes),e.xp6(3),e.Q6J("formGroup",i.invoiceDetailForm),e.xp6(2),e.Q6J("appearance",i.appearanceType),e.xp6(2),e.Oqu(e.lcZ(37,78,"ACCOUNTS.INVOICE.TO.TITLE")),e.xp6(2),e.Q6J("matAutocomplete",c),e.xp6(1),e.Q6J("ngIf",!i.showAddOption),e.xp6(1),e.Q6J("ngIf",i.showAddOption&&i.invoiceDetailForm.controls.to.value),e.xp6(1),e.Q6J("displayWith",i.displayFn),e.xp6(2),e.Q6J("ngForOf",e.lcZ(44,80,i.filteredClients)),e.xp6(2),e.Q6J("ngIf",!!i.invoiceDetailForm.controls.to.invalid&&!!i.invoiceDetailForm.controls.to.touched),e.xp6(2),e.Q6J("appearance",i.appearanceType),e.xp6(2),e.Oqu(e.lcZ(50,82,"ACCOUNTS.INVOICE.DATE.TITLE")),e.xp6(2),e.Q6J("min",i.minDate)("matDatepicker",p),e.xp6(1),e.Q6J("for",p),e.xp6(3),e.Q6J("ngIf",!!i.invoiceDetailForm.controls.date.invalid&&!!i.invoiceDetailForm.controls.date.touched),e.xp6(2),e.Q6J("appearance",i.appearanceType),e.xp6(2),e.Oqu(e.lcZ(60,84,"ACCOUNTS.DUE-DATE.TITLE")),e.xp6(2),e.Q6J("min",i.minDueDate)("matDatepicker",Z),e.xp6(1),e.Q6J("for",Z),e.xp6(3),e.Q6J("ngIf",!!i.invoiceDetailForm.controls.dueDate.invalid&&!!i.invoiceDetailForm.controls.dueDate.touched),e.xp6(2),e.Q6J("appearance",i.appearanceType),e.xp6(2),e.Oqu(e.lcZ(70,86,"ACCOUNTS.INVOICE.NUMBER.TITLE")),e.xp6(5),e.Q6J("ngIf",!!i.invoiceDetailForm.controls.num.invalid&&!!i.invoiceDetailForm.controls.num.touched),e.xp6(2),e.Q6J("appearance",i.appearanceType),e.xp6(2),e.Oqu(e.lcZ(79,88,"ACCOUNTS.REFERENCE")),e.xp6(3),e.Q6J("ngIf",!!i.invoiceDetailForm.controls.ref.invalid&&!!i.invoiceDetailForm.controls.ref.touched),e.xp6(7),e.hij("",e.lcZ(89,90,"ACCOUNTS.ATTACHMENT")," (0)"),e.xp6(5),e.Q6J("appearance",i.appearanceType),e.xp6(2),e.Oqu(e.lcZ(96,92,"ACCOUNTS.AMOUNTS-ARE.TITLE")),e.xp6(2),e.Q6J("compareWith",i.compareFn)("formControl",i.amntAre),e.xp6(1),e.Q6J("ngForOf",i.amounts),e.xp6(1),e.Q6J("ngIf",!!i.amntAre.invalid&&!!i.amntAre.touched),e.xp6(3),e.Oqu(e.lcZ(103,94,"ACCOUNTS.ITEM")),e.xp6(3),e.Oqu(e.lcZ(106,96,"ACCOUNTS.DESCRIPTION")),e.xp6(3),e.Oqu(e.lcZ(109,98,"ACCOUNTS.CLASS")),e.xp6(3),e.Oqu(e.lcZ(112,100,"ACCOUNTS.QUANTITY")),e.xp6(3),e.Oqu(e.lcZ(115,102,"ACCOUNTS.UNIT-PRICE")),e.xp6(3),e.Oqu(e.lcZ(118,104,"ACCOUNTS.DISCOUNT")),e.xp6(3),e.Oqu(e.lcZ(121,106,"ACCOUNTS.ACCOUNT")),e.xp6(3),e.Oqu(e.lcZ(124,108,"ACCOUNTS.TAX-RATE")),e.xp6(3),e.Oqu(e.lcZ(127,110,"ACCOUNTS.AMOUNT")),e.xp6(2),e.Q6J("formGroup",i.invoiceForm),e.xp6(1),e.Q6J("ngIf",i.invoiceForm),e.xp6(6),e.Oqu(e.lcZ(136,112,"ACCOUNTS.ADD")),e.xp6(6),e.Oqu(e.lcZ(142,114,"ACCOUNTS.SUB-TOTAL")),e.xp6(6),e.hij("",i.invoiceSubTotal?i.invoiceSubTotal:"0.00"," "),e.xp6(4),e.Oqu(e.lcZ(152,116,"ACCOUNTS.TAX")),e.xp6(6),e.Oqu(i.invoiceTaxRate?i.invoiceTaxRate:"0.00"),e.xp6(2),e.Q6J("ngStyle",e.DdM(121,oe))("ngStyle.lg",e.DdM(122,ne))("ngStyle.gt-lg",e.DdM(123,ae)),e.xp6(4),e.Oqu(e.lcZ(164,118,"ACCOUNTS.TOTAL")),e.xp6(6),e.Oqu(i.invoiceTotal?i.invoiceTotal:"0.00"),e.xp6(2),e.Q6J("ngStyle",e.DdM(124,oe))("ngStyle.lg",e.DdM(125,ne))("ngStyle.gt-lg",e.DdM(126,ae)),e.xp6(1),e.Q6J("ngIf",i.showHistory)}},directives:[P.I,j.q,_.xw,_.SQ,_.Wh,_.yH,w.lW,g.rH,H.Hw,N.p6,T.hX,N.VK,u.sg,W.H,_.s9,l._Y,l.JL,l.sg,T.KE,$.Nt,l.Fj,O.ZL,l.JJ,l.u,u.O5,O.XC,y.hl,y.nW,T.R9,y.Mq,T.qo,X.gD,l.oH,u.PC,K.Zl,N.OP,Qe.gM,z.ey,T.TO,l.CE,l.x0,l.qQ,l.wV,l.Fd],pipes:[A.X$,u.Ov],styles:[""]}),o})()},{path:"edit/:id",component:Je}];let vt=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[[g.Bz.forChild(dt)],g.Bz]}),o})();function le(o){return new L.w(o,"assets/i18n/",".json")}let ft=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[[u.ez,E._,D.q,vt,l.u5,l.UX,h.m,A.aw.forChild({loader:{provide:A.Zw,useFactory:le,deps:[C.eN]},isolate:!0})]]}),o})()},9759:(ce,U,s)=>{s.d(U,{p:()=>E});var u=s(5e3),C=s(8966),l=s(7093),A=s(7322),L=s(7423),D=s(1062);let E=(()=>{class h{constructor(f){this.dialogRef=f}onNoClick(){this.dialogRef.close()}delete(){this.dialogRef.close("OK")}}return h.\u0275fac=function(f){return new(f||h)(u.Y36(C.so))},h.\u0275cmp=u.Xpm({type:h,selectors:[["app-delete-confirmation"]],decls:12,vars:9,consts:[["fxLayout","column"],["mat-dialog-content","",2,"overflow","hidden"],[1,"mat-h2"],["mat-dialog-actions","","fxLayout","row","fxLayoutAlign","space-between center","fxLayoutGap","5px",1,"mt-1"],["mat-stroked-button","","color","primary",3,"click"],["mat-stroked-button","","color","warn","cdkFocusInitial","",3,"click"]],template:function(f,d){1&f&&(u.TgZ(0,"div",0),u.TgZ(1,"div",1),u.TgZ(2,"mat-label",2),u._uU(3),u.ALo(4,"translate"),u.qZA(),u.qZA(),u.TgZ(5,"div",3),u.TgZ(6,"button",4),u.NdJ("click",function(){return d.onNoClick()}),u._uU(7),u.ALo(8,"translate"),u.qZA(),u.TgZ(9,"button",5),u.NdJ("click",function(){return d.delete()}),u._uU(10),u.ALo(11,"translate"),u.qZA(),u.qZA(),u.qZA()),2&f&&(u.xp6(3),u.Oqu(u.lcZ(4,3,"BUTTON.DELETE-CONFIRMATION")),u.xp6(4),u.Oqu(u.lcZ(8,5,"BUTTON.CANCEL")),u.xp6(3),u.Oqu(u.lcZ(11,7,"BUTTON.DELETE")))},directives:[l.xw,C.xY,A.hX,C.H8,l.Wh,l.SQ,L.lW],pipes:[D.X$],styles:[""]}),h})()}}]);