"use strict";(self.webpackChunksolidapp=self.webpackChunksolidapp||[]).push([[3738],{3738:(H,u,i)=>{i.r(u),i.d(u,{MailModule:()=>z,createTranslateLoader:()=>E});var f=i(9808),g=i(520),a=i(3075),l=i(1062),v=i(40),T=i(7006),h=i(3583),Z=i(900),d=i(9291),I=i(4971),e=i(5e3),C=i(2329),s=i(2340);let S=(()=>{class t{constructor(o){this.http=o}getAll(){return this.http.get(`${s.N.apiEndpoint}/config/mailsetting`)}save(o){return this.http.post(`${s.N.apiEndpoint}/config/mailsetting`,o)}update(o,r){return this.http.put(`${s.N.apiEndpoint}/config/mailsetting/${o}`,r)}delete(o){return this.http.delete(`${s.N.apiEndpoint}/config/mailsetting/${o}`)}}return t.\u0275fac=function(o){return new(o||t)(e.LFG(g.eN))},t.\u0275prov=e.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var M=i(5094),L=i(7071),x=i(291),y=i(722),F=i(4763),m=i(7093),p=i(7322),U=i(7531),N=i(4107),q=i(508);function V(t,n){1&t&&(e.TgZ(0,"div"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&t&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"MAILSERVER.MAIL-SERVER.ERROR.REQUIRED")," "))}function Q(t,n){if(1&t&&(e.TgZ(0,"mat-error"),e.YNc(1,V,3,3,"div",5),e.qZA()),2&t){const o=e.oxw();e.xp6(1),e.Q6J("ngIf",!(null==o.mailConfigForm.controls.server.errors||!o.mailConfigForm.controls.server.errors.required))}}function J(t,n){1&t&&(e.TgZ(0,"div"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&t&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"MAILSERVER.PORT.ERROR.REQUIRED")," "))}function Y(t,n){1&t&&(e.TgZ(0,"div"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&t&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"MAILSERVER.PORT.ERROR.MIN")," "))}function O(t,n){1&t&&(e.TgZ(0,"div"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&t&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"MAILSERVER.PORT.ERROR.MAX")," "))}function D(t,n){if(1&t&&(e.TgZ(0,"mat-error"),e.YNc(1,J,3,3,"div",5),e.YNc(2,Y,3,3,"div",5),e.YNc(3,O,3,3,"div",5),e.qZA()),2&t){const o=e.oxw();e.xp6(1),e.Q6J("ngIf",!(null==o.mailConfigForm.controls.port.errors||!o.mailConfigForm.controls.port.errors.required)),e.xp6(1),e.Q6J("ngIf",!(null==o.mailConfigForm.controls.port.errors||!o.mailConfigForm.controls.port.errors.min)),e.xp6(1),e.Q6J("ngIf",!(null==o.mailConfigForm.controls.port.errors||!o.mailConfigForm.controls.port.errors.max))}}function P(t,n){1&t&&(e.TgZ(0,"div"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&t&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"MAILSERVER.USERNAME.ERROR.REQUIRED")," "))}function w(t,n){if(1&t&&(e.TgZ(0,"mat-error"),e.YNc(1,P,3,3,"div",5),e.qZA()),2&t){const o=e.oxw();e.xp6(1),e.Q6J("ngIf",!(null==o.mailConfigForm.controls.username.errors||!o.mailConfigForm.controls.username.errors.required))}}function _(t,n){1&t&&(e.TgZ(0,"div"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&t&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"MAILSERVER.PASSWORD.ERROR.REQUIRED")," "))}function j(t,n){if(1&t&&(e.TgZ(0,"mat-error"),e.YNc(1,_,3,3,"div",5),e.qZA()),2&t){const o=e.oxw();e.xp6(1),e.Q6J("ngIf",!(null==o.mailConfigForm.controls.password.errors||!o.mailConfigForm.controls.password.errors.required))}}function b(t,n){1&t&&(e.TgZ(0,"div"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&t&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"MAILSERVER.SECURITY.ERROR.REQUIRED")," "))}function $(t,n){if(1&t&&(e.TgZ(0,"mat-error"),e.YNc(1,b,3,3,"div",5),e.qZA()),2&t){const o=e.oxw();e.xp6(1),e.Q6J("ngIf",!(null==o.mailConfigForm.controls.security_type.errors||!o.mailConfigForm.controls.security_type.errors.required))}}const X=[{path:"",component:(()=>{class t{constructor(o,r,A,c,B,W){this.permissionService=o,this._service=r,this.store=A,this.translate=c,this.fb=B,this.snackbarService=W,this.appearanceType="outline",this.showSave=!0,this.store.select(I.D6).subscribe(R=>{this.translate.use(R.userPreference.language),this.appearanceType=R.userPreference.appearanceType})}ngOnInit(){this.mailConfigForm=this.fb.group({server:new a.NI("",a.kI.required),port:new a.NI("",[a.kI.required,a.kI.max(65535),a.kI.min(0)]),username:new a.NI("",a.kI.required),password:new a.NI("",[a.kI.required]),security_type:new a.NI("",a.kI.required)}),this.getAll()}getAll(){this._service.getAll().subscribe(o=>{o&&o.length>0?(this.configuation=o[0],this.mailConfigForm.disable(),this.showSave=!1,this.mailConfigForm.patchValue({server:this.configuation.server,port:this.configuation.port,username:this.configuation.username,password:this.configuation.password,security_type:this.configuation.security_type})):this.showSave=!0})}save(){this._service.save(this.mailConfigForm.value).subscribe({next:o=>{this.snackbarService.info(this.translate.instant("MAILSERVER.SUCCESS.CREATE"))},error:o=>this.snackbarService.warn(this.translate.instant("MAILSERVER.ERROR.CREATE"))})}update(){this._service.update(this.configuation.id,this.mailConfigForm.value).subscribe({next:o=>{this.snackbarService.info(this.translate.instant("MAILSERVER.SUCCESS.UPDATE"))},error:o=>this.snackbarService.warn(this.translate.instant("MAILSERVER.ERROR.UPDATE"))})}getPageAction(o){const r=o.toString();"update"===r?(this.update(),this.mailConfigForm.disable()):"modify"===r?this.mailConfigForm.enable():"save"===r&&(this.save(),this.mailConfigForm.disable())}}return t.\u0275fac=function(o){return new(o||t)(e.Y36(C.$),e.Y36(S),e.Y36(M.yh),e.Y36(l.sK),e.Y36(a.qu),e.Y36(L.o))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-mail"]],decls:49,vars:44,consts:[[3,"title","showSave","selectedId","isDisabled","pageAction"],["fxLayout","row wrap","fxLayout.lt-sm","column","fxLayoutGap","10px","fxLayoutAlign","flex-start",3,"formGroup"],["fxFlex","0 1 calc(33.3% - 10px)","fxFlex.lt-md","0 1 calc(50% - 10px)","fxFlex.lt-sm","100%"],[3,"appearance"],["formControlName","server","matInput","","required",""],[4,"ngIf"],["type","number","min","0","max","65535","formControlName","port","matInput","","required",""],["formControlName","username","matInput","","required",""],["type","password","formControlName","password","matInput","","required",""],["formControlName","security_type","required",""],[3,"value"]],template:function(o,r){1&o&&(e.TgZ(0,"app-page"),e.TgZ(1,"app-page-header",0),e.NdJ("pageAction",function(c){return r.getPageAction(c)}),e.ALo(2,"translate"),e.qZA(),e.TgZ(3,"app-page-body"),e.TgZ(4,"form",1),e.TgZ(5,"div",2),e.TgZ(6,"mat-form-field",3),e.TgZ(7,"mat-label"),e._uU(8),e.ALo(9,"translate"),e.qZA(),e._UZ(10,"input",4),e.YNc(11,Q,2,1,"mat-error",5),e.qZA(),e.qZA(),e.TgZ(12,"div",2),e.TgZ(13,"mat-form-field",3),e.TgZ(14,"mat-label"),e._uU(15),e.ALo(16,"translate"),e.qZA(),e._UZ(17,"input",6),e.YNc(18,D,4,3,"mat-error",5),e.qZA(),e.qZA(),e.TgZ(19,"div",2),e.TgZ(20,"mat-form-field",3),e.TgZ(21,"mat-label"),e._uU(22),e.ALo(23,"translate"),e.qZA(),e._UZ(24,"input",7),e.YNc(25,w,2,1,"mat-error",5),e.qZA(),e.qZA(),e.TgZ(26,"div",2),e.TgZ(27,"mat-form-field",3),e.TgZ(28,"mat-label"),e._uU(29),e.ALo(30,"translate"),e.qZA(),e._UZ(31,"input",8),e.YNc(32,j,2,1,"mat-error",5),e.qZA(),e.qZA(),e.TgZ(33,"div",2),e.TgZ(34,"mat-form-field",3),e.TgZ(35,"mat-label"),e._uU(36),e.ALo(37,"translate"),e.qZA(),e.TgZ(38,"mat-select",9),e.TgZ(39,"mat-option",10),e._uU(40),e.ALo(41,"translate"),e.qZA(),e.TgZ(42,"mat-option",10),e._uU(43),e.ALo(44,"translate"),e.qZA(),e.TgZ(45,"mat-option",10),e._uU(46),e.ALo(47,"translate"),e.qZA(),e.qZA(),e.YNc(48,$,2,1,"mat-error",5),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&o&&(e.xp6(1),e.Q6J("title",e.lcZ(2,26,"MAILSERVER.PAGE-TITLE"))("showSave",r.showSave&&r.permissionService.hasPermission("MAIL-SERVER-CREATE"))("selectedId",r.permissionService.hasPermission("MAIL-SERVER-CREATE")?null==r.configuation?null:r.configuation.id:null)("isDisabled",r.mailConfigForm.invalid),e.xp6(3),e.Q6J("formGroup",r.mailConfigForm),e.xp6(2),e.Q6J("appearance",r.appearanceType),e.xp6(2),e.Oqu(e.lcZ(9,28,"MAILSERVER.MAIL-SERVER.TITLE")),e.xp6(3),e.Q6J("ngIf",!!r.mailConfigForm.controls.server.invalid&&!!r.mailConfigForm.controls.server.touched),e.xp6(2),e.Q6J("appearance",r.appearanceType),e.xp6(2),e.Oqu(e.lcZ(16,30,"MAILSERVER.PORT.TITLE")),e.xp6(3),e.Q6J("ngIf",!!r.mailConfigForm.controls.port.invalid&&!!r.mailConfigForm.controls.port.touched),e.xp6(2),e.Q6J("appearance",r.appearanceType),e.xp6(2),e.Oqu(e.lcZ(23,32,"MAILSERVER.USERNAME.TITLE")),e.xp6(3),e.Q6J("ngIf",!!r.mailConfigForm.controls.username.invalid&&!!r.mailConfigForm.controls.username.touched),e.xp6(2),e.Q6J("appearance",r.appearanceType),e.xp6(2),e.Oqu(e.lcZ(30,34,"MAILSERVER.PASSWORD.TITLE")),e.xp6(3),e.Q6J("ngIf",!!r.mailConfigForm.controls.password.invalid&&!!r.mailConfigForm.controls.password.touched),e.xp6(2),e.Q6J("appearance",r.appearanceType),e.xp6(2),e.Oqu(e.lcZ(37,36,"MAILSERVER.SECURITY.TITLE")),e.xp6(3),e.Q6J("value","NONE"),e.xp6(1),e.Oqu(e.lcZ(41,38,"MAILSERVER.METADATA.SECURITY-TYPE.NONE")),e.xp6(2),e.Q6J("value","SSL"),e.xp6(1),e.hij(" ",e.lcZ(44,40,"MAILSERVER.METADATA.SECURITY-TYPE.SSL"),""),e.xp6(2),e.Q6J("value","TLS"),e.xp6(1),e.hij(" ",e.lcZ(47,42,"MAILSERVER.METADATA.SECURITY-TYPE.TLS")," "),e.xp6(2),e.Q6J("ngIf",!!r.mailConfigForm.controls.security_type.invalid&&!!r.mailConfigForm.controls.security_type.touched))},directives:[x.I,y.q,F.H,a._Y,a.JL,m.xw,m.SQ,m.Wh,a.sg,m.yH,p.KE,p.hX,a.Fj,U.Nt,a.JJ,a.u,a.Q7,f.O5,a.qQ,a.Fd,a.wV,N.gD,q.ey,p.TO],pipes:[l.X$],styles:[""]}),t})(),data:{permission_code:"MAIL-SERVER-CREATE||MAIL-SERVER||MAIL-SERVER-READ||MAIL-SERVER-UPDATE"}}];let G=(()=>{class t{}return t.\u0275fac=function(o){return new(o||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[[d.Bz.forChild(X)],d.Bz]}),t})();function E(t){return new v.w(t,"assets/i18n/",".json")}let z=(()=>{class t{}return t.\u0275fac=function(o){return new(o||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[[f.ez,G,T.q,a.u5,a.UX,l.aw.forChild({loader:{provide:l.Zw,useFactory:E,deps:[g.eN]},isolate:!0}),a.UX,a.u5,Z.m,h._]]}),t})()}}]);