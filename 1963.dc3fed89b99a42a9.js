"use strict";(self.webpackChunksolidapp=self.webpackChunksolidapp||[]).push([[1963],{1963:(k,E,i)=>{i.r(E),i.d(E,{MetadataModule:()=>K,createTranslateLoader:()=>R});var M=i(3583),S=i(900),d=i(1062),N=i(7006),g=i(9808),p=i(9291),u=i(7618),e=i(5e3);let y=(()=>{class t{constructor(){}}return t.\u0275fac=function(a){return new(a||t)},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-metadata-edit"]],decls:8,vars:0,template:function(a,r){1&a&&(e.TgZ(0,"p"),e._uU(1,"metadata-edit works!"),e.qZA(),e.TgZ(2,"b"),e._uU(3,"https://medium.com/swlh/getting-started-with-fastapi-7774e6afe2e4"),e.qZA(),e.TgZ(4,"h3"),e._uU(5,"https://stackblitz.com/edit/angular-file-upload"),e.qZA(),e.TgZ(6,"h2"),e._uU(7,"https://blog.angular-university.io/angular-file-upload/"),e.qZA())},styles:[""]}),t})();var o=i(3075),f=i(291),h=i(722),A=i(4763),c=i(7093),T=i(7322),U=i(7531);const w=["fileInput"];function L(t,n){1&t&&(e.TgZ(0,"div"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&t&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"BUILDER.METAREST.NAME.ERROR.REQUIRED")," "))}function x(t,n){if(1&t&&(e.TgZ(0,"mat-error"),e.YNc(1,L,3,3,"div",6),e.qZA()),2&t){const a=e.oxw();e.xp6(1),e.Q6J("ngIf",!(null==a.metadataForm.controls.name.errors||!a.metadataForm.controls.name.errors.required))}}function C(t,n){1&t&&(e.TgZ(0,"div"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&t&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"BUILDER.METAREST.DISPLAYNAME.ERROR.REQUIRED")," "))}function _(t,n){if(1&t&&(e.TgZ(0,"mat-error"),e.YNc(1,C,3,3,"div",6),e.qZA()),2&t){const a=e.oxw();e.xp6(1),e.Q6J("ngIf",!(null==a.metadataForm.controls.display_name.errors||!a.metadataForm.controls.display_name.errors.required))}}function q(t,n){1&t&&(e.TgZ(0,"div"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&t&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"BUILDER.METAREST.SCOPE.ERROR.REQUIRED")," "))}function F(t,n){if(1&t&&(e.TgZ(0,"mat-error"),e.YNc(1,q,3,3,"div",6),e.qZA()),2&t){const a=e.oxw();e.xp6(1),e.Q6J("ngIf",!(null==a.metadataForm.controls.scope.errors||!a.metadataForm.controls.scope.errors.required))}}function D(t,n){1&t&&(e.TgZ(0,"div"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&t&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"BUILDER.METAREST.ROUTE.ERROR.REQUIRED")," "))}function J(t,n){if(1&t&&(e.TgZ(0,"mat-error"),e.YNc(1,D,3,3,"div",6),e.qZA()),2&t){const a=e.oxw();e.xp6(1),e.Q6J("ngIf",!(null==a.metadataForm.controls.route.errors||!a.metadataForm.controls.route.errors.required))}}function Q(t,n){1&t&&(e.TgZ(0,"div"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&t&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"BUILDER.METAREST.TABLENAME.ERROR.REQUIRED")," "))}function B(t,n){if(1&t&&(e.TgZ(0,"mat-error"),e.YNc(1,Q,3,3,"div",6),e.qZA()),2&t){const a=e.oxw();e.xp6(1),e.Q6J("ngIf",!(null==a.metadataForm.controls.table_name.errors||!a.metadataForm.controls.table_name.errors.required))}}let O=(()=>{class t{constructor(){this.appearanceType="outline",this.fileAttr="Choose File"}ngOnInit(){this.metadataForm=new o.cw({name:new o.NI("",o.kI.required),description:new o.NI("",o.kI.required),scope:new o.NI("",[o.kI.required,o.kI.min(0),o.kI.max(100)]),route:new o.NI("",[o.kI.required,o.kI.min(0)]),table_name:new o.NI("",o.kI.required),display_name:new o.NI("",o.kI.required),fileAttr:new o.NI("",o.kI.required)})}uploadFileEvt(a){if(a.target.files&&a.target.files[0]){this.fileAttr="",Array.from(a.target.files).forEach(l=>{this.fileAttr+=l.name+" - "});let r=new FileReader;r.onload=l=>{let s=new Image;s.src=l.target.result,s.onload=v=>{}},r.readAsDataURL(a.target.files[0]),this.fileInput.nativeElement.value=""}else this.fileAttr="Choose File"}}return t.\u0275fac=function(a){return new(a||t)},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-metadata-new"]],viewQuery:function(a,r){if(1&a&&e.Gf(w,5),2&a){let l;e.iGM(l=e.CRH())&&(r.fileInput=l.first)}},decls:55,vars:32,consts:[[3,"title","showBack","showIcon","showSave"],[1,"pt-2","pb-2",3,"formGroup"],["fxLayout","row wrap","fxFlex","1 1 100%","fxLayoutAlign","start center","fxLayoutGap","10px grid"],["fxFlex.gt-lg","20","fxFlex.lg","25","fxFlex","33.33","fxFlex.sm","50","fxFlex.xs","100","fxLayout","column"],[3,"appearance"],["formControlName","name","type","text","matInput","","required",""],[4,"ngIf"],["formControlName","display_name","type","text","matInput","","required",""],["formControlName","scope","type","text","matInput","","required",""],["formControlName","route","type","text","matInput","","required",""],["formControlName","table_name","type","text","matInput","","required",""],["matInput","","formControlName","fileAttr","readonly",""],["type","file","id","uploadFile","name","uploadFile","multiple","multiple","accept","image/*",3,"change"],["fileInput",""]],template:function(a,r){1&a&&(e.TgZ(0,"app-page"),e._UZ(1,"app-page-header",0),e.ALo(2,"translate"),e.TgZ(3,"app-page-body"),e.TgZ(4,"form",1),e.TgZ(5,"div",2),e.TgZ(6,"div",3),e.TgZ(7,"mat-form-field",4),e.TgZ(8,"mat-label"),e._uU(9),e.ALo(10,"translate"),e.qZA(),e._UZ(11,"input",5),e.YNc(12,x,2,1,"mat-error",6),e.qZA(),e.qZA(),e.TgZ(13,"div",3),e.TgZ(14,"mat-form-field",4),e.TgZ(15,"mat-label"),e._uU(16),e.ALo(17,"translate"),e.qZA(),e._UZ(18,"input",7),e.YNc(19,_,2,1,"mat-error",6),e.qZA(),e.qZA(),e.TgZ(20,"div",3),e.TgZ(21,"mat-form-field",4),e.TgZ(22,"mat-label"),e._uU(23),e.ALo(24,"translate"),e.qZA(),e._UZ(25,"input",8),e.YNc(26,F,2,1,"mat-error",6),e.qZA(),e.qZA(),e.TgZ(27,"div",3),e.TgZ(28,"mat-form-field",4),e.TgZ(29,"mat-label"),e._uU(30),e.ALo(31,"translate"),e.qZA(),e._UZ(32,"input",9),e.YNc(33,J,2,1,"mat-error",6),e.qZA(),e.qZA(),e.TgZ(34,"div",3),e.TgZ(35,"mat-form-field",4),e.TgZ(36,"mat-label"),e._uU(37),e.ALo(38,"translate"),e.qZA(),e._UZ(39,"input",10),e.YNc(40,B,2,1,"mat-error",6),e.qZA(),e.qZA(),e.TgZ(41,"div",3),e.TgZ(42,"mat-form-field"),e.TgZ(43,"div"),e._UZ(44,"input",11),e.TgZ(45,"input",12,13),e.NdJ("change",function(s){return r.uploadFileEvt(s)}),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(47,"p"),e._uU(48,"metadata New works!"),e.qZA(),e.TgZ(49,"b"),e._uU(50,"https://medium.com/swlh/getting-started-with-fastapi-7774e6afe2e4"),e.qZA(),e.TgZ(51,"h3"),e._uU(52,"https://stackblitz.com/edit/angular-file-upload"),e.qZA(),e.TgZ(53,"h2"),e._uU(54,"https://blog.angular-university.io/angular-file-upload/"),e.qZA(),e.qZA(),e.qZA()),2&a&&(e.xp6(1),e.Q6J("title",e.lcZ(2,20,"BUILDER.METAREST.PAGE-TITLE"))("showBack",!0)("showIcon",!0)("showSave",!0),e.xp6(3),e.Q6J("formGroup",r.metadataForm),e.xp6(3),e.Q6J("appearance",r.appearanceType),e.xp6(2),e.Oqu(e.lcZ(10,22,"BUILDER.METAREST.NAME.TITLE")),e.xp6(3),e.Q6J("ngIf",!!r.metadataForm.controls.name.invalid&&!!r.metadataForm.controls.name.touched),e.xp6(2),e.Q6J("appearance",r.appearanceType),e.xp6(2),e.Oqu(e.lcZ(17,24,"BUILDER.METAREST.DISPLAYNAME.TITLE")),e.xp6(3),e.Q6J("ngIf",!!r.metadataForm.controls.display_name.invalid&&!!r.metadataForm.controls.display_name.touched),e.xp6(2),e.Q6J("appearance",r.appearanceType),e.xp6(2),e.Oqu(e.lcZ(24,26,"BUILDER.METAREST.SCOPE.TITLE")),e.xp6(3),e.Q6J("ngIf",!!r.metadataForm.controls.scope.invalid&&!!r.metadataForm.controls.scope.touched),e.xp6(2),e.Q6J("appearance",r.appearanceType),e.xp6(2),e.Oqu(e.lcZ(31,28,"BUILDER.METAREST.ROUTE.TITLE")),e.xp6(3),e.Q6J("ngIf",!!r.metadataForm.controls.route.invalid&&!!r.metadataForm.controls.route.touched),e.xp6(2),e.Q6J("appearance",r.appearanceType),e.xp6(2),e.Oqu(e.lcZ(38,30,"BUILDER.METAREST.TABLENAME.TITLE")),e.xp6(3),e.Q6J("ngIf",!!r.metadataForm.controls.table_name.invalid&&!!r.metadataForm.controls.table_name.touched))},directives:[f.I,h.q,A.H,o._Y,o.JL,o.sg,c.xw,c.yH,c.Wh,c.SQ,T.KE,T.hX,o.Fj,U.Nt,o.JJ,o.u,o.Q7,g.O5,T.TO],pipes:[d.X$],styles:[""]}),t})();var m=i(2340),Y=i(4971),P=i(2329),Z=i(520);let G=(()=>{class t{constructor(a){this.http=a}getAll(){return this.http.get(`${m.N.apiEndpoint}/metadata_list`)}save(a){return this.http.post(`${m.N.apiEndpoint}/users`,a)}update(a,r){return this.http.put(`${m.N.apiEndpoint}/users/${a}`,r)}}return t.\u0275fac=function(a){return new(a||t)(e.LFG(Z.eN))},t.\u0275prov=e.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var b=i(5094),j=i(7142);const H=[{canActivate:[u.a],path:"",component:(()=>{class t{constructor(a,r,l,s,v,I){this.permissionService=a,this._service=r,this.activatedRoute=l,this.router=s,this.store=v,this.translate=I,this.displayedColumns=["display_name","scope","url"],this.headers=[{columnName:"display_name",display_name:"BUILDER.METAREST.GRID.NAME"},{columnName:"scope",display_name:"BUILDER.METAREST.GRID.SCOPE"},{columnName:"url",display_name:"BUILDER.METAREST.GRID.URL"}],this.dataLoaded=!1,this.searchString="",this.store.select(Y.D6).subscribe(W=>{this.translate.use(W.userPreference.language)})}ngOnInit(){localStorage.removeItem("selectedItem"),this.getMetadataUrls()}getMetadataUrls(){this._service.getAll().subscribe({next:a=>{this.gridData=a;for(const r of this.gridData)r.url=`${m.N.apiEndpoint}/metadata/${r.router}`;this.dataLoaded=!0},error:a=>{this.dataLoaded=!0,this.gridData=[]}})}selectedRowItem(a){this.permissionService.hasPermission("METAREST-UPDATE||METAREST-READ||METAREST-DELETE")&&(localStorage.setItem("selectedItem",JSON.stringify(a)),this.router.navigate(["./edit/"+a.id],{relativeTo:this.activatedRoute}))}selectedSelection(a){}getSearchString(a){this.searchString=a}}return t.\u0275fac=function(a){return new(a||t)(e.Y36(P.$),e.Y36(G),e.Y36(p.gz),e.Y36(p.F0),e.Y36(b.yh),e.Y36(d.sK))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-metadata"]],decls:7,vars:16,consts:[[3,"title","showNew","showIcon","showSearch","searchPlaceholder","emitSearchString"],[1,"p-2"],[3,"showSkeleton","data","displayColumns","useCustomHeader","headers","showFilter","searchString","selectedRow","selectedSelection"]],template:function(a,r){1&a&&(e.TgZ(0,"app-page"),e.TgZ(1,"app-page-header",0),e.NdJ("emitSearchString",function(s){return r.getSearchString(s)}),e.ALo(2,"translate"),e.ALo(3,"translate"),e.qZA(),e.TgZ(4,"app-page-body"),e.TgZ(5,"div",1),e.TgZ(6,"app-shared-grid",2),e.NdJ("selectedRow",function(s){return r.selectedRowItem(s)})("selectedSelection",function(s){return r.selectedSelection(s)}),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&a&&(e.xp6(1),e.Q6J("title",e.lcZ(2,12,"BUILDER.METAREST.PAGE-TITLE"))("showNew",r.permissionService.hasPermission("METAREST-CREATE"))("showIcon",!0)("showSearch",!0)("searchPlaceholder",e.lcZ(3,14,"BUILDER.METAREST.SEARCH-PLACEHOLDER")),e.xp6(5),e.Q6J("showSkeleton",!r.dataLoaded)("data",r.gridData)("displayColumns",r.displayedColumns)("useCustomHeader",!0)("headers",r.headers)("showFilter",!1)("searchString",r.searchString))},directives:[f.I,h.q,A.H,j.M],pipes:[d.X$],styles:[""]}),t})(),data:{breadcrumb:"MENU.USER-MGMT.USER",permission_code:"METAREST-READ"}},{canActivate:[u.a],path:"new",component:O,data:{breadcrumb:"BUTTON.NEW",permission_code:"METAREST-CREATE"}},{canActivate:[u.a],path:"edit/:id",component:y,data:{breadcrumb:"BUTTON.EDIT",permission_code:"METAREST-UPDATE||METAREST-READ||METAREST-DELETE"}}];let z=(()=>{class t{}return t.\u0275fac=function(a){return new(a||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[[p.Bz.forChild(H)],p.Bz]}),t})();var X=i(40);function R(t){return new X.w(t,"assets/i18n/",".json")}let K=(()=>{class t{}return t.\u0275fac=function(a){return new(a||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[[g.ez,z,N.q,o.u5,o.UX,d.aw.forChild({loader:{provide:d.Zw,useFactory:R,deps:[Z.eN]},isolate:!0}),S.m,M._]]}),t})()}}]);