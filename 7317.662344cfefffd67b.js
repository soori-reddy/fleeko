"use strict";(self.webpackChunksolidapp=self.webpackChunksolidapp||[]).push([[7317],{9593:(x,f,a)=>{a.d(f,{N:()=>t});var _=a(9808),m=a(520),u=a(2155),d=a(3075),g=a(9291),h=a(1062),S=a(40),E=a(3918),y=a(7006),c=a(3583),C=a(900),v=a(5e3);function T(r){return new S.w(r,"assets/i18n/",".json")}let t=(()=>{class r{}return r.\u0275fac=function(P){return new(P||r)},r.\u0275mod=v.oAB({type:r}),r.\u0275inj=v.cJS({imports:[[_.ez,g.Bz,y.q,d.u5,d.UX,h.aw.forChild({loader:{provide:h.Zw,useFactory:T,deps:[m.eN]},isolate:!0}),d.UX,u.o9,C.m,c._,E.hx]]}),r})()},7317:(x,f,a)=>{a.r(f),a.d(f,{SyslogModule:()=>B,createTranslateLoader:()=>A});var _=a(9593),m=a(9808),u=a(520),d=a(3075),g=a(1062),h=a(40),S=a(7006),E=a(3583),y=a(900),c=a(9291),C=a(4128),v=a(4971),T=a(4193),t=a(5e3),r=a(2329),p=a(2340);let P=(()=>{class o{constructor(e){this.http=e}getAll(){return this.http.get(`${p.N.apiEndpoint}/config/syslogserver`)}getFormPlot(e){return this.http.get(`${p.N.apiEndpoint}/formplot/name/${e}`)}save(e){return this.http.post(`${p.N.apiEndpoint}/config/syslogserver`,e)}update(e,s){return this.http.put(`${p.N.apiEndpoint}/config/syslogserver/${e}`,s)}delete(e){return this.http.delete(`${p.N.apiEndpoint}/config/syslogserver/${e}`)}}return o.\u0275fac=function(e){return new(e||o)(t.LFG(u.eN))},o.\u0275prov=t.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();var D=a(5094),M=a(7071),O=a(291),L=a(722),R=a(4763),F=a(2414);function I(o,i){if(1&o){const e=t.EpF();t.TgZ(0,"div"),t.TgZ(1,"app-dynamic-form",2),t.NdJ("formData",function(n){return t.CHM(e),t.oxw(2).getFormData(n)})("isValidForm",function(n){return t.CHM(e),t.oxw(2).isFormValid(n)}),t.qZA(),t.qZA()}if(2&o){const e=t.oxw(2);t.xp6(1),t.Q6J("fields",null==e.plotConfig.fields?null:e.plotConfig.fields.items)("flexConfig",null==e.plotConfig.config?null:e.plotConfig.config.flexConfig)("readonly",e.readonly)}}function N(o,i){if(1&o){const e=t.EpF();t.TgZ(0,"app-page"),t.TgZ(1,"app-page-header",1),t.NdJ("pageAction",function(n){return t.CHM(e),t.oxw().getPageAction(n)}),t.ALo(2,"translate"),t.qZA(),t.TgZ(3,"app-page-body"),t.YNc(4,I,2,3,"div",0),t.qZA(),t.qZA()}if(2&o){const e=t.oxw();t.xp6(1),t.Q6J("title",t.lcZ(2,4,"SYSLOGGER.PAGE-TITLE"))("selectedId",e.permissionService.hasPermission("SYSLOG-SETTING-UPDATE")?null==e.configuation?null:e.configuation.id:null)("isDisabled",e.disable),t.xp6(3),t.Q6J("ngIf",e.dataLoaded)}}function G(o,i){if(1&o){const e=t.EpF();t.TgZ(0,"div"),t.TgZ(1,"app-dynamic-form",2),t.NdJ("formData",function(n){return t.CHM(e),t.oxw(2).getFormData(n)})("isValidForm",function(n){return t.CHM(e),t.oxw(2).isFormValid(n)}),t.qZA(),t.qZA()}if(2&o){const e=t.oxw(2);t.xp6(1),t.Q6J("fields",null==e.plotConfig.fields?null:e.plotConfig.fields.items)("flexConfig",null==e.plotConfig.config?null:e.plotConfig.config.flexConfig)("readonly",!1)}}function U(o,i){if(1&o){const e=t.EpF();t.TgZ(0,"app-page"),t.TgZ(1,"app-page-header",3),t.NdJ("pageAction",function(n){return t.CHM(e),t.oxw().getPageSaveAction(n)}),t.ALo(2,"translate"),t.qZA(),t.TgZ(3,"app-page-body"),t.YNc(4,G,2,3,"div",0),t.qZA(),t.qZA()}if(2&o){const e=t.oxw();t.xp6(1),t.Q6J("title",t.lcZ(2,4,"SYSLOGGER.PAGE-TITLE"))("showSave",e.permissionService.hasPermission("SYSLOG-SETTING-UPDATE"))("isDisabled",e.disableSave),t.xp6(3),t.Q6J("ngIf",e.dataLoaded)}}const Z=[{path:"",component:(()=>{class o{constructor(e,s,n,l,J,K){this.permissionService=e,this._service=s,this.store=n,this.translate=l,this.snackbarService=J,this.router=K,this.configuation={},this.dataLoaded=!1,this.formPlotName="SysLog",this.plotConfig={},this.isCreatePage=!0,this.formdata={},this.readonly=!1,this.disable=!1,this.disableSave=!0,this.store.select(v.D6).subscribe(W=>{this.translate.use(W.userPreference.language)})}ngOnInit(){this.getAll()}getFormData(e){this.formdata=e}isFormValid(e){this.isCreatePage&&e&&this.disableSave&&(this.disableSave=!1),!this.isCreatePage&&this.readonly&&(this.disable=!1),!this.isCreatePage&&!this.readonly&&e&&(this.disable=!1),!this.isCreatePage&&!this.readonly&&!e&&(this.disable=!0)}getAll(){(0,C.D)({requestOne:this._service.getFormPlot(this.formPlotName),requestTwo:this._service.getAll()}).subscribe(({requestOne:e,requestTwo:s})=>{var n;this.plotConfig=e,this.configuation=s[0],(null===(n=this.configuation)||void 0===n?void 0:n.id)?(this.isCreatePage=!1,this.readonly=!0,this.disable=!1):(this.isCreatePage=!0,this.disableSave=!0);for(let l of this.plotConfig.fields.items)this.configuation&&(l.value=(0,T.NL)(l.key,this.configuation));this.dataLoaded=!0})}save(){this._service.save(this.formdata).subscribe({next:e=>{this.configuation=e,this.snackbarService.info(this.translate.instant("SYSLOGGER.SUCCESS.CREATE"))},error:e=>{this.snackbarService.warn(this.translate.instant("SYSLOGGER.ERROR.CREATE"))}})}update(){this._service.update(this.configuation.id,this.formdata).subscribe({next:e=>{this.configuation=e,this.snackbarService.info(this.translate.instant("SYSLOGGER.SUCCESS.UPDATE")),this.reloadPage()},error:e=>this.snackbarService.warn(this.translate.instant("SYSLOGGER.ERROR.UPDATE"))})}getPageAction(e){const s=e.toString();"update"===s?this.update():"modify"===s?(this.readonly=!1,this.disable=!1):"save"===s&&(this.save(),this.isCreatePage=!1)}getPageSaveAction(e){"save"===e.toString()&&(this.save(),this.reloadPage())}reloadPage(){let e=this.router.url;this.router.routeReuseStrategy.shouldReuseRoute=()=>!1,this.router.onSameUrlNavigation="reload",this.router.navigate([e])}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(r.$),t.Y36(P),t.Y36(D.yh),t.Y36(g.sK),t.Y36(M.o),t.Y36(c.F0))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-syslog"]],decls:2,vars:2,consts:[[4,"ngIf"],[3,"title","selectedId","isDisabled","pageAction"],[3,"fields","flexConfig","readonly","formData","isValidForm"],[3,"title","showSave","isDisabled","pageAction"]],template:function(e,s){1&e&&(t.YNc(0,N,5,6,"app-page",0),t.YNc(1,U,5,6,"app-page",0)),2&e&&(t.Q6J("ngIf",!s.isCreatePage),t.xp6(1),t.Q6J("ngIf",s.isCreatePage))},directives:[m.O5,O.I,L.q,R.H,F.r],pipes:[g.X$],styles:[""]}),o})(),data:{permission_code:"SYSLOG-SETTING-READ||SYSLOG-SETTING||SYSLOG-SETTING-UPDATE"}}];let Y=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[[c.Bz.forChild(Z)],c.Bz]}),o})();function A(o){return new h.w(o,"assets/i18n/",".json")}let B=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[[m.ez,Y,S.q,d.u5,d.UX,g.aw.forChild({loader:{provide:g.Zw,useFactory:A,deps:[u.eN]},isolate:!0}),d.UX,d.u5,y.m,E._,_.N]]}),o})()}}]);